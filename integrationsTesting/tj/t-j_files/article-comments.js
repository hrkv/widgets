/*! For license information please see article-comments.js.LICENSE.txt */
(()=>{var e={2577:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(8607),o=n(6847),a=n(2522),s=n(390),c=n(7342),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.eventFromException=function(e,t){return s.eventFromException(e,t,this._options.attachStacktrace)},t.prototype.eventFromMessage=function(e,t,n){return void 0===t&&(t=o.Severity.Info),s.eventFromMessage(e,t,n,this._options.attachStacktrace)},t.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var t=r.__assign(r.__assign({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,sendClientReports:this._options.sendClientReports,_metadata:this._options._metadata}),n=i.initAPIDetails(t.dsn,t._metadata,t.tunnel),o=i.getEnvelopeEndpointWithUrlEncodedAuth(n.dsn,n.tunnel);if(this._options.transport)return new this._options.transport(t);if(a.supportsFetch()){var s=r.__assign({},t.fetchParameters);return this._newTransport=c.makeNewFetchTransport({requestOptions:s,url:o}),new c.FetchTransport(t)}return this._newTransport=c.makeNewXHRTransport({url:o,headers:t.headers}),new c.XHRTransport(t)},t}(i.BaseBackend);t.BrowserBackend=u},5943:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(8607),o=n(2522),a=n(2577),s=n(1295),c=n(4522),u=n(4233),l=function(e){function t(t){return void 0===t&&(t={}),t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:i.SDK_VERSION}],version:i.SDK_VERSION},e.call(this,a.BrowserBackend,t)||this}return r.__extends(t,e),t.prototype.showReportDialog=function(e){void 0===e&&(e={}),o.getGlobalObject().document&&(this._isEnabled()?c.injectReportDialog(r.__assign(r.__assign({},e),{dsn:e.dsn||this.getDsn()})):s.IS_DEBUG_BUILD&&o.logger.error("Trying to call showReportDialog with Sentry Client disabled"))},t.prototype._prepareEvent=function(t,n,r){return t.platform=t.platform||"javascript",e.prototype._prepareEvent.call(this,t,n,r)},t.prototype._sendEvent=function(t){var n=this.getIntegration(u.Breadcrumbs);n&&n.addSentryBreadcrumb(t),e.prototype._sendEvent.call(this,t)},t}(i.BaseClient);t.BrowserClient=l},390:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(6847),o=n(2522),a=n(7417);function s(e){var t=l(e),n={type:e&&e.name,value:f(e)};return t.length&&(n.stacktrace={frames:t}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function c(e,t,n){var r={exception:{values:[{type:o.isEvent(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+o.extractExceptionKeysForMessage(e)}]},extra:{__serialized__:o.normalizeToSize(e)}};if(t){var i=l(t);i.length&&(r.stacktrace={frames:i})}return r}function u(e){return{exception:{values:[s(e)]}}}function l(e){var t=e.stacktrace||e.stack||"",n=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(d.test(e.message))return 1}return 0}(e);try{return o.createStackParser(a.opera10StackParser,a.opera11StackParser,a.chromeStackParser,a.winjsStackParser,a.geckoStackParser)(t,n)}catch(e){}return[]}t.exceptionFromError=s,t.eventFromPlainObject=c,t.eventFromError=u,t.parseStackFrames=l;var d=/Minified React error #\d+;/i;function f(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function p(e,t,n,i){var a;if(o.isErrorEvent(e)&&e.error)return u(e.error);if(o.isDOMError(e)||o.isDOMException(e)){var s=e;if("stack"in e)a=u(e);else{var l=s.name||(o.isDOMError(s)?"DOMError":"DOMException"),d=s.message?l+": "+s.message:l;a=h(d,t,n),o.addExceptionTypeValue(a,d)}return"code"in s&&(a.tags=r.__assign(r.__assign({},a.tags),{"DOMException.code":""+s.code})),a}return o.isError(e)?u(e):o.isPlainObject(e)||o.isEvent(e)?(a=c(e,t,i),o.addExceptionMechanism(a,{synthetic:!0}),a):(a=h(e,t,n),o.addExceptionTypeValue(a,""+e,void 0),o.addExceptionMechanism(a,{synthetic:!0}),a)}function h(e,t,n){var r={message:e};if(n&&t){var i=l(t);i.length&&(r.stacktrace={frames:i})}return r}t.eventFromException=function(e,t,n){var r=p(e,t&&t.syntheticException||void 0,n);return o.addExceptionMechanism(r),r.level=i.Severity.Error,t&&t.event_id&&(r.event_id=t.event_id),o.resolvedSyncPromise(r)},t.eventFromMessage=function(e,t,n,r){void 0===t&&(t=i.Severity.Info);var a=h(e,n&&n.syntheticException||void 0,r);return a.level=t,n&&n.event_id&&(a.event_id=n.event_id),o.resolvedSyncPromise(a)},t.eventFromUnknownInput=p,t.eventFromString=h},4776:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(6847);t.Severity=r.Severity;var i=n(8607);t.addGlobalEventProcessor=i.addGlobalEventProcessor,t.addBreadcrumb=i.addBreadcrumb,t.captureException=i.captureException,t.captureEvent=i.captureEvent,t.captureMessage=i.captureMessage,t.configureScope=i.configureScope,t.getHubFromCarrier=i.getHubFromCarrier,t.getCurrentHub=i.getCurrentHub,t.Hub=i.Hub,t.makeMain=i.makeMain,t.Scope=i.Scope,t.Session=i.Session,t.startTransaction=i.startTransaction,t.SDK_VERSION=i.SDK_VERSION,t.setContext=i.setContext,t.setExtra=i.setExtra,t.setExtras=i.setExtras,t.setTag=i.setTag,t.setTags=i.setTags,t.setUser=i.setUser,t.withScope=i.withScope;var o=n(5943);t.BrowserClient=o.BrowserClient;var a=n(4522);t.injectReportDialog=a.injectReportDialog;var s=n(390);t.eventFromException=s.eventFromException,t.eventFromMessage=s.eventFromMessage;var c=n(7066);t.defaultIntegrations=c.defaultIntegrations,t.forceLoad=c.forceLoad,t.init=c.init,t.lastEventId=c.lastEventId,t.onLoad=c.onLoad,t.showReportDialog=c.showReportDialog,t.flush=c.flush,t.close=c.close,t.wrap=c.wrap;var u=n(9592);t.SDK_NAME=u.SDK_NAME},1295:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IS_DEBUG_BUILD="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},4522:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(8607),o=n(2522),a=n(1295),s=o.getGlobalObject(),c=0;function u(){c+=1,setTimeout((function(){c-=1}))}t.shouldIgnoreOnError=function(){return c>0},t.ignoreNextOnError=u,t.wrap=function e(t,n,a){if(void 0===n&&(n={}),"function"!=typeof t)return t;try{var s=t.__sentry_wrapped__;if(s)return s;if(o.getOriginalFunction(t))return t}catch(e){return t}var c=function(){var s=Array.prototype.slice.call(arguments);try{a&&"function"==typeof a&&a.apply(this,arguments);var c=s.map((function(t){return e(t,n)}));return t.apply(this,c)}catch(e){throw u(),i.withScope((function(t){t.addEventProcessor((function(e){return n.mechanism&&(o.addExceptionTypeValue(e,void 0,void 0),o.addExceptionMechanism(e,n.mechanism)),e.extra=r.__assign(r.__assign({},e.extra),{arguments:s}),e})),i.captureException(e)})),e}};try{for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(c[l]=t[l])}catch(e){}o.markFunctionWrapped(c,t),o.addNonEnumerableProperty(t,"__sentry_wrapped__",c);try{Object.getOwnPropertyDescriptor(c,"name").configurable&&Object.defineProperty(c,"name",{get:function(){return t.name}})}catch(e){}return c},t.injectReportDialog=function(e){if(void 0===e&&(e={}),s.document)if(e.eventId)if(e.dsn){var t=s.document.createElement("script");t.async=!0,t.src=i.getReportDialogEndpoint(e.dsn,e),e.onLoad&&(t.onload=e.onLoad);var n=s.document.head||s.document.body;n&&n.appendChild(t)}else a.IS_DEBUG_BUILD&&o.logger.error("Missing dsn option in showReportDialog call");else a.IS_DEBUG_BUILD&&o.logger.error("Missing eventId option in showReportDialog call")}},7092:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655);r.__exportStar(n(4776),t);var i=n(8607),o=n(2522),a=n(4233),s=n(7342);t.Transports=s;var c={},u=o.getGlobalObject();u.Sentry&&u.Sentry.Integrations&&(c=u.Sentry.Integrations);var l=r.__assign(r.__assign(r.__assign({},c),i.Integrations),a);t.Integrations=l},7694:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(8607),o=n(6847),a=n(2522),s=function(){function e(t){this.name=e.id,this._options=r.__assign({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t)}return e.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&i.getCurrentHub().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:a.getEventDescription(e)},{event:e})},e.prototype.setupOnce=function(){var e;this._options.console&&a.addInstrumentationHandler("console",c),this._options.dom&&a.addInstrumentationHandler("dom",(e=this._options.dom,function(t){var n,r="object"==typeof e?e.serializeAttribute:void 0;"string"==typeof r&&(r=[r]);try{n=t.event.target?a.htmlTreeAsString(t.event.target,r):a.htmlTreeAsString(t.event,r)}catch(e){n="<unknown>"}0!==n.length&&i.getCurrentHub().addBreadcrumb({category:"ui."+t.name,message:n},{event:t.event,name:t.name,global:t.global})})),this._options.xhr&&a.addInstrumentationHandler("xhr",u),this._options.fetch&&a.addInstrumentationHandler("fetch",l),this._options.history&&a.addInstrumentationHandler("history",d)},e.id="Breadcrumbs",e}();function c(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:a.severityFromString(e.level),message:a.safeJoin(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+(a.safeJoin(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1)}i.getCurrentHub().addBreadcrumb(t,{input:e.args,level:e.level})}function u(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var t=e.xhr.__sentry_xhr__||{},n=t.method,r=t.url,o=t.status_code,a=t.body;i.getCurrentHub().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:o},type:"http"},{xhr:e.xhr,input:a})}}function l(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?i.getCurrentHub().addBreadcrumb({category:"fetch",data:e.fetchData,level:o.Severity.Error,type:"http"},{data:e.error,input:e.args}):i.getCurrentHub().addBreadcrumb({category:"fetch",data:r.__assign(r.__assign({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))}function d(e){var t=a.getGlobalObject(),n=e.from,r=e.to,o=a.parseUrl(t.location.href),s=a.parseUrl(n),c=a.parseUrl(r);s.path||(s=o),o.protocol===c.protocol&&o.host===c.host&&(r=c.relative),o.protocol===s.protocol&&o.host===s.host&&(n=s.relative),i.getCurrentHub().addBreadcrumb({category:"navigation",data:{from:n,to:r}})}t.Breadcrumbs=s},9877:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(2522),i=n(1295),o=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(t,n){t((function(t){var o=n().getIntegration(e);if(o){try{if(function(e,t){return!!t&&(!!function(e,t){var n=e.message,r=t.message;return!(!n&&!r)&&(!(n&&!r||!n&&r)&&(n===r&&(!!s(e,t)&&!!a(e,t))))}(e,t)||!!function(e,t){var n=c(t),r=c(e);return!(!n||!r)&&(n.type===r.type&&n.value===r.value&&(!!s(e,t)&&!!a(e,t)))}(e,t))}(t,o._previousEvent))return i.IS_DEBUG_BUILD&&r.logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){return o._previousEvent=t}return o._previousEvent=t}return t}))},e.id="Dedupe",e}();function a(e,t){var n=u(e),r=u(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(var i=0;i<r.length;i++){var o=r[i],a=n[i];if(o.filename!==a.filename||o.lineno!==a.lineno||o.colno!==a.colno||o.function!==a.function)return!1}return!0}function s(e,t){var n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function c(e){return e.exception&&e.exception.values&&e.exception.values[0]}function u(e){var t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}else if(e.stacktrace)return e.stacktrace.frames}t.Dedupe=o},990:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(8607),o=n(6847),a=n(2522),s=n(390),c=n(1295),u=n(4522),l=function(){function e(t){this.name=e.id,this._installFunc={onerror:d,onunhandledrejection:f},this._options=r.__assign({onerror:!0,onunhandledrejection:!0},t)}return e.prototype.setupOnce=function(){Error.stackTraceLimit=50;var e,t=this._options;for(var n in t){var r=this._installFunc[n];r&&t[n]&&(e=n,c.IS_DEBUG_BUILD&&a.logger.log("Global Handler attached: "+e),r(),this._installFunc[n]=void 0)}},e.id="GlobalHandlers",e}();function d(){a.addInstrumentationHandler("error",(function(e){var t=r.__read(v(),2),n=t[0],i=t[1];if(n.getIntegration(l)){var c=e.msg,d=e.url,f=e.line,m=e.column,g=e.error;if(!(u.shouldIgnoreOnError()||g&&g.__sentry_own_request__)){var y=void 0===g&&a.isString(c)?function(e,t,n,r){var i=a.isErrorEvent(e)?e.message:e,o="Error",s=i.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);return s&&(o=s[1],i=s[2]),p({exception:{values:[{type:o,value:i}]}},t,n,r)}(c,d,f,m):p(s.eventFromUnknownInput(g||c,void 0,i,!1),d,f,m);y.level=o.Severity.Error,h(n,g,y,"onerror")}}}))}function f(){a.addInstrumentationHandler("unhandledrejection",(function(e){var t=r.__read(v(),2),n=t[0],i=t[1];if(n.getIntegration(l)){var c=e;try{"reason"in e?c=e.reason:"detail"in e&&"reason"in e.detail&&(c=e.detail.reason)}catch(e){}if(u.shouldIgnoreOnError()||c&&c.__sentry_own_request__)return!0;var d=a.isPrimitive(c)?{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(c)}]}}:s.eventFromUnknownInput(c,void 0,i,!0);d.level=o.Severity.Error,h(n,c,d,"onunhandledrejection")}}))}function p(e,t,n,r){var i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},c=s.stacktrace=s.stacktrace||{},u=c.frames=c.frames||[],l=isNaN(parseInt(r,10))?void 0:r,d=isNaN(parseInt(n,10))?void 0:n,f=a.isString(t)&&t.length>0?t:a.getLocationHref();return 0===u.length&&u.push({colno:l,filename:f,function:"?",in_app:!0,lineno:d}),e}function h(e,t,n,r){a.addExceptionMechanism(n,{handled:!1,type:r}),e.captureEvent(n,{originalException:t})}function v(){var e=i.getCurrentHub(),t=e.getClient();return[e,t&&t.getOptions().attachStacktrace]}t.GlobalHandlers=l},4233:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(990);t.GlobalHandlers=r.GlobalHandlers;var i=n(4119);t.TryCatch=i.TryCatch;var o=n(7694);t.Breadcrumbs=o.Breadcrumbs;var a=n(2886);t.LinkedErrors=a.LinkedErrors;var s=n(5831);t.UserAgent=s.UserAgent;var c=n(9877);t.Dedupe=c.Dedupe},2886:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(8607),o=n(2522),a=n(390),s=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._key=t.key||"cause",this._limit=t.limit||5}return e.prototype.setupOnce=function(){i.addGlobalEventProcessor((function(t,n){var r=i.getCurrentHub().getIntegration(e);return r?c(r._key,r._limit,t,n):t}))},e.id="LinkedErrors",e}();function c(e,t,n,i){if(!(n.exception&&n.exception.values&&i&&o.isInstanceOf(i.originalException,Error)))return n;var a=u(t,i.originalException,e);return n.exception.values=r.__spread(a,n.exception.values),n}function u(e,t,n,i){if(void 0===i&&(i=[]),!o.isInstanceOf(t[n],Error)||i.length+1>=e)return i;var s=a.exceptionFromError(t[n]);return u(e,t[n],n,r.__spread([s],i))}t.LinkedErrors=s,t._handler=c,t._walkErrorTree=u},4119:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(2522),o=n(4522),a=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],s=function(){function e(t){this.name=e.id,this._options=r.__assign({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},t)}return e.prototype.setupOnce=function(){var e=i.getGlobalObject();this._options.setTimeout&&i.fill(e,"setTimeout",c),this._options.setInterval&&i.fill(e,"setInterval",c),this._options.requestAnimationFrame&&i.fill(e,"requestAnimationFrame",u),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&i.fill(XMLHttpRequest.prototype,"send",l);var t=this._options.eventTarget;t&&(Array.isArray(t)?t:a).forEach(d)},e.id="TryCatch",e}();function c(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0];return t[0]=o.wrap(r,{mechanism:{data:{function:i.getFunctionName(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}}function u(e){return function(t){return e.apply(this,[o.wrap(t,{mechanism:{data:{function:"requestAnimationFrame",handler:i.getFunctionName(e)},handled:!0,type:"instrument"}})])}}function l(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this,a=["onload","onerror","onprogress","onreadystatechange"];return a.forEach((function(e){e in r&&"function"==typeof r[e]&&i.fill(r,e,(function(t){var n={mechanism:{data:{function:e,handler:i.getFunctionName(t)},handled:!0,type:"instrument"}},r=i.getOriginalFunction(t);return r&&(n.mechanism.data.handler=i.getFunctionName(r)),o.wrap(t,n)}))})),e.apply(this,t)}}function d(e){var t=i.getGlobalObject(),n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(i.fill(n,"addEventListener",(function(t){return function(n,r,a){try{"function"==typeof r.handleEvent&&(r.handleEvent=o.wrap(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:i.getFunctionName(r),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.apply(this,[n,o.wrap(r,{mechanism:{data:{function:"addEventListener",handler:i.getFunctionName(r),target:e},handled:!0,type:"instrument"}}),a])}})),i.fill(n,"removeEventListener",(function(e){return function(t,n,r){var i=n;try{var o=i&&i.__sentry_wrapped__;o&&e.call(this,t,o,r)}catch(e){}return e.call(this,t,i,r)}})))}t.TryCatch=s},5831:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(8607),o=n(2522).getGlobalObject(),a=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){i.addGlobalEventProcessor((function(t){if(i.getCurrentHub().getIntegration(e)){if(!o.navigator&&!o.location&&!o.document)return t;var n=t.request&&t.request.url||o.location&&o.location.href,a=(o.document||{}).referrer,s=(o.navigator||{}).userAgent,c=r.__assign(r.__assign(r.__assign({},t.request&&t.request.headers),a&&{Referer:a}),s&&{"User-Agent":s}),u=r.__assign(r.__assign({},n&&{url:n}),{headers:c});return r.__assign(r.__assign({},t),{request:u})}return t}))},e.id="UserAgent",e}();t.UserAgent=a},7066:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(8607),o=n(2522),a=n(5943),s=n(1295),c=n(4522),u=n(4233);function l(e){e.startSession({ignoreDuration:!0}),e.captureSession()}t.defaultIntegrations=[new i.Integrations.InboundFilters,new i.Integrations.FunctionToString,new u.TryCatch,new u.Breadcrumbs,new u.GlobalHandlers,new u.LinkedErrors,new u.Dedupe,new u.UserAgent],t.init=function(e){if(void 0===e&&(e={}),void 0===e.defaultIntegrations&&(e.defaultIntegrations=t.defaultIntegrations),void 0===e.release){var n=o.getGlobalObject();n.SENTRY_RELEASE&&n.SENTRY_RELEASE.id&&(e.release=n.SENTRY_RELEASE.id)}void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0),i.initAndBind(a.BrowserClient,e),e.autoSessionTracking&&function(){if(void 0!==o.getGlobalObject().document){var e=i.getCurrentHub();e.captureSession&&(l(e),o.addInstrumentationHandler("history",(function(e){var t=e.from,n=e.to;void 0!==t&&t!==n&&l(i.getCurrentHub())})))}else s.IS_DEBUG_BUILD&&o.logger.warn("Session tracking in non-browser environment with @sentry/browser is not supported.")}()},t.showReportDialog=function(e){void 0===e&&(e={});var t=i.getCurrentHub(),n=t.getScope();n&&(e.user=r.__assign(r.__assign({},n.getUser()),e.user)),e.eventId||(e.eventId=t.lastEventId());var o=t.getClient();o&&o.showReportDialog(e)},t.lastEventId=function(){return i.getCurrentHub().lastEventId()},t.forceLoad=function(){},t.onLoad=function(e){e()},t.flush=function(e){var t=i.getCurrentHub().getClient();return t?t.flush(e):(s.IS_DEBUG_BUILD&&o.logger.warn("Cannot flush events. No client defined."),o.resolvedSyncPromise(!1))},t.close=function(e){var t=i.getCurrentHub().getClient();return t?t.close(e):(s.IS_DEBUG_BUILD&&o.logger.warn("Cannot flush events and disable SDK. No client defined."),o.resolvedSyncPromise(!1))},t.wrap=function(e){return c.wrap(e)()}},7417:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i="?";function o(e,t,n,r){var i={filename:e,function:t,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==r&&(i.colno=r),i}var a=/^\s*at (?:(.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,s=/\((\S*)(?::(\d+))(?::(\d+))\)/;t.chromeStackParser=[30,function(e){var t=a.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){var n=s.exec(t[2]);n&&(t[2]=n[1],t[3]=n[2],t[4]=n[3])}var c=r.__read(p(t[1]||i,t[2]),2),u=c[0];return o(c[1],u,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}];var c=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,u=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;t.geckoStackParser=[50,function(e){var t,n=c.exec(e);if(n){if(n[3]&&n[3].indexOf(" > eval")>-1){var a=u.exec(n[3]);a&&(n[1]=n[1]||"eval",n[3]=a[1],n[4]=a[2],n[5]="")}var s=n[3],l=n[1]||i;return l=(t=r.__read(p(l,s),2))[0],o(s=t[1],l,n[4]?+n[4]:void 0,n[5]?+n[5]:void 0)}}];var l=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;t.winjsStackParser=[40,function(e){var t=l.exec(e);return t?o(t[2],t[1]||i,+t[3],t[4]?+t[4]:void 0):void 0}];var d=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i;t.opera10StackParser=[10,function(e){var t=d.exec(e);return t?o(t[2],t[3]||i,+t[1]):void 0}];var f=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i;t.opera11StackParser=[20,function(e){var t=f.exec(e);return t?o(t[5],t[3]||t[4]||i,+t[1],+t[2]):void 0}];var p=function(e,t){var n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:i,n?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]}},2010:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(8607),o=n(2522),a=n(1295),s=n(597);function c(e){return"event"===e?"error":e}var u=o.getGlobalObject(),l=function(){function e(e){var t=this;this.options=e,this._buffer=o.makePromiseBuffer(30),this._rateLimits={},this._outcomes={},this._api=i.initAPIDetails(e.dsn,e._metadata,e.tunnel),this.url=i.getStoreEndpointWithUrlEncodedAuth(this._api.dsn),this.options.sendClientReports&&u.document&&u.document.addEventListener("visibilitychange",(function(){"hidden"===u.document.visibilityState&&t._flushOutcomes()}))}return e.prototype.sendEvent=function(e){return this._sendRequest(i.eventToSentryRequest(e,this._api),e)},e.prototype.sendSession=function(e){return this._sendRequest(i.sessionToSentryRequest(e,this._api),e)},e.prototype.close=function(e){return this._buffer.drain(e)},e.prototype.recordLostEvent=function(e,t){var n;if(this.options.sendClientReports){var r=c(t)+":"+e;a.IS_DEBUG_BUILD&&o.logger.log("Adding outcome: "+r),this._outcomes[r]=(null!=(n=this._outcomes[r])?n:0)+1}},e.prototype._flushOutcomes=function(){if(this.options.sendClientReports){var e=this._outcomes;if(this._outcomes={},Object.keys(e).length){a.IS_DEBUG_BUILD&&o.logger.log("Flushing outcomes:\n"+JSON.stringify(e,null,2));var t=i.getEnvelopeEndpointWithUrlEncodedAuth(this._api.dsn,this._api.tunnel),n=Object.keys(e).map((function(t){var n=r.__read(t.split(":"),2),i=n[0];return{reason:n[1],category:i,quantity:e[t]}})),c=o.createClientReportEnvelope(n,this._api.tunnel&&o.dsnToString(this._api.dsn));try{s.sendReport(t,o.serializeEnvelope(c))}catch(e){a.IS_DEBUG_BUILD&&o.logger.error(e)}}else a.IS_DEBUG_BUILD&&o.logger.log("No outcomes to flush")}},e.prototype._handleResponse=function(e){var t=e.requestType,n=e.response,r=e.headers,i=e.resolve,s=e.reject,c=o.eventStatusFromHttpCode(n.status);this._rateLimits=o.updateRateLimits(this._rateLimits,r),this._isRateLimited(t)&&a.IS_DEBUG_BUILD&&o.logger.warn("Too many "+t+" requests, backing off until: "+this._disabledUntil(t)),"success"!==c?s(n):i({status:c})},e.prototype._disabledUntil=function(e){var t=c(e);return new Date(o.disabledUntil(this._rateLimits,t))},e.prototype._isRateLimited=function(e){var t=c(e);return o.isRateLimited(this._rateLimits,t)},e}();t.BaseTransport=l},7318:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(2522),o=n(2010),a=n(597),s=function(e){function t(t,n){void 0===n&&(n=a.getNativeFetchImplementation());var r=e.call(this,t)||this;return r._fetch=n,r}return r.__extends(t,e),t.prototype._sendRequest=function(e,t){var n=this;if(this._isRateLimited(e.type))return this.recordLostEvent("ratelimit_backoff",e.type),Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429});var r={body:e.body,method:"POST",referrerPolicy:i.supportsReferrerPolicy()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this._buffer.add((function(){return new i.SyncPromise((function(t,i){n._fetch(e.url,r).then((function(r){var o={"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")};n._handleResponse({requestType:e.type,response:r,headers:o,resolve:t,reject:i})})).catch(i)}))})).then(void 0,(function(t){throw t instanceof i.SentryError?n.recordLostEvent("queue_overflow",e.type):n.recordLostEvent("network_error",e.type),t}))},t}(o.BaseTransport);t.FetchTransport=s},7342:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(2010);t.BaseTransport=r.BaseTransport;var i=n(7318);t.FetchTransport=i.FetchTransport;var o=n(3374);t.XHRTransport=o.XHRTransport;var a=n(1097);t.makeNewFetchTransport=a.makeNewFetchTransport;var s=n(1169);t.makeNewXHRTransport=s.makeNewXHRTransport},1097:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(8607),o=n(597);t.makeNewFetchTransport=function(e,t){return void 0===t&&(t=o.getNativeFetchImplementation()),i.createTransport({bufferSize:e.bufferSize},(function(n){var i=r.__assign({body:n.body,method:"POST",referrerPolicy:"origin"},e.requestOptions);return t(e.url,i).then((function(e){return e.text().then((function(t){return{body:t,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")},reason:e.statusText,statusCode:e.status}}))}))}))}},1169:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(8607),i=n(2522);t.makeNewXHRTransport=function(e){return r.createTransport({bufferSize:e.bufferSize},(function(t){return new i.SyncPromise((function(n,r){var i=new XMLHttpRequest;for(var o in i.onreadystatechange=function(){if(4===i.readyState){var e={body:i.response,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")},reason:i.statusText,statusCode:i.status};n(e)}},i.open("POST",e.url),e.headers)Object.prototype.hasOwnProperty.call(e.headers,o)&&i.setRequestHeader(o,e.headers[o]);i.send(t.body)}))}))}},597:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(2522),o=n(1295),a=i.getGlobalObject();function s(){if(r)return r;if(i.isNativeFetch(a.fetch))return r=a.fetch.bind(a);var e=a.document,t=a.fetch;if(e&&"function"==typeof e.createElement)try{var n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);var s=n.contentWindow;s&&s.fetch&&(t=s.fetch),e.head.removeChild(n)}catch(e){o.IS_DEBUG_BUILD&&i.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return r=t.bind(a)}t.getNativeFetchImplementation=s,t.sendReport=function(e,t){if("[object Navigator]"===Object.prototype.toString.call(a&&a.navigator)&&"function"==typeof a.navigator.sendBeacon)return a.navigator.sendBeacon.bind(a.navigator)(e,t);if(i.supportsFetch()){var n=s();return i.forget(n(e,{body:t,method:"POST",credentials:"omit",keepalive:!0}))}}},3374:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(2522),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype._sendRequest=function(e,t){var n=this;return this._isRateLimited(e.type)?(this.recordLostEvent("ratelimit_backoff",e.type),Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429})):this._buffer.add((function(){return new i.SyncPromise((function(t,r){var i=new XMLHttpRequest;for(var o in i.onreadystatechange=function(){if(4===i.readyState){var o={"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")};n._handleResponse({requestType:e.type,response:i,headers:o,resolve:t,reject:r})}},i.open("POST",e.url),n.options.headers)Object.prototype.hasOwnProperty.call(n.options.headers,o)&&i.setRequestHeader(o,n.options.headers[o]);i.send(e.body)}))})).then(void 0,(function(t){throw t instanceof i.SentryError?n.recordLostEvent("queue_overflow",e.type):n.recordLostEvent("network_error",e.type),t}))},t}(n(2010).BaseTransport);t.XHRTransport=o},9592:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SDK_NAME="sentry.javascript.browser"},1580:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(2522),i=function(){function e(e,t,n){void 0===t&&(t={}),this.dsn=e,this._dsnObject=r.makeDsn(e),this.metadata=t,this._tunnel=n}return e.prototype.getDsn=function(){return this._dsnObject},e.prototype.forceEnvelope=function(){return!!this._tunnel},e.prototype.getBaseApiEndpoint=function(){return o(this._dsnObject)},e.prototype.getStoreEndpoint=function(){return c(this._dsnObject)},e.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return u(this._dsnObject)},e.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return l(this._dsnObject,this._tunnel)},e}();function o(e){var t=e.protocol?e.protocol+":":"",n=e.port?":"+e.port:"";return t+"//"+e.host+n+(e.path?"/"+e.path:"")+"/api/"}function a(e,t){return""+o(e)+e.projectId+"/"+t+"/"}function s(e){return r.urlEncode({sentry_key:e.publicKey,sentry_version:"7"})}function c(e){return a(e,"store")}function u(e){return c(e)+"?"+s(e)}function l(e,t){return t||function(e){return a(e,"envelope")}(e)+"?"+s(e)}t.API=i,t.initAPIDetails=function(e,t,n){return{initDsn:e,metadata:t||{},dsn:r.makeDsn(e),tunnel:n}},t.getStoreEndpointWithUrlEncodedAuth=u,t.getEnvelopeEndpointWithUrlEncodedAuth=l,t.getRequestHeaders=function(e,t,n){var r=["Sentry sentry_version=7"];return r.push("sentry_client="+t+"/"+n),r.push("sentry_key="+e.publicKey),e.pass&&r.push("sentry_secret="+e.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}},t.getReportDialogEndpoint=function(e,t){var n=r.makeDsn(e),i=o(n)+"embed/error-page/",a="dsn="+r.dsnToString(n);for(var s in t)if("dsn"!==s)if("user"===s){if(!t.user)continue;t.user.name&&(a+="&name="+encodeURIComponent(t.user.name)),t.user.email&&(a+="&email="+encodeURIComponent(t.user.email))}else a+="&"+encodeURIComponent(s)+"="+encodeURIComponent(t[s]);return i+"?"+a}},6401:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(2522),o=n(1580),a=n(3379),s=n(8329),c=n(9950),u=function(){function e(e){this._options=e,this._options.dsn||a.IS_DEBUG_BUILD&&i.logger.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return e.prototype.eventFromException=function(e,t){throw new i.SentryError("Backend has to implement `eventFromException` method")},e.prototype.eventFromMessage=function(e,t,n){throw new i.SentryError("Backend has to implement `eventFromMessage` method")},e.prototype.sendEvent=function(e){if(this._newTransport&&this._options.dsn&&this._options._experiments&&this._options._experiments.newTransport){var t=o.initAPIDetails(this._options.dsn,this._options._metadata,this._options.tunnel),n=s.createEventEnvelope(e,t);this._newTransport.send(n).then(null,(function(e){a.IS_DEBUG_BUILD&&i.logger.error("Error while sending event:",e)}))}else this._transport.sendEvent(e).then(null,(function(e){a.IS_DEBUG_BUILD&&i.logger.error("Error while sending event:",e)}))},e.prototype.sendSession=function(e){if(this._transport.sendSession)if(this._newTransport&&this._options.dsn&&this._options._experiments&&this._options._experiments.newTransport){var t=o.initAPIDetails(this._options.dsn,this._options._metadata,this._options.tunnel),n=r.__read(s.createSessionEnvelope(e,t),1)[0];this._newTransport.send(n).then(null,(function(e){a.IS_DEBUG_BUILD&&i.logger.error("Error while sending session:",e)}))}else this._transport.sendSession(e).then(null,(function(e){a.IS_DEBUG_BUILD&&i.logger.error("Error while sending session:",e)}));else a.IS_DEBUG_BUILD&&i.logger.warn("Dropping session because custom transport doesn't implement sendSession")},e.prototype.getTransport=function(){return this._transport},e.prototype._setupTransport=function(){return new c.NoopTransport},e}();t.BaseBackend=u},9087:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(3793),o=n(2522),a=n(3379),s=n(1462),c="Not capturing exception because it's already been captured.",u=function(){function e(e,t){this._integrations={},this._numProcessing=0,this._backend=new e(t),this._options=t,t.dsn&&(this._dsn=o.makeDsn(t.dsn))}return e.prototype.captureException=function(e,t,n){var r=this;if(!o.checkOrSetAlreadyCaught(e)){var i=t&&t.event_id;return this._process(this._getBackend().eventFromException(e,t).then((function(e){return r._captureEvent(e,t,n)})).then((function(e){i=e}))),i}a.IS_DEBUG_BUILD&&o.logger.log(c)},e.prototype.captureMessage=function(e,t,n,r){var i=this,a=n&&n.event_id,s=o.isPrimitive(e)?this._getBackend().eventFromMessage(String(e),t,n):this._getBackend().eventFromException(e,n);return this._process(s.then((function(e){return i._captureEvent(e,n,r)})).then((function(e){a=e}))),a},e.prototype.captureEvent=function(e,t,n){if(!(t&&t.originalException&&o.checkOrSetAlreadyCaught(t.originalException))){var r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((function(e){r=e}))),r}a.IS_DEBUG_BUILD&&o.logger.log(c)},e.prototype.captureSession=function(e){this._isEnabled()?"string"!=typeof e.release?a.IS_DEBUG_BUILD&&o.logger.warn("Discarded session because of missing or non-string release"):(this._sendSession(e),e.update({init:!1})):a.IS_DEBUG_BUILD&&o.logger.warn("SDK not enabled, will not capture session.")},e.prototype.getDsn=function(){return this._dsn},e.prototype.getOptions=function(){return this._options},e.prototype.getTransport=function(){return this._getBackend().getTransport()},e.prototype.flush=function(e){var t=this;return this._isClientDoneProcessing(e).then((function(n){return t.getTransport().close(e).then((function(e){return n&&e}))}))},e.prototype.close=function(e){var t=this;return this.flush(e).then((function(e){return t.getOptions().enabled=!1,e}))},e.prototype.setupIntegrations=function(){this._isEnabled()&&!this._integrations.initialized&&(this._integrations=s.setupIntegrations(this._options))},e.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){return a.IS_DEBUG_BUILD&&o.logger.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},e.prototype._updateSessionFromEvent=function(e,t){var n,i,o=!1,a=!1,s=t.exception&&t.exception.values;if(s){a=!0;try{for(var c=r.__values(s),u=c.next();!u.done;u=c.next()){var l=u.value.mechanism;if(l&&!1===l.handled){o=!0;break}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}var d="ok"===e.status;(d&&0===e.errors||d&&o)&&(e.update(r.__assign(r.__assign({},o&&{status:"crashed"}),{errors:e.errors||Number(a||o)})),this.captureSession(e))},e.prototype._sendSession=function(e){this._getBackend().sendSession(e)},e.prototype._isClientDoneProcessing=function(e){var t=this;return new o.SyncPromise((function(n){var r=0,i=setInterval((function(){0==t._numProcessing?(clearInterval(i),n(!0)):(r+=1,e&&r>=e&&(clearInterval(i),n(!1)))}),1)}))},e.prototype._getBackend=function(){return this._backend},e.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},e.prototype._prepareEvent=function(e,t,n){var a=this,s=this.getOptions(),c=s.normalizeDepth,u=void 0===c?3:c,l=s.normalizeMaxBreadth,d=void 0===l?1e3:l,f=r.__assign(r.__assign({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:o.uuid4()),timestamp:e.timestamp||o.dateTimestampInSeconds()});this._applyClientOptions(f),this._applyIntegrationsMetadata(f);var p=t;n&&n.captureContext&&(p=i.Scope.clone(p).update(n.captureContext));var h=o.resolvedSyncPromise(f);return p&&(h=p.applyToEvent(f,n)),h.then((function(e){return e&&(e.sdkProcessingMetadata=r.__assign(r.__assign({},e.sdkProcessingMetadata),{normalizeDepth:o.normalize(u)+" ("+typeof u+")"})),"number"==typeof u&&u>0?a._normalizeEvent(e,u,d):e}))},e.prototype._normalizeEvent=function(e,t,n){if(!e)return null;var i=r.__assign(r.__assign(r.__assign(r.__assign(r.__assign({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return r.__assign(r.__assign({},e),e.data&&{data:o.normalize(e.data,t,n)})}))}),e.user&&{user:o.normalize(e.user,t,n)}),e.contexts&&{contexts:o.normalize(e.contexts,t,n)}),e.extra&&{extra:o.normalize(e.extra,t,n)});return e.contexts&&e.contexts.trace&&(i.contexts.trace=e.contexts.trace),i.sdkProcessingMetadata=r.__assign(r.__assign({},i.sdkProcessingMetadata),{baseClientNormalized:!0}),i},e.prototype._applyClientOptions=function(e){var t=this.getOptions(),n=t.environment,r=t.release,i=t.dist,a=t.maxValueLength,s=void 0===a?250:a;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=o.truncate(e.message,s));var c=e.exception&&e.exception.values&&e.exception.values[0];c&&c.value&&(c.value=o.truncate(c.value,s));var u=e.request;u&&u.url&&(u.url=o.truncate(u.url,s))},e.prototype._applyIntegrationsMetadata=function(e){var t=Object.keys(this._integrations);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=r.__spread(e.sdk.integrations||[],t))},e.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},e.prototype._captureEvent=function(e,t,n){return this._processEvent(e,t,n).then((function(e){return e.event_id}),(function(e){a.IS_DEBUG_BUILD&&o.logger.error(e)}))},e.prototype._processEvent=function(e,t,n){var r=this,i=this.getOptions(),a=i.beforeSend,s=i.sampleRate,c=this.getTransport();function u(e,t){c.recordLostEvent&&c.recordLostEvent(e,t)}if(!this._isEnabled())return o.rejectedSyncPromise(new o.SentryError("SDK not enabled, will not capture event."));var l="transaction"===e.type;return!l&&"number"==typeof s&&Math.random()>s?(u("sample_rate","event"),o.rejectedSyncPromise(new o.SentryError("Discarding event because it's not included in the random sample (sampling rate = "+s+")"))):this._prepareEvent(e,n,t).then((function(n){if(null===n)throw u("event_processor",e.type||"event"),new o.SentryError("An event processor returned null, will not send event.");return t&&t.data&&!0===t.data.__sentry__||l||!a?n:function(e){var t="`beforeSend` method has to return `null` or a valid event.";if(o.isThenable(e))return e.then((function(e){if(!o.isPlainObject(e)&&null!==e)throw new o.SentryError(t);return e}),(function(e){throw new o.SentryError("beforeSend rejected with "+e)}));if(!o.isPlainObject(e)&&null!==e)throw new o.SentryError(t);return e}(a(n,t))})).then((function(t){if(null===t)throw u("before_send",e.type||"event"),new o.SentryError("`beforeSend` returned `null`, will not send event.");var i=n&&n.getSession&&n.getSession();return!l&&i&&r._updateSessionFromEvent(i,t),r._sendEvent(t),t})).then(null,(function(e){if(e instanceof o.SentryError)throw e;throw r.captureException(e,{data:{__sentry__:!0},originalException:e}),new o.SentryError("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}))},e.prototype._process=function(e){var t=this;this._numProcessing+=1,e.then((function(e){return t._numProcessing-=1,e}),(function(e){return t._numProcessing-=1,e}))},e}();t.BaseClient=u},3379:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IS_DEBUG_BUILD="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},8607:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(5723);t.addBreadcrumb=r.addBreadcrumb,t.captureException=r.captureException,t.captureEvent=r.captureEvent,t.captureMessage=r.captureMessage,t.configureScope=r.configureScope,t.startTransaction=r.startTransaction,t.setContext=r.setContext,t.setExtra=r.setExtra,t.setExtras=r.setExtras,t.setTag=r.setTag,t.setTags=r.setTags,t.setUser=r.setUser,t.withScope=r.withScope;var i=n(3793);t.addGlobalEventProcessor=i.addGlobalEventProcessor,t.getCurrentHub=i.getCurrentHub,t.getHubFromCarrier=i.getHubFromCarrier,t.Hub=i.Hub,t.makeMain=i.makeMain,t.Scope=i.Scope,t.Session=i.Session;var o=n(1580);t.API=o.API,t.getEnvelopeEndpointWithUrlEncodedAuth=o.getEnvelopeEndpointWithUrlEncodedAuth,t.getStoreEndpointWithUrlEncodedAuth=o.getStoreEndpointWithUrlEncodedAuth,t.getRequestHeaders=o.getRequestHeaders,t.initAPIDetails=o.initAPIDetails,t.getReportDialogEndpoint=o.getReportDialogEndpoint;var a=n(9087);t.BaseClient=a.BaseClient;var s=n(6401);t.BaseBackend=s.BaseBackend;var c=n(8329);t.eventToSentryRequest=c.eventToSentryRequest,t.sessionToSentryRequest=c.sessionToSentryRequest;var u=n(4268);t.initAndBind=u.initAndBind;var l=n(9950);t.NoopTransport=l.NoopTransport;var d=n(1239);t.createTransport=d.createTransport;var f=n(3275);t.SDK_VERSION=f.SDK_VERSION;var p=n(30);t.Integrations=p},1462:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(3793),o=n(2522),a=n(3379);function s(e){return e.reduce((function(e,t){return e.every((function(e){return t.name!==e.name}))&&e.push(t),e}),[])}function c(e){var t=e.defaultIntegrations&&r.__spread(e.defaultIntegrations)||[],n=e.integrations,i=r.__spread(s(t));Array.isArray(n)?i=r.__spread(i.filter((function(e){return n.every((function(t){return t.name!==e.name}))})),s(n)):"function"==typeof n&&(i=n(i),i=Array.isArray(i)?i:[i]);var o=i.map((function(e){return e.name})),a="Debug";return-1!==o.indexOf(a)&&i.push.apply(i,r.__spread(i.splice(o.indexOf(a),1))),i}function u(e){-1===t.installedIntegrations.indexOf(e.name)&&(e.setupOnce(i.addGlobalEventProcessor,i.getCurrentHub),t.installedIntegrations.push(e.name),a.IS_DEBUG_BUILD&&o.logger.log("Integration installed: "+e.name))}t.installedIntegrations=[],t.getIntegrationsToSetup=c,t.setupIntegration=u,t.setupIntegrations=function(e){var t={};return c(e).forEach((function(e){t[e.name]=e,u(e)})),o.addNonEnumerableProperty(t,"initialized",!0),t}},8809:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(2522),o=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){r=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=i.getOriginalFunction(this)||this;return r.apply(n,e)}},e.id="FunctionToString",e}();t.FunctionToString=o},8892:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(2522),o=n(3379),a=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],s=function(){function e(t){void 0===t&&(t={}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(t,n){t((function(t){var r=n();if(r){var i=r.getIntegration(e);if(i){var o=r.getClient(),a=o?o.getOptions():{};return u(t,c(i._options,a))?null:t}}return t}))},e.id="InboundFilters",e}();function c(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),{allowUrls:r.__spread(e.whitelistUrls||[],e.allowUrls||[],t.whitelistUrls||[],t.allowUrls||[]),denyUrls:r.__spread(e.blacklistUrls||[],e.denyUrls||[],t.blacklistUrls||[],t.denyUrls||[]),ignoreErrors:r.__spread(e.ignoreErrors||[],t.ignoreErrors||[],a),ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}function u(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(o.IS_DEBUG_BUILD&&i.logger.warn("Event dropped due to being internal Sentry Error.\nEvent: "+i.getEventDescription(e)),!0):function(e,t){return!(!t||!t.length)&&function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,r=void 0===n?"":n,a=t.value,s=void 0===a?"":a;return[""+s,r+": "+s]}catch(t){return o.IS_DEBUG_BUILD&&i.logger.error("Cannot extract message for event "+i.getEventDescription(e)),[]}return[]}(e).some((function(e){return t.some((function(t){return i.isMatchingPattern(e,t)}))}))}(e,t.ignoreErrors)?(o.IS_DEBUG_BUILD&&i.logger.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+i.getEventDescription(e)),!0):function(e,t){if(!t||!t.length)return!1;var n=d(e);return!!n&&t.some((function(e){return i.isMatchingPattern(n,e)}))}(e,t.denyUrls)?(o.IS_DEBUG_BUILD&&i.logger.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+i.getEventDescription(e)+".\nUrl: "+d(e)),!0):!function(e,t){if(!t||!t.length)return!0;var n=d(e);return!n||t.some((function(e){return i.isMatchingPattern(n,e)}))}(e,t.allowUrls)&&(o.IS_DEBUG_BUILD&&i.logger.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+i.getEventDescription(e)+".\nUrl: "+d(e)),!0)}function l(e){void 0===e&&(e=[]);for(var t=e.length-1;t>=0;t--){var n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}function d(e){try{if(e.stacktrace)return l(e.stacktrace.frames);var t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?l(t):null}catch(t){return o.IS_DEBUG_BUILD&&i.logger.error("Cannot extract url for event "+i.getEventDescription(e)),null}}t.InboundFilters=s,t._mergeOptions=c,t._shouldDropEvent=u},30:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(8809);t.FunctionToString=r.FunctionToString;var i=n(8892);t.InboundFilters=i.InboundFilters},8329:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(2522),o=n(1580);function a(e){if(e.metadata&&e.metadata.sdk){var t=e.metadata.sdk;return{name:t.name,version:t.version}}}function s(e,t){return t?(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=r.__spread(e.sdk.integrations||[],t.integrations||[]),e.sdk.packages=r.__spread(e.sdk.packages||[],t.packages||[]),e):e}function c(e,t){var n=a(t),o=r.__assign(r.__assign({sent_at:(new Date).toISOString()},n&&{sdk:n}),!!t.tunnel&&{dsn:i.dsnToString(t.dsn)}),s="aggregates"in e?"sessions":"session",c=[{type:s},e];return[i.createEnvelope(o,[c]),s]}t.createSessionEnvelope=c,t.sessionToSentryRequest=function(e,t){var n=r.__read(c(e,t),2),a=n[0],s=n[1];return{body:i.serializeEnvelope(a),type:s,url:o.getEnvelopeEndpointWithUrlEncodedAuth(t.dsn,t.tunnel)}},t.createEventEnvelope=function(e,t){var n=a(t),o=e.type||"event",c=(e.sdkProcessingMetadata||{}).transactionSampling||{},u=c.method,l=c.rate;s(e,t.metadata.sdk),e.tags=e.tags||{},e.extra=e.extra||{},e.sdkProcessingMetadata&&e.sdkProcessingMetadata.baseClientNormalized||(e.tags.skippedNormalization=!0,e.extra.normalizeDepth=e.sdkProcessingMetadata?e.sdkProcessingMetadata.normalizeDepth:"unset"),delete e.sdkProcessingMetadata;var d=r.__assign(r.__assign({event_id:e.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}),!!t.tunnel&&{dsn:i.dsnToString(t.dsn)}),f=[{type:o,sample_rates:[{id:u,rate:l}]},e];return i.createEnvelope(d,[f])},t.eventToSentryRequest=function(e,t){var n,c=a(t),u=e.type||"event",l="transaction"===u||!!t.tunnel,d=(e.sdkProcessingMetadata||{}).transactionSampling||{},f=d.method,p=d.rate;s(e,t.metadata.sdk),e.tags=e.tags||{},e.extra=e.extra||{},e.sdkProcessingMetadata&&e.sdkProcessingMetadata.baseClientNormalized||(e.tags.skippedNormalization=!0,e.extra.normalizeDepth=e.sdkProcessingMetadata?e.sdkProcessingMetadata.normalizeDepth:"unset"),delete e.sdkProcessingMetadata;try{n=JSON.stringify(e)}catch(t){e.tags.JSONStringifyError=!0,e.extra.JSONStringifyError=t;try{n=JSON.stringify(i.normalize(e))}catch(e){var h=e;n=JSON.stringify({message:"JSON.stringify error after renormalization",extra:{message:h.message,stack:h.stack}})}}var v={body:n,type:u,url:l?o.getEnvelopeEndpointWithUrlEncodedAuth(t.dsn,t.tunnel):o.getStoreEndpointWithUrlEncodedAuth(t.dsn)};if(l){var m=r.__assign(r.__assign({event_id:e.event_id,sent_at:(new Date).toISOString()},c&&{sdk:c}),!!t.tunnel&&{dsn:i.dsnToString(t.dsn)}),g=[{type:u,sample_rates:[{id:f,rate:p}]},v.body],y=i.createEnvelope(m,[g]);v.body=i.serializeEnvelope(y)}return v}},4268:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(3793),i=n(2522),o=n(3379);t.initAndBind=function(e,t){!0===t.debug&&(o.IS_DEBUG_BUILD?i.logger.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));var n=r.getCurrentHub(),a=n.getScope();a&&a.update(t.initialScope);var s=new e(t);n.bindClient(s)}},1239:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(2522);function i(e,t){return"Too many "+t+" requests, backing off until: "+new Date(r.disabledUntil(e,t)).toISOString()}t.ERROR_TRANSPORT_CATEGORY="error",t.TRANSACTION_TRANSPORT_CATEGORY="transaction",t.ATTACHMENT_TRANSPORT_CATEGORY="attachment",t.SESSION_TRANSPORT_CATEGORY="session",t.DEFAULT_TRANSPORT_BUFFER_SIZE=30,t.createTransport=function(e,n,o){void 0===o&&(o=r.makePromiseBuffer(e.bufferSize||t.DEFAULT_TRANSPORT_BUFFER_SIZE));var a={};return{send:function(e){var t=r.getEnvelopeType(e),s="event"===t?"error":t,c={category:s,body:r.serializeEnvelope(e)};return r.isRateLimited(a,s)?r.rejectedSyncPromise({status:"rate_limit",reason:i(a,s)}):o.add((function(){return n(c).then((function(e){var t=e.body,n=e.headers,o=e.reason,c=e.statusCode,u=r.eventStatusFromHttpCode(c);return n&&(a=r.updateRateLimits(a,n)),"success"===u?r.resolvedSyncPromise({status:u,reason:o}):r.rejectedSyncPromise({status:u,reason:o||t||("rate_limit"===u?i(a,s):"Unknown transport error")})}))}))},flush:function(e){return o.drain(e)}}}},9950:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(2522),i=function(){function e(){}return e.prototype.sendEvent=function(e){return r.resolvedSyncPromise({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:"skipped"})},e.prototype.close=function(e){return r.resolvedSyncPromise(!0)},e}();t.NoopTransport=i},3275:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SDK_VERSION="6.19.7"},3609:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IS_DEBUG_BUILD="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},9076:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(2522),o=n(3609),a=n(9974),s=n(388);t.API_VERSION=4;var c=function(){function e(e,n,r){void 0===n&&(n=new a.Scope),void 0===r&&(r=t.API_VERSION),this._version=r,this._stack=[{}],this.getStackTop().scope=n,e&&this.bindClient(e)}return e.prototype.isOlderThan=function(e){return this._version<e},e.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=a.Scope.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},e.prototype.popScope=function(){return!(this.getStack().length<=1||!this.getStack().pop())},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(e,t){var n=this._lastEventId=t&&t.event_id?t.event_id:i.uuid4(),o=t;if(!t){var a=void 0;try{throw new Error("Sentry syntheticException")}catch(e){a=e}o={originalException:e,syntheticException:a}}return this._invokeClient("captureException",e,r.__assign(r.__assign({},o),{event_id:n})),n},e.prototype.captureMessage=function(e,t,n){var o=this._lastEventId=n&&n.event_id?n.event_id:i.uuid4(),a=n;if(!n){var s=void 0;try{throw new Error(e)}catch(e){s=e}a={originalException:e,syntheticException:s}}return this._invokeClient("captureMessage",e,t,r.__assign(r.__assign({},a),{event_id:o})),o},e.prototype.captureEvent=function(e,t){var n=t&&t.event_id?t.event_id:i.uuid4();return"transaction"!==e.type&&(this._lastEventId=n),this._invokeClient("captureEvent",e,r.__assign(r.__assign({},t),{event_id:n})),n},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),o=n.scope,a=n.client;if(o&&a){var s=a.getOptions&&a.getOptions()||{},c=s.beforeBreadcrumb,u=void 0===c?null:c,l=s.maxBreadcrumbs,d=void 0===l?100:l;if(!(d<=0)){var f=i.dateTimestampInSeconds(),p=r.__assign({timestamp:f},e),h=u?i.consoleSandbox((function(){return u(p,t)})):p;null!==h&&o.addBreadcrumb(h,d)}}},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},e.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},e.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},e.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},e.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,r=t.client;n&&r&&e(n)},e.prototype.run=function(e){var t=l(this);try{e(this)}finally{l(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return o.IS_DEBUG_BUILD&&i.logger.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},e.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},e.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype.captureSession=function(e){if(void 0===e&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},e.prototype.endSession=function(){var e=this.getStackTop(),t=e&&e.scope,n=t&&t.getSession();n&&n.close(),this._sendSessionUpdate(),t&&t.setSession()},e.prototype.startSession=function(e){var t=this.getStackTop(),n=t.scope,o=t.client,a=o&&o.getOptions()||{},c=a.release,u=a.environment,l=(i.getGlobalObject().navigator||{}).userAgent,d=new s.Session(r.__assign(r.__assign(r.__assign({release:c,environment:u},n&&{user:n.getUser()}),l&&{userAgent:l}),e));if(n){var f=n.getSession&&n.getSession();f&&"ok"===f.status&&f.update({status:"exited"}),this.endSession(),n.setSession(d)}return d},e.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var r=t.getSession&&t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}},e.prototype._invokeClient=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=this.getStackTop(),a=o.scope,s=o.client;s&&s[e]&&(t=s)[e].apply(t,r.__spread(n,[a]))},e.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=u(),a=r.__SENTRY__;if(a&&a.extensions&&"function"==typeof a.extensions[e])return a.extensions[e].apply(this,t);o.IS_DEBUG_BUILD&&i.logger.warn("Extension method "+e+" couldn't be found, doing nothing.")},e}();function u(){var e=i.getGlobalObject();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function l(e){var t=u(),n=f(t);return p(t,e),n}function d(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function f(e){return i.getGlobalSingleton("hub",(function(){return new c}),e)}function p(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}t.Hub=c,t.getMainCarrier=u,t.makeMain=l,t.getCurrentHub=function(){var e=u();return d(e)&&!f(e).isOlderThan(t.API_VERSION)||p(e,new c),i.isNodeEnv()?function(e){try{var n=u().__SENTRY__,r=n&&n.extensions&&n.extensions.domain&&n.extensions.domain.active;if(!r)return f(e);if(!d(r)||f(r).isOlderThan(t.API_VERSION)){var i=f(e).getStackTop();p(r,new c(i.client,a.Scope.clone(i.scope)))}return f(r)}catch(t){return f(e)}}(e):f(e)},t.getActiveDomain=function(){o.IS_DEBUG_BUILD&&i.logger.warn("Function `getActiveDomain` is deprecated and will be removed in a future version.");var e=u().__SENTRY__;return e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active},t.getHubFromCarrier=f,t.setHubOnCarrier=p},3793:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(9974);t.addGlobalEventProcessor=r.addGlobalEventProcessor,t.Scope=r.Scope;var i=n(388);t.Session=i.Session;var o=n(9504);t.SessionFlusher=o.SessionFlusher;var a=n(9076);t.getActiveDomain=a.getActiveDomain,t.getCurrentHub=a.getCurrentHub,t.getHubFromCarrier=a.getHubFromCarrier,t.getMainCarrier=a.getMainCarrier,t.Hub=a.Hub,t.makeMain=a.makeMain,t.setHubOnCarrier=a.setHubOnCarrier},9974:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(2522),o=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}return e.clone=function(t){var n=new e;return t&&(n._breadcrumbs=r.__spread(t._breadcrumbs),n._tags=r.__assign({},t._tags),n._extra=r.__assign({},t._extra),n._contexts=r.__assign({},t._contexts),n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=r.__spread(t._eventProcessors),n._requestSession=t._requestSession),n},e.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},e.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},e.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.getRequestSession=function(){return this._requestSession},e.prototype.setRequestSession=function(e){return this._requestSession=e,this},e.prototype.setTags=function(e){return this._tags=r.__assign(r.__assign({},this._tags),e),this._notifyScopeListeners(),this},e.prototype.setTag=function(e,t){var n;return this._tags=r.__assign(r.__assign({},this._tags),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(e){return this._extra=r.__assign(r.__assign({},this._extra),e),this._notifyScopeListeners(),this},e.prototype.setExtra=function(e,t){var n;return this._extra=r.__assign(r.__assign({},this._extra),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},e.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(e){return this.setTransactionName(e)},e.prototype.setContext=function(e,t){var n;return null===t?delete this._contexts[e]:this._contexts=r.__assign(r.__assign({},this._contexts),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var e=this.getSpan();return e&&e.transaction},e.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if("function"==typeof t){var n=t(this);return n instanceof e?n:this}return t instanceof e?(this._tags=r.__assign(r.__assign({},this._tags),t._tags),this._extra=r.__assign(r.__assign({},this._extra),t._extra),this._contexts=r.__assign(r.__assign({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):i.isPlainObject(t)&&(this._tags=r.__assign(r.__assign({},this._tags),t.tags),this._extra=r.__assign(r.__assign({},this._extra),t.extra),this._contexts=r.__assign(r.__assign({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(e,t){var n="number"==typeof t?Math.min(t,100):100;if(n<=0)return this;var o=r.__assign({timestamp:i.dateTimestampInSeconds()},e);return this._breadcrumbs=r.__spread(this._breadcrumbs,[o]).slice(-n),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(e,t){if(this._extra&&Object.keys(this._extra).length&&(e.extra=r.__assign(r.__assign({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=r.__assign(r.__assign({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=r.__assign(r.__assign({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=r.__assign(r.__assign({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=r.__assign({trace:this._span.getTraceContext()},e.contexts);var n=this._span.transaction&&this._span.transaction.name;n&&(e.tags=r.__assign({transaction:n},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=r.__spread(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata=this._sdkProcessingMetadata,this._notifyEventProcessors(r.__spread(a(),this._eventProcessors),e,t)},e.prototype.setSDKProcessingMetadata=function(e){return this._sdkProcessingMetadata=r.__assign(r.__assign({},this._sdkProcessingMetadata),e),this},e.prototype._notifyEventProcessors=function(e,t,n,o){var a=this;return void 0===o&&(o=0),new i.SyncPromise((function(s,c){var u=e[o];if(null===t||"function"!=typeof u)s(t);else{var l=u(r.__assign({},t),n);i.isThenable(l)?l.then((function(t){return a._notifyEventProcessors(e,t,n,o+1).then(s)})).then(null,c):a._notifyEventProcessors(e,l,n,o+1).then(s).then(null,c)}}))},e.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)},e.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e}();function a(){return i.getGlobalSingleton("globalEventProcessors",(function(){return[]}))}t.Scope=o,t.addGlobalEventProcessor=function(e){a().push(e)}},388:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(2522),i=function(){function e(e){this.errors=0,this.sid=r.uuid4(),this.duration=0,this.status="ok",this.init=!0,this.ignoreDuration=!1;var t=r.timestampInSeconds();this.timestamp=t,this.started=t,e&&this.update(e)}return e.prototype.update=function(e){if(void 0===e&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),this.did||e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||r.timestampInSeconds(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=32===e.sid.length?e.sid:r.uuid4()),void 0!==e.init&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof e.duration)this.duration=e.duration;else{var t=this.timestamp-this.started;this.duration=t>=0?t:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},e.prototype.close=function(e){e?this.update({status:e}):"ok"===this.status?this.update({status:"exited"}):this.update()},e.prototype.toJSON=function(){return r.dropUndefinedKeys({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:{release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent}})},e}();t.Session=i},9504:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(2522),i=n(3609),o=n(9076),a=function(){function e(e,t){var n=this;this.flushTimeout=60,this._pendingAggregates={},this._isEnabled=!0,this._transport=e,this._intervalId=setInterval((function(){return n.flush()}),1e3*this.flushTimeout),this._sessionAttrs=t}return e.prototype.sendSessionAggregates=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,(function(e){i.IS_DEBUG_BUILD&&r.logger.error("Error while sending session:",e)})):i.IS_DEBUG_BUILD&&r.logger.warn("Dropping session because custom transport doesn't implement sendSession")},e.prototype.flush=function(){var e=this.getSessionAggregates();0!==e.aggregates.length&&(this._pendingAggregates={},this.sendSessionAggregates(e))},e.prototype.getSessionAggregates=function(){var e=this,t=Object.keys(this._pendingAggregates).map((function(t){return e._pendingAggregates[parseInt(t)]})),n={attrs:this._sessionAttrs,aggregates:t};return r.dropUndefinedKeys(n)},e.prototype.close=function(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()},e.prototype.incrementSessionStatusCount=function(){if(this._isEnabled){var e=o.getCurrentHub().getScope(),t=e&&e.getRequestSession();t&&t.status&&(this._incrementSessionStatusCount(t.status,new Date),e&&e.setRequestSession(void 0))}},e.prototype._incrementSessionStatusCount=function(e,t){var n=new Date(t).setSeconds(0,0);this._pendingAggregates[n]=this._pendingAggregates[n]||{};var r=this._pendingAggregates[n];switch(r.started||(r.started=new Date(n).toISOString()),e){case"errored":return r.errored=(r.errored||0)+1,r.errored;case"ok":return r.exited=(r.exited||0)+1,r.exited;default:return r.crashed=(r.crashed||0)+1,r.crashed}},e}();t.SessionFlusher=a},5723:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(3793);function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=i.getCurrentHub();if(o&&o[e])return o[e].apply(o,r.__spread(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}t.captureException=function(e,t){return o("captureException",e,{captureContext:t,originalException:e,syntheticException:new Error("Sentry syntheticException")})},t.captureMessage=function(e,t){var n=new Error(e),i="string"!=typeof t?{captureContext:t}:void 0;return o("captureMessage",e,"string"==typeof t?t:void 0,r.__assign({originalException:e,syntheticException:n},i))},t.captureEvent=function(e){return o("captureEvent",e)},t.configureScope=function(e){o("configureScope",e)},t.addBreadcrumb=function(e){o("addBreadcrumb",e)},t.setContext=function(e,t){o("setContext",e,t)},t.setExtras=function(e){o("setExtras",e)},t.setTags=function(e){o("setTags",e)},t.setExtra=function(e,t){o("setExtra",e,t)},t.setTag=function(e,t){o("setTag",e,t)},t.setUser=function(e){o("setUser",e)},t.withScope=function(e){o("withScope",e)},t._callOnClient=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];o.apply(void 0,r.__spread(["_invokeClient",e],t))},t.startTransaction=function(e,t){return o("startTransaction",r.__assign({},e),t)}},6847:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(9007);t.Severity=r.Severity;var i=n(9007);t.SeverityLevels=i.SeverityLevels},9007:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.Severity||(t.Severity={})).Fatal="fatal",n.Error="error",n.Warning="warning",n.Log="log",n.Info="info",n.Debug="debug",n.Critical="critical",t.SeverityLevels=["fatal","error","warning","log","info","debug","critical"]},5115:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forget=function(e){e.then(null,(function(e){console.error(e)}))}},5866:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(9777),i=n(694);function o(e,t){var n,r,o,a,s,c=e,u=[];if(!c||!c.tagName)return"";u.push(c.tagName.toLowerCase());var l=t&&t.length?t.filter((function(e){return c.getAttribute(e)})).map((function(e){return[e,c.getAttribute(e)]})):null;if(l&&l.length)l.forEach((function(e){u.push("["+e[0]+'="'+e[1]+'"]')}));else if(c.id&&u.push("#"+c.id),(n=c.className)&&i.isString(n))for(r=n.split(/\s+/),s=0;s<r.length;s++)u.push("."+r[s]);var d=["type","name","title","alt"];for(s=0;s<d.length;s++)o=d[s],(a=c.getAttribute(o))&&u.push("["+o+'="'+a+'"]');return u.join("")}t.htmlTreeAsString=function(e,t){try{for(var n=e,r=[],i=0,a=0,s=" > ".length,c=void 0;n&&i++<5&&!("html"===(c=o(n,t))||i>1&&a+r.length*s+c.length>=80);)r.push(c),a+=c.length,n=n.parentNode;return r.reverse().join(" > ")}catch(e){return"<unknown>"}},t.getLocationHref=function(){var e=r.getGlobalObject();try{return e.document.location.href}catch(e){return""}}},538:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(310),i=n(5695);t.createClientReportEnvelope=function(e,t,n){var o=[{type:"client_report"},{timestamp:n||i.dateTimestampInSeconds(),discarded_events:e}];return r.createEnvelope(t?{dsn:t}:{},[o])}},7642:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(7860),o=n(3667),a=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;function s(e){return"user"in e&&!("publicKey"in e)&&(e.publicKey=e.user),{user:e.publicKey||"",protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}t.dsnToString=function(e,t){void 0===t&&(t=!1);var n=e.host,r=e.path,i=e.pass,o=e.port,a=e.projectId;return e.protocol+"://"+e.publicKey+(t&&i?":"+i:"")+"@"+n+(o?":"+o:"")+"/"+(r?r+"/":r)+a},t.makeDsn=function(e){var t="string"==typeof e?function(e){var t=a.exec(e);if(!t)throw new i.SentryError("Invalid Sentry Dsn: "+e);var n=r.__read(t.slice(1),6),o=n[0],c=n[1],u=n[2],l=void 0===u?"":u,d=n[3],f=n[4],p=void 0===f?"":f,h="",v=n[5],m=v.split("/");if(m.length>1&&(h=m.slice(0,-1).join("/"),v=m.pop()),v){var g=v.match(/^\d+/);g&&(v=g[0])}return s({host:d,pass:l,path:h,projectId:v,port:p,protocol:o,publicKey:c})}(e):s(e);return function(e){if(o.IS_DEBUG_BUILD){var t=e.port,n=e.projectId,r=e.protocol;if(["protocol","publicKey","host","projectId"].forEach((function(t){if(!e[t])throw new i.SentryError("Invalid Sentry Dsn: "+t+" missing")})),!n.match(/^\d+$/))throw new i.SentryError("Invalid Sentry Dsn: Invalid projectId "+n);if(!function(e){return"http"===e||"https"===e}(r))throw new i.SentryError("Invalid Sentry Dsn: Invalid protocol "+r);if(t&&isNaN(parseInt(t,10)))throw new i.SentryError("Invalid Sentry Dsn: Invalid port "+t)}}(t),t}},5942:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SeverityLevels=["fatal","error","warning","log","info","debug","critical"]},8621:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserBundle=function(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}},310:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(694);t.createEnvelope=function(e,t){return void 0===t&&(t=[]),[e,t]},t.addItemToEnvelope=function(e,t){var n=r.__read(e,2),i=n[0],o=n[1];return[i,r.__spread(o,[t])]},t.getEnvelopeType=function(e){var t=r.__read(e,2),n=r.__read(t[1],1);return r.__read(n[0],1)[0].type},t.serializeEnvelope=function(e){var t=r.__read(e,2),n=t[0],o=t[1],a=JSON.stringify(n);return o.reduce((function(e,t){var n=r.__read(t,2),o=n[0],a=n[1],s=i.isPrimitive(a)?String(a):JSON.stringify(a);return e+"\n"+JSON.stringify(o)+"\n"+s}),a)}},7860:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(9920),o=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return r.message=t,r.name=n.prototype.constructor.name,i.setPrototypeOf(r,n.prototype),r}return r.__extends(t,e),t}(Error);t.SentryError=o},3667:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IS_DEBUG_BUILD="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__},9777:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(657),i={};function o(){return r.isNodeEnv()?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:i}t.getGlobalObject=o,t.getGlobalSingleton=function(e,t,n){var r=n||o(),i=r.__SENTRY__=r.__SENTRY__||{};return i[e]||(i[e]=t())}},2522:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655);r.__exportStar(n(5115),t),r.__exportStar(n(5866),t),r.__exportStar(n(7642),t),r.__exportStar(n(5942),t),r.__exportStar(n(7860),t),r.__exportStar(n(9777),t),r.__exportStar(n(6504),t),r.__exportStar(n(694),t),r.__exportStar(n(3581),t),r.__exportStar(n(3527),t),r.__exportStar(n(2767),t),r.__exportStar(n(657),t),r.__exportStar(n(7601),t),r.__exportStar(n(3505),t),r.__exportStar(n(7953),t),r.__exportStar(n(9315),t),r.__exportStar(n(2975),t),r.__exportStar(n(6995),t),r.__exportStar(n(4984),t),r.__exportStar(n(949),t),r.__exportStar(n(5825),t),r.__exportStar(n(9405),t),r.__exportStar(n(5695),t),r.__exportStar(n(3807),t),r.__exportStar(n(8621),t),r.__exportStar(n(310),t),r.__exportStar(n(538),t),r.__exportStar(n(4475),t)},6504:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r,i,o,a=n(655),s=n(3667),c=n(9777),u=n(694),l=n(3581),d=n(3505),f=n(6995),p=n(5825),h=c.getGlobalObject(),v={},m={};function g(e,t){var n,r;if(e&&v[e])try{for(var i=a.__values(v[e]||[]),o=i.next();!o.done;o=i.next()){var c=o.value;try{c(t)}catch(t){s.IS_DEBUG_BUILD&&l.logger.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+f.getFunctionName(c)+"\nError:",t)}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function y(e){return void 0===e&&(e=[]),"Request"in h&&u.isInstanceOf(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function _(e){return void 0===e&&(e=[]),"string"==typeof e[0]?e[0]:"Request"in h&&u.isInstanceOf(e[0],Request)?e[0].url:String(e[0])}function b(e,t){return void 0===t&&(t=!1),function(n){if(n&&o!==n&&!function(e){if("keypress"!==e.type)return!1;try{var t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(n)){var r="keypress"===n.type?"input":n.type;(void 0===i||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(o,n))&&(e({event:n,name:r,global:t}),o=n),clearTimeout(i),i=h.setTimeout((function(){i=void 0}),1e3)}}}t.addInstrumentationHandler=function(e,t){v[e]=v[e]||[],v[e].push(t),function(e){if(!m[e])switch(m[e]=!0,e){case"console":"console"in h&&l.CONSOLE_LEVELS.forEach((function(e){e in h.console&&d.fill(h.console,e,(function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];g("console",{args:n,level:e}),t&&t.apply(h.console,n)}}))}));break;case"dom":!function(){if("document"in h){var e=g.bind(null,"dom"),t=b(e,!0);h.document.addEventListener("click",t,!1),h.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((function(t){var n=h[t]&&h[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(d.fill(n,"addEventListener",(function(t){return function(n,r,i){if("click"===n||"keypress"==n)try{var o=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},a=o[n]=o[n]||{refCount:0};if(!a.handler){var s=b(e);a.handler=s,t.call(this,n,s,i)}a.refCount+=1}catch(e){}return t.call(this,n,r,i)}})),d.fill(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{var i=this.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount-=1,o.refCount<=0&&(e.call(this,t,o.handler,r),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}}();break;case"xhr":!function(){if("XMLHttpRequest"in h){var e=XMLHttpRequest.prototype;d.fill(e,"open",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this,i=t[1],o=r.__sentry_xhr__={method:u.isString(t[0])?t[0].toUpperCase():t[0],url:t[1]};u.isString(i)&&"POST"===o.method&&i.match(/sentry_key/)&&(r.__sentry_own_request__=!0);var a=function(){if(4===r.readyState){try{o.status_code=r.status}catch(e){}g("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:r})}};return"onreadystatechange"in r&&"function"==typeof r.onreadystatechange?d.fill(r,"onreadystatechange",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return a(),e.apply(r,t)}})):r.addEventListener("readystatechange",a),e.apply(r,t)}})),d.fill(e,"send",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.__sentry_xhr__&&void 0!==t[0]&&(this.__sentry_xhr__.body=t[0]),g("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}}();break;case"fetch":p.supportsNativeFetch()&&d.fill(h,"fetch",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r={args:t,fetchData:{method:y(t),url:_(t)},startTimestamp:Date.now()};return g("fetch",a.__assign({},r)),e.apply(h,t).then((function(e){return g("fetch",a.__assign(a.__assign({},r),{endTimestamp:Date.now(),response:e})),e}),(function(e){throw g("fetch",a.__assign(a.__assign({},r),{endTimestamp:Date.now(),error:e})),e}))}}));break;case"history":!function(){if(p.supportsHistory()){var e=h.onpopstate;h.onpopstate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=h.location.href,o=r;if(r=i,g("history",{from:o,to:i}),e)try{return e.apply(this,t)}catch(e){}},d.fill(h.history,"pushState",t),d.fill(h.history,"replaceState",t)}function t(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t.length>2?t[2]:void 0;if(i){var o=r,a=String(i);r=a,g("history",{from:o,to:a})}return e.apply(this,t)}}}();break;case"error":E=h.onerror,h.onerror=function(e,t,n,r,i){return g("error",{column:r,error:i,line:n,msg:e,url:t}),!!E&&E.apply(this,arguments)};break;case"unhandledrejection":S=h.onunhandledrejection,h.onunhandledrejection=function(e){return g("unhandledrejection",e),!S||S.apply(this,arguments)};break;default:s.IS_DEBUG_BUILD&&l.logger.warn("unknown instrumentation type:",e)}}(e)};var E=null,S=null},694:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=Object.prototype.toString;function r(e,t){return n.call(e)==="[object "+t+"]"}function i(e){return r(e,"Object")}function o(e,t){try{return e instanceof t}catch(e){return!1}}t.isError=function(e){switch(n.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return o(e,Error)}},t.isErrorEvent=function(e){return r(e,"ErrorEvent")},t.isDOMError=function(e){return r(e,"DOMError")},t.isDOMException=function(e){return r(e,"DOMException")},t.isString=function(e){return r(e,"String")},t.isPrimitive=function(e){return null===e||"object"!=typeof e&&"function"!=typeof e},t.isPlainObject=i,t.isEvent=function(e){return"undefined"!=typeof Event&&o(e,Event)},t.isElement=function(e){return"undefined"!=typeof Element&&o(e,Element)},t.isRegExp=function(e){return r(e,"RegExp")},t.isThenable=function(e){return Boolean(e&&e.then&&"function"==typeof e.then)},t.isSyntheticEvent=function(e){return i(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e},t.isNaN=function(e){return"number"==typeof e&&e!=e},t.isInstanceOf=o},3581:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(655),o=n(3667),a=n(9777),s=a.getGlobalObject(),c="Sentry Logger ";function u(e){var n=a.getGlobalObject();if(!("console"in n))return e();var r=n.console,i={};t.CONSOLE_LEVELS.forEach((function(e){var t=r[e]&&r[e].__sentry_original__;e in n.console&&t&&(i[e]=r[e],r[e]=t)}));try{return e()}finally{Object.keys(i).forEach((function(e){r[e]=i[e]}))}}function l(){var e=!1,n={enable:function(){e=!0},disable:function(){e=!1}};return o.IS_DEBUG_BUILD?t.CONSOLE_LEVELS.forEach((function(t){n[t]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e&&u((function(){var e;(e=s.console)[t].apply(e,i.__spread([c+"["+t+"]:"],n))}))}})):t.CONSOLE_LEVELS.forEach((function(e){n[e]=function(){}})),n}t.CONSOLE_LEVELS=["debug","info","warn","error","log","assert"],t.consoleSandbox=u,t.logger=r,o.IS_DEBUG_BUILD?t.logger=r=a.getGlobalSingleton("logger",l):t.logger=r=l()},3527:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.memoBuilder=function(){var e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(var r=0;r<t.length;r++)if(t[r]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(var r=0;r<t.length;r++)if(t[r]===n){t.splice(r,1);break}}]}},2767:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(9777),o=n(3505),a=n(949);function s(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}t.uuid4=function(){var e=i.getGlobalObject(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},t.parseUrl=function(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}},t.getEventDescription=function(e){var t=e.message,n=e.event_id;if(t)return t;var r=s(e);return r?r.type&&r.value?r.type+": "+r.value:r.type||r.value||n||"<unknown>":n||"<unknown>"},t.addExceptionTypeValue=function(e,t,n){var r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=n||"Error")},t.addExceptionMechanism=function(e,t){var n=s(e);if(n){var i=n.mechanism;if(n.mechanism=r.__assign(r.__assign(r.__assign({},{type:"generic",handled:!0}),i),t),t&&"data"in t){var o=r.__assign(r.__assign({},i&&i.data),t.data);n.mechanism.data=o}}};var c=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;t.parseSemver=function(e){var t=e.match(c)||[],n=parseInt(t[1],10),r=parseInt(t[2],10),i=parseInt(t[3],10);return{buildmetadata:t[5],major:isNaN(n)?void 0:n,minor:isNaN(r)?void 0:r,patch:isNaN(i)?void 0:i,prerelease:t[4]}},t.addContextToFrame=function(e,t,n){void 0===n&&(n=5);var r=t.lineno||0,i=e.length,o=Math.max(Math.min(i,r-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map((function(e){return a.snipLine(e,0)})),t.context_line=a.snipLine(e[Math.min(i-1,o)],t.colno||0),t.post_context=e.slice(Math.min(o+1,i),o+1+n).map((function(e){return a.snipLine(e,0)}))},t.stripUrlQueryAndFragment=function(e){return e.split(/[\?#]/,1)[0]},t.checkOrSetAlreadyCaught=function(e){if(e&&e.__sentry_captured__)return!0;try{o.addNonEnumerableProperty(e,"__sentry_captured__",!0)}catch(e){}return!1}},657:(e,t,n)=>{e=n.nmd(e),Object.defineProperty(t,"__esModule",{value:!0});var r=n(8621);function i(e,t){return e.require(t)}t.isNodeEnv=function(){return!r.isBrowserBundle()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)},t.dynamicRequire=i,t.loadModule=function(t){var n;try{n=i(e,t)}catch(e){}try{var r=i(e,"process").cwd;n=i(e,r()+"/node_modules/"+t)}catch(e){}return n}},7601:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(694),o=n(3527),a=n(3505),s=n(6995);function c(e,t,n){void 0===t&&(t=1/0),void 0===n&&(n=1/0);try{return u("",e,t,n)}catch(e){return{ERROR:"**non-serializable** ("+e+")"}}}function u(e,t,c,l,d){void 0===c&&(c=1/0),void 0===l&&(l=1/0),void 0===d&&(d=o.memoBuilder());var f=r.__read(d,2),p=f[0],h=f[1],v=t;if(v&&"function"==typeof v.toJSON)try{return v.toJSON()}catch(e){}if(null===t||["number","boolean","string"].includes(typeof t)&&!i.isNaN(t))return t;var m=function(e,t){try{return"domain"===e&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":void 0!==n.g&&t===n.g?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":i.isSyntheticEvent(t)?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+s.getFunctionName(t)+"]":"symbol"==typeof t?"["+String(t)+"]":"bigint"==typeof t?"[BigInt: "+String(t)+"]":"[object "+Object.getPrototypeOf(t).constructor.name+"]"}catch(e){return"**non-serializable** ("+e+")"}}(e,t);if(!m.startsWith("[object "))return m;if(0===c)return m.replace("object ","");if(p(t))return"[Circular ~]";var g=Array.isArray(t)?[]:{},y=0,_=i.isError(t)||i.isEvent(t)?a.convertToPlainObject(t):t;for(var b in _)if(Object.prototype.hasOwnProperty.call(_,b)){if(y>=l){g[b]="[MaxProperties ~]";break}var E=_[b];g[b]=u(b,E,c-1,l,d),y+=1}return h(t),g}t.normalize=c,t.normalizeToSize=function e(t,n,r){void 0===n&&(n=3),void 0===r&&(r=102400);var i,o=c(t,n);return i=o,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>r?e(t,n-1,r):o},t.walk=u},3505:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655),i=n(5866),o=n(694),a=n(949);function s(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function c(e,t){var n=t.prototype||{};e.prototype=t.prototype=n,s(e,"__sentry_original__",t)}function u(e){var t=e;if(o.isError(e))t=r.__assign({message:e.message,name:e.name,stack:e.stack},d(e));else if(o.isEvent(e)){var n=e;t=r.__assign({type:n.type,target:l(n.target),currentTarget:l(n.currentTarget)},d(n)),"undefined"!=typeof CustomEvent&&o.isInstanceOf(e,CustomEvent)&&(t.detail=n.detail)}return t}function l(e){try{return o.isElement(e)?i.htmlTreeAsString(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function d(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}t.fill=function(e,t,n){if(t in e){var r=e[t],i=n(r);if("function"==typeof i)try{c(i,r)}catch(e){}e[t]=i}},t.addNonEnumerableProperty=s,t.markFunctionWrapped=c,t.getOriginalFunction=function(e){return e.__sentry_original__},t.urlEncode=function(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")},t.convertToPlainObject=u,t.extractExceptionKeysForMessage=function(e,t){void 0===t&&(t=40);var n=Object.keys(u(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return a.truncate(n[0],t);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:a.truncate(i,t)}return""},t.dropUndefinedKeys=function e(t){var n,i;if(o.isPlainObject(t)){var a={};try{for(var s=r.__values(Object.keys(t)),c=s.next();!c.done;c=s.next()){var u=c.value;void 0!==t[u]&&(a[u]=e(t[u]))}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a}return Array.isArray(t)?t.map(e):t},t.objectify=function(e){var t;switch(!0){case null==e:t=new String(e);break;case"symbol"==typeof e||"bigint"==typeof e:t=Object(e);break;case o.isPrimitive(e):t=new e.constructor(e);break;default:t=e}return t}},7953:(e,t)=>{function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}Object.defineProperty(t,"__esModule",{value:!0});var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/;function i(e){var t=r.exec(e);return t?t.slice(1):[]}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r="",i=!1,o=e.length-1;o>=-1&&!i;o--){var a=o>=0?e[o]:"/";a&&(r=a+"/"+r,i="/"===a.charAt(0))}return(i?"/":"")+(r=n(r.split("/").filter((function(e){return!!e})),!i).join("/"))||"."}function a(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function s(e){var t=c(e),r="/"===e.substr(-1),i=n(e.split("/").filter((function(e){return!!e})),!t).join("/");return i||t||(i="."),i&&r&&(i+="/"),(t?"/":"")+i}function c(e){return"/"===e.charAt(0)}t.resolve=o,t.relative=function(e,t){e=o(e).substr(1),t=o(t).substr(1);for(var n=a(e.split("/")),r=a(t.split("/")),i=Math.min(n.length,r.length),s=i,c=0;c<i;c++)if(n[c]!==r[c]){s=c;break}var u=[];for(c=s;c<n.length;c++)u.push("..");return(u=u.concat(r.slice(s))).join("/")},t.normalizePath=s,t.isAbsolute=c,t.join=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return s(e.join("/"))},t.dirname=function(e){var t=i(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=i(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n}},9920:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setPrototypeOf=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n]);return e})},9315:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(7860),i=n(9405);t.makePromiseBuffer=function(e){var t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(o){if(!(void 0===e||t.length<e))return i.rejectedSyncPromise(new r.SentryError("Not adding Promise due to buffer limit reached."));var a=o();return-1===t.indexOf(a)&&t.push(a),a.then((function(){return n(a)})).then(null,(function(){return n(a).then(null,(function(){}))})),a},drain:function(e){return new i.SyncPromise((function(n,r){var o=t.length;if(!o)return n(!0);var a=setTimeout((function(){e&&e>0&&n(!1)}),e);t.forEach((function(e){i.resolvedSyncPromise(e).then((function(){--o||(clearTimeout(a),n(!0))}),r)}))}))}}}},4475:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655);function i(e,n){void 0===n&&(n=Date.now());var r=parseInt(""+e,10);if(!isNaN(r))return 1e3*r;var i=Date.parse(""+e);return isNaN(i)?t.DEFAULT_RETRY_AFTER:i-n}function o(e,t){return e[t]||e.all||0}t.DEFAULT_RETRY_AFTER=6e4,t.parseRetryAfterHeader=i,t.disabledUntil=o,t.isRateLimited=function(e,t,n){return void 0===n&&(n=Date.now()),o(e,t)>n},t.updateRateLimits=function(e,t,n){var o,a,s,c;void 0===n&&(n=Date.now());var u=r.__assign({},e),l=t["x-sentry-rate-limits"],d=t["retry-after"];if(l)try{for(var f=r.__values(l.trim().split(",")),p=f.next();!p.done;p=f.next()){var h=p.value.split(":",2),v=parseInt(h[0],10),m=1e3*(isNaN(v)?60:v);if(h[1])try{for(var g=(s=void 0,r.__values(h[1].split(";"))),y=g.next();!y.done;y=g.next())u[y.value]=n+m}catch(e){s={error:e}}finally{try{y&&!y.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}else u.all=n+m}}catch(e){o={error:e}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}else d&&(u.all=n+i(d,n));return u}},2975:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(6847),i=n(5942);t.severityFromString=function(e){return"warn"===e?r.Severity.Warning:function(e){return-1!==i.SeverityLevels.indexOf(e)}(e)?e:r.Severity.Log}},6995:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(655);function i(e){if(!e.length)return[];var t=e,n=t[0].function||"",i=t[t.length-1].function||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1)),-1!==i.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,50).map((function(e){return r.__assign(r.__assign({},e),{filename:e.filename||t[0].filename,function:e.function||"?"})})).reverse()}t.createStackParser=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}));return function(e,t){var o,a,s,c;void 0===t&&(t=0);var u=[];try{for(var l=r.__values(e.split("\n").slice(t)),d=l.next();!d.done;d=l.next()){var f=d.value;try{for(var p=(s=void 0,r.__values(n)),h=p.next();!h.done;h=p.next()){var v=(0,h.value)(f);if(v){u.push(v);break}}}catch(e){s={error:e}}finally{try{h&&!h.done&&(c=p.return)&&c.call(p)}finally{if(s)throw s.error}}}}catch(e){o={error:e}}finally{try{d&&!d.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return i(u)}},t.stripSentryFramesAndReverse=i;var o="<anonymous>";t.getFunctionName=function(e){try{return e&&"function"==typeof e&&e.name||o}catch(e){return o}}},4984:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.eventStatusFromHttpCode=function(e){return e>=200&&e<300?"success":429===e?"rate_limit":e>=400&&e<500?"invalid":e>=500?"failed":"unknown"}},949:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(694);t.truncate=function(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t||e.length<=t?e:e.substr(0,t)+"..."},t.snipLine=function(e,t){var n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);var i=Math.max(t-60,0);i<5&&(i=0);var o=Math.min(i+140,r);return o>r-5&&(o=r),o===r&&(i=Math.max(o-140,0)),n=n.slice(i,o),i>0&&(n="'{snip} "+n),o<r&&(n+=" {snip}"),n},t.safeJoin=function(e,t){if(!Array.isArray(e))return"";for(var n=[],r=0;r<e.length;r++){var i=e[r];try{n.push(String(i))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)},t.isMatchingPattern=function(e,t){return!!r.isString(e)&&(r.isRegExp(t)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t))},t.escapeStringForRegex=function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},5825:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(3667),i=n(9777),o=n(3581);function a(){if(!("fetch"in i.getGlobalObject()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function s(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}t.supportsErrorEvent=function(){try{return new ErrorEvent(""),!0}catch(e){return!1}},t.supportsDOMError=function(){try{return new DOMError(""),!0}catch(e){return!1}},t.supportsDOMException=function(){try{return new DOMException(""),!0}catch(e){return!1}},t.supportsFetch=a,t.isNativeFetch=s,t.supportsNativeFetch=function(){if(!a())return!1;var e=i.getGlobalObject();if(s(e.fetch))return!0;var t=!1,n=e.document;if(n&&"function"==typeof n.createElement)try{var c=n.createElement("iframe");c.hidden=!0,n.head.appendChild(c),c.contentWindow&&c.contentWindow.fetch&&(t=s(c.contentWindow.fetch)),n.head.removeChild(c)}catch(e){r.IS_DEBUG_BUILD&&o.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t},t.supportsReportingObserver=function(){return"ReportingObserver"in i.getGlobalObject()},t.supportsReferrerPolicy=function(){if(!a())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}},t.supportsHistory=function(){var e=i.getGlobalObject(),t=e.chrome,n=t&&t.app&&t.app.runtime,r="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!n&&r}},9405:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(694);t.resolvedSyncPromise=function(e){return new i((function(t){t(e)}))},t.rejectedSyncPromise=function(e){return new i((function(t,n){n(e)}))};var i=function(){function e(e){var t=this;this._state=0,this._handlers=[],this._resolve=function(e){t._setResult(1,e)},this._reject=function(e){t._setResult(2,e)},this._setResult=function(e,n){0===t._state&&(r.isThenable(n)?n.then(t._resolve,t._reject):(t._state=e,t._value=n,t._executeHandlers()))},this._executeHandlers=function(){if(0!==t._state){var e=t._handlers.slice();t._handlers=[],e.forEach((function(e){e[0]||(1===t._state&&e[1](t._value),2===t._state&&e[2](t._value),e[0]=!0)}))}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return e.prototype.then=function(t,n){var r=this;return new e((function(e,i){r._handlers.push([!1,function(n){if(t)try{e(t(n))}catch(e){i(e)}else e(n)},function(t){if(n)try{e(n(t))}catch(e){i(e)}else i(t)}]),r._executeHandlers()}))},e.prototype.catch=function(e){return this.then((function(e){return e}),e)},e.prototype.finally=function(t){var n=this;return new e((function(e,r){var i,o;return n.then((function(e){o=!1,i=e,t&&t()}),(function(e){o=!0,i=e,t&&t()})).then((function(){o?r(i):e(i)}))}))},e}();t.SyncPromise=i},5695:(e,t,n)=>{e=n.nmd(e),Object.defineProperty(t,"__esModule",{value:!0});var r=n(9777),i=n(657),o={nowSeconds:function(){return Date.now()/1e3}},a=i.isNodeEnv()?function(){try{return i.dynamicRequire(e,"perf_hooks").performance}catch(e){return}}():function(){var e=r.getGlobalObject().performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),s=void 0===a?o:{nowSeconds:function(){return(a.timeOrigin+a.now())/1e3}};t.dateTimestampInSeconds=o.nowSeconds.bind(o),t.timestampInSeconds=s.nowSeconds.bind(s),t.timestampWithMs=t.timestampInSeconds,t.usingPerformanceAPI=void 0!==a,t.browserPerformanceTimeOrigin=function(){var e=r.getGlobalObject().performance;if(e&&e.now){var n=36e5,i=e.now(),o=Date.now(),a=e.timeOrigin?Math.abs(e.timeOrigin+i-o):n,s=a<n,c=e.timing&&e.timing.navigationStart,u="number"==typeof c?Math.abs(c+i-o):n;return s||u<n?a<=u?(t._browserPerformanceTimeOriginMode="timeOrigin",e.timeOrigin):(t._browserPerformanceTimeOriginMode="navigationStart",c):(t._browserPerformanceTimeOriginMode="dateNow",o)}t._browserPerformanceTimeOriginMode="none"}()},3807:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TRACEPARENT_REGEXP=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$"),t.extractTraceparentData=function(e){var n=e.match(t.TRACEPARENT_REGEXP);if(n){var r=void 0;return"1"===n[3]?r=!0:"0"===n[3]&&(r=!1),{traceId:n[1],parentSampled:r,parentSpanId:n[2]}}}},7845:(e,t,n)=>{"use strict";t.v9=t.eO=void 0;var r=n(1923);Object.defineProperty(t,"eO",{enumerable:!0,get:function(){return r.useMachine}});n(7238),n(9669);var i=n(5433);Object.defineProperty(t,"v9",{enumerable:!0,get:function(){return i.useSelector}});n(5545),n(2156)},7238:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useActor=t.isActorWithState=void 0;var r=n(5495),i=n(15),o=n(2022),a=n(1688);function s(e){return"state"in e}function c(e){return"deferred"in e}function u(e){return"getSnapshot"in e?e.getSnapshot():s(e)?e.state:void 0}t.isActorWithState=s,t.useActor=function(e,t){void 0===t&&(t=u);var n=(0,r.useRef)(e),s=(0,r.useRef)([]),l=(0,r.useCallback)((function(t){return e.subscribe(t).unsubscribe}),[e]),d=(0,r.useCallback)((function(){return t(e)}),[e,t]),f=(0,a.useSyncExternalStore)(l,d,d),p=(0,o.default)((function(){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=n.current;c(i)&&i.deferred?s.current.push(r):i.send(r)}}));return(0,i.default)((function(){for(n.current=e;s.current.length>0;){var t=s.current.shift();e.send(t)}}),[e]),[f,p]}},2022:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5495);t.default=function(e){var t=r.useRef();return t.current||(t.current={v:e()}),t.current.v}},9669:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.useInterpret=t.useIdleInterpreter=void 0;var a=n(5495),s=n(15),c=n(4881),u=n(2022);function l(e,t){var n=(0,u.default)((function(){return"function"==typeof e?e():e})),o=t.context,a=t.guards,l=t.actions,d=t.activities,f=t.services,p=t.delays,h=(t.state,i(t,["context","guards","actions","activities","services","delays","state"])),v=(0,u.default)((function(){var e={context:o,guards:a,actions:l,activities:d,services:f,delays:p},t=n.withConfig(e,(function(){return r(r({},n.context),o)}));return(0,c.interpret)(t,h)}));return(0,s.default)((function(){Object.assign(v.machine.options.actions,l),Object.assign(v.machine.options.guards,a),Object.assign(v.machine.options.activities,d),Object.assign(v.machine.options.services,f),Object.assign(v.machine.options.delays,p)}),[l,a,d,f,p]),v}t.useIdleInterpreter=l,t.useInterpret=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=o(t,2),i=r[0],s=void 0===i?{}:i,u=r[1],d=l(e,s);return(0,a.useEffect)((function(){if(u){var e=d.subscribe((0,c.toObserver)(u));return function(){e.unsubscribe()}}}),[u]),(0,a.useEffect)((function(){var e=s.state;return d.start(e?c.State.create(e):void 0),function(){d.stop(),d.status=c.InterpreterStatus.NotStarted}}),[]),d}},1923:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.useMachine=void 0;var i=n(5495),o=n(2798),a=n(4881),s=n(9669);function c(e){return e}t.useMachine=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var u=r(t,1),l=u[0],d=void 0===l?{}:l,f=(0,s.useIdleInterpreter)(e,d),p=(0,i.useCallback)((function(){return f.status===a.InterpreterStatus.NotStarted?d.state?a.State.create(d.state):f.machine.initialState:f.state}),[f]),h=(0,i.useCallback)((function(e,t){if(f.status===a.InterpreterStatus.NotStarted)return!0;var n=void 0===t.changed&&(Object.keys(t.children).length>0||"boolean"==typeof e.changed);return!(t.changed||n)}),[f]),v=(0,i.useCallback)((function(e){return f.subscribe(e).unsubscribe}),[f]),m=(0,o.useSyncExternalStoreWithSelector)(v,p,p,c,h);return(0,i.useEffect)((function(){var e=d.state;return f.start(e?a.State.create(e):void 0),function(){f.stop(),f.status=a.InterpreterStatus.NotStarted}}),[]),[m,f.send,f]}},5433:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSelector=void 0;var r=n(5495),i=n(2798),o=n(7238),a=n(2156),s=function(e,t){return e===t};t.useSelector=function(e,t,n,c){void 0===n&&(n=s);var u=(0,r.useRef)(null),l=(0,r.useCallback)((function(t){return e.subscribe(t).unsubscribe}),[e]),d=(0,r.useCallback)((function(){return c?c(e):function(e,t){if("state"in(r=e)&&"machine"in r){if(0===e.status&&t.current)return t.current;var n=(0,a.getServiceSnapshot)(e);return t.current=0===e.status?n:null,n}var r;return(0,o.isActorWithState)(e)?e.state:void 0}(e,u)}),[e,c]);return(0,i.useSyncExternalStoreWithSelector)(l,d,d,t,n)}},5545:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSpawn=void 0;var r=n(4881),i=n(2022);t.useSpawn=function(e){return(0,i.default)((function(){return(0,r.spawnBehavior)(e)}))}},2156:function(e,t){"use strict";var n=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function i(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}Object.defineProperty(t,"__esModule",{value:!0}),t.shallowEqual=t.getServiceSnapshot=t.partition=void 0,t.partition=function(e,t){var i,o,a=n([[],[]],2),s=a[0],c=a[1];try{for(var u=r(e),l=u.next();!l.done;l=u.next()){var d=l.value;t(d)?s.push(d):c.push(d)}}catch(e){i={error:e}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return[s,c]},t.getServiceSnapshot=function(e){return 0!==e.status?e.state:e.machine.initialState},t.shallowEqual=function(e,t){if(i(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(t,n[o])||!i(e[n[o]],t[n[o]]))return!1;return!0}},1251:function(e,t){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.buildSafeEnv=t.BuildSafeEnvError=void 0;var o=function(e){function t(t,n){var r=e.call(this)||this;r.originalErrorsMap=t;var i=Object.entries(t).map((function(e){var t=e[0],r=e[1];return"    ".concat(t,": ").concat(r.message," (input value '").concat(n[t],"')")}));return r.message="Safe Env building error\n"+i.join("\n"),r}return r(t,e),t}(Error);t.BuildSafeEnvError=o,t.buildSafeEnv=function(e,t,n){var r=Object.entries(e),a={},s=r.reduce((function(e,n){var r,o=n[0],s=n[1];try{return i(i({},e),((r={})[o]=s(t,o),r))}catch(t){return a[o]=t,e}}),{});if(Object.values(a).length>0){var c=new o(a,t);if(n&&n.handleError)return n.handleError(c),s;throw c}return s}},332:(e,t,n)=>{"use strict";t._=void 0;var r=n(1251);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r.buildSafeEnv}})},9060:e=>{(()=>{"use strict";var t={535:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator,h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=_.prototype=new y;b.constructor=_,v(b,g.prototype),b.isPureReactComponent=!0;var E=Array.isArray,S=Object.prototype.hasOwnProperty,w={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function O(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)S.call(t,i)&&!x.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:w.current}}function I(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return a=a(c=e),e=""===o?"."+C(c,0):o,E(a)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),T(a,t,i,"",(function(e){return e}))):null!=a&&(I(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+e)),t.push(a)),1;if(c=0,o=""===o?".":o+":",E(e))for(var u=0;u<e.length;u++){var l=o+C(s=e[u],u);c+=T(s,t,i,l,a)}else if(l=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof l)for(e=l.call(e),u=0;!(s=e.next()).done;)c+=T(s=s.value,t,i,l=o+C(s,u++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function k(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},j={transition:null},R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:j,ReactCurrentOwner:w};t.Children={map:k,forEach:function(e,t,n){k(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return k(e,(function(){t++})),t},toArray:function(e){return k(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=a,t.PureComponent=_,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)S.call(t,u)&&!x.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){c=Array(u);for(var l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=O,t.createFactory=function(e){var t=O.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},378:(e,t,n)=>{e.exports=n(535)},844:(e,t,n)=>{function r(e){var t;return void 0===e&&(e=i()),Boolean(null===(t=null==e?void 0:e.tjlib)||void 0===t?void 0:t.core)}function i(){return"undefined"!=typeof window?window:null}Object.defineProperty(t,"__esModule",{value:!0}),t.getCore=t.setCore=t.isCoreInitialized=void 0,n(647),t.isCoreInitialized=r,t.setCore=function(e,t){if(void 0===t&&(t=i()),!t)throw new Error("unable to initialize shared core without holder");if(r(t))throw new Error("tjlib.core is already initialized");t.tjlib=t.tjlib||{},t.tjlib.core=e},t.getCore=function(e){var t;return void 0===e&&(e=i()),null===(t=null==e?void 0:e.tjlib)||void 0===t?void 0:t.core}},647:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),n(378)}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}var i={};(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.getCore=void 0;var t=r(844);Object.defineProperty(e,"getCore",{enumerable:!0,get:function(){return t.getCore}})})(),e.exports=i})()},4184:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},2703:(e,t,n)=>{"use strict";var r=n(414);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},745:(e,t,n)=>{"use strict";var r=n(6250);r.createRoot,t.a=r.hydrateRoot},1216:(e,t,n)=>{"use strict";t.Iq=t.be=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5495),o=f(i),a=f(n(6250)),s=f(n(5697)),c=n(4081),u=f(n(8315)),l=f(n(8282)),d=f(n(821));function f(e){return e&&e.__esModule?e:{default:e}}var p="data-lazyload-listened",h=[],v=[],m=!1;try{var g=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,g)}catch(e){}var y=!!m&&{capture:!1,passive:!0},_=function(e){var t=a.default.findDOMNode(e);if(t instanceof HTMLElement){var n=(0,u.default)(t),r=e.props.overflow&&n!==t.ownerDocument&&n!==document&&n!==document.documentElement?function(e,t){var n=a.default.findDOMNode(e),r=void 0,i=void 0,o=void 0,s=void 0;try{var c=t.getBoundingClientRect();r=c.top,i=c.left,o=c.height,s=c.width}catch(e){r=0,i=0,o=0,s=0}var u=window.innerHeight||document.documentElement.clientHeight,l=window.innerWidth||document.documentElement.clientWidth,d=Math.max(r,0),f=Math.max(i,0),p=Math.min(u,r+o)-d,h=Math.min(l,i+s)-f,v=void 0,m=void 0,g=void 0,y=void 0;try{var _=n.getBoundingClientRect();v=_.top,m=_.left,g=_.height,y=_.width}catch(e){v=0,m=0,g=0,y=0}var b=v-d,E=m-f,S=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return b-S[0]<=p&&b+g+S[1]>=0&&E-S[0]<=h&&E+y+S[1]>=0}(e,n):function(e){var t=a.default.findDOMNode(e);if(!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;var n=void 0,r=void 0;try{var i=t.getBoundingClientRect();n=i.top,r=i.height}catch(e){n=0,r=0}var o=window.innerHeight||document.documentElement.clientHeight,s=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return n-s[0]<=o&&n+r+s[1]>=0}(e);r?e.visible||(e.props.once&&v.push(e),e.visible=!0,e.forceUpdate()):e.props.once&&e.visible||(e.visible=!1,e.props.unmountIfInvisible&&e.forceUpdate())}},b=function(){v.forEach((function(e){var t=h.indexOf(e);-1!==t&&h.splice(t,1)})),v=[]},E=function(){for(var e=0;e<h.length;++e){var t=h[e];_(t)}b()},S=void 0,w=null,x=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.visible=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){var e=window,t=this.props.scrollContainer;t&&"string"==typeof t&&(e=e.document.querySelector(t));var n=void 0!==this.props.debounce&&"throttle"===S||"debounce"===S&&void 0===this.props.debounce;if(n&&((0,c.off)(e,"scroll",w,y),(0,c.off)(window,"resize",w,y),w=null),w||(void 0!==this.props.debounce?(w=(0,l.default)(E,"number"==typeof this.props.debounce?this.props.debounce:300),S="debounce"):void 0!==this.props.throttle?(w=(0,d.default)(E,"number"==typeof this.props.throttle?this.props.throttle:300),S="throttle"):w=E),this.props.overflow){var r=(0,u.default)(a.default.findDOMNode(this));if(r&&"function"==typeof r.getAttribute){var i=+r.getAttribute(p)+1;1===i&&r.addEventListener("scroll",w,y),r.setAttribute(p,i)}}else if(0===h.length||n){var o=this.props,s=o.scroll,f=o.resize;s&&(0,c.on)(e,"scroll",w,y),f&&(0,c.on)(window,"resize",w,y)}h.push(this),_(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var e=(0,u.default)(a.default.findDOMNode(this));if(e&&"function"==typeof e.getAttribute){var t=+e.getAttribute(p)-1;0===t?(e.removeEventListener("scroll",w,y),e.removeAttribute(p)):e.setAttribute(p,t)}}var n=h.indexOf(this);-1!==n&&h.splice(n,1),0===h.length&&"undefined"!=typeof window&&((0,c.off)(window,"resize",w,y),(0,c.off)(window,"scroll",w,y))}},{key:"render",value:function(){return this.visible?this.props.children:this.props.placeholder?this.props.placeholder:o.default.createElement("div",{style:{height:this.props.height},className:"lazyload-placeholder"})}}]),t}(i.Component);x.propTypes={once:s.default.bool,height:s.default.oneOfType([s.default.number,s.default.string]),offset:s.default.oneOfType([s.default.number,s.default.arrayOf(s.default.number)]),overflow:s.default.bool,resize:s.default.bool,scroll:s.default.bool,children:s.default.node,throttle:s.default.oneOfType([s.default.number,s.default.bool]),debounce:s.default.oneOfType([s.default.number,s.default.bool]),placeholder:s.default.node,scrollContainer:s.default.oneOfType([s.default.string,s.default.object]),unmountIfInvisible:s.default.bool},x.defaultProps={once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};t.ZP=x,t.be=E,t.Iq=function(){for(var e=0;e<h.length;++e){var t=h[e];t.visible=!0,t.forceUpdate()}b()}},8282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,c=function c(){var u=+new Date-a;u<t&&u>=0?r=setTimeout(c,t-u):(r=null,n||(s=e.apply(o,i),r||(o=null,i=null)))};return function(){o=this,i=arguments,a=+new Date;var u=n&&!r;return r||(r=setTimeout(c,t)),u&&(s=e.apply(o,i),o=null,i=null),s}}},4081:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,n,r){r=r||!1,e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,(function(t){n.call(e,t||window.event)}))},t.off=function(e,t,n,r){r=r||!1,e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n)}},8315:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t="absolute"===e.style.position,n=/(scroll|auto)/,r=e;r;){if(!r.parentNode)return e.ownerDocument||document.documentElement;var i=window.getComputedStyle(r),o=i.position,a=i.overflow,s=i["overflow-x"],c=i["overflow-y"];if("static"===o&&t)r=r.parentNode;else{if(n.test(a)&&n.test(s)&&n.test(c))return r;r=r.parentNode}}return e.ownerDocument||e.documentElement||document.documentElement}},821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r,i;return t||(t=250),function(){var o=n||this,a=+new Date,s=arguments;r&&a<r+t?(clearTimeout(i),i=setTimeout((function(){r=a,e.apply(o,s)}),t)):(r=a,e.apply(o,s))}}},2841:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ArrowContainer=void 0;var i=n(5893),o=n(5495),a=n(9512);t.ArrowContainer=function(e){var t=e.childRect,n=e.popoverRect,s=e.position,c=e.arrowColor,u=e.arrowSize,l=e.arrowClassName,d=e.arrowStyle,f=e.className,p=e.children,h=e.style,v=a.useArrowContainer({childRect:t,popoverRect:n,position:s,arrowColor:c,arrowSize:u}),m=v.arrowContainerStyle,g=v.arrowStyle,y=o.useMemo((function(){return r(r({},m),h)}),[m,h]),_=o.useMemo((function(){return r(r({},g),d)}),[g,d]);return i.jsxs("div",r({className:f,style:y},{children:[i.jsx("div",{style:_,className:l},void 0),p]}),void 0)}},2106:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Popover=t.usePopover=t.ArrowContainer=t.useArrowContainer=void 0;var i=n(5893),o=n(5495),a=n(5114),s=n(2319),c=n(1101);Object.defineProperty(t,"usePopover",{enumerable:!0,get:function(){return c.usePopover}});var u=n(6444),l=n(9512);Object.defineProperty(t,"useArrowContainer",{enumerable:!0,get:function(){return l.useArrowContainer}});var d=n(2841);Object.defineProperty(t,"ArrowContainer",{enumerable:!0,get:function(){return d.ArrowContainer}});var f=o.forwardRef((function(e,t){var n=e.isOpen,l=e.children,d=e.content,f=e.positions,p=void 0===f?s.Constants.DEFAULT_POSITIONS:f,h=e.align,v=void 0===h?s.Constants.DEFAULT_ALIGN:h,m=e.padding,g=void 0===m?0:m,y=e.reposition,_=void 0===y||y,b=e.parentElement,E=void 0===b?window.document.body:b,S=e.boundaryElement,w=void 0===S?E:S,x=e.containerClassName,O=void 0===x?"react-tiny-popover-container":x,I=e.containerStyle,A=e.contentLocation,C=e.boundaryInset,T=void 0===C?0:C,k=e.onClickOutside,N=u.useMemoizedArray(p),P=o.useRef(!1),j=o.useRef(),R=o.useRef(),M=o.useRef(_),D=o.useRef(),U=o.useState({align:v,nudgedLeft:0,nudgedTop:0,position:N[0],padding:g,childRect:s.Constants.EMPTY_CLIENT_RECT,popoverRect:s.Constants.EMPTY_CLIENT_RECT,parentRect:s.Constants.EMPTY_CLIENT_RECT,boundaryRect:s.Constants.EMPTY_CLIENT_RECT,boundaryInset:T,violations:s.Constants.EMPTY_CLIENT_RECT,hasViolations:!1}),L=U[0],B=U[1],F=o.useCallback((function(e){return B(e)}),[]),G=c.usePopover({isOpen:n,childRef:D,containerClassName:O,parentElement:E,boundaryElement:w,contentLocation:A,positions:N,align:v,padding:g,boundaryInset:T,reposition:_,onPositionPopover:F}),H=G.positionPopover,q=G.popoverRef,z=G.scoutRef;o.useLayoutEffect((function(){var e=!0,t=function(){var r,i;if(n&&e){var o=null===(r=null==D?void 0:D.current)||void 0===r?void 0:r.getBoundingClientRect(),a=null===(i=null==q?void 0:q.current)||void 0===i?void 0:i.getBoundingClientRect();null==o||null==a||s.rectsAreEqual(o,{top:L.childRect.top,left:L.childRect.left,width:L.childRect.width,height:L.childRect.height,bottom:L.childRect.top+L.childRect.height,right:L.childRect.left+L.childRect.width})&&a.width===L.popoverRect.width&&a.height===L.popoverRect.height&&L.padding===g&&L.align===v&&N===j.current&&A===R.current&&_===M.current||H(),N!==j.current&&(j.current=N),A!==R.current&&(R.current=A),_!==M.current&&(M.current=_),e&&window.requestAnimationFrame(t)}P.current=n};return window.requestAnimationFrame(t),function(){e=!1}}),[v,A,n,g,q,L.align,L.childRect.height,L.childRect.left,L.childRect.top,L.childRect.width,L.padding,L.popoverRect.height,L.popoverRect.width,H,N,_]),o.useEffect((function(){var e=q.current;return Object.assign(e.style,I),function(){Object.keys(null!=I?I:{}).forEach((function(t){return delete e.style[t]}))}}),[I,n,q]);var V=o.useCallback((function(e){var t,r;!n||(null===(t=q.current)||void 0===t?void 0:t.contains(e.target))||(null===(r=D.current)||void 0===r?void 0:r.contains(e.target))||null==k||k(e)}),[n,k,q]),X=o.useCallback((function(){D.current&&window.requestAnimationFrame((function(){return H()}))}),[H]);o.useEffect((function(){return window.addEventListener("click",V,!0),window.addEventListener("resize",X),function(){window.removeEventListener("click",V,!0),window.removeEventListener("resize",X)}}),[V,X]);var W=o.useCallback((function(e){D.current=e,null!=t&&("object"==typeof t?t.current=e:"function"==typeof t&&t(e))}),[t]);return i.jsxs(i.Fragment,{children:[o.cloneElement(l,{ref:W}),n?i.jsx(a.PopoverPortal,r({element:q.current,scoutElement:z.current,container:E},{children:"function"==typeof d?d(L):d}),void 0):null]},void 0)}));t.Popover=o.forwardRef((function(e,t){return"undefined"==typeof window?e.children:i.jsx(f,r({},e,{ref:t}),void 0)}))},5114:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopoverPortal=void 0;var r=n(5495),i=n(6250);t.PopoverPortal=function(e){var t=e.container,n=e.element,o=e.scoutElement,a=e.children;return r.useLayoutEffect((function(){return t.appendChild(n),t.appendChild(o),function(){t.removeChild(n),t.removeChild(o)}}),[t,n]),i.createPortal(a,n)}},9512:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useArrowContainer=void 0;var i=n(5495);t.useArrowContainer=function(e){var t=e.childRect,n=e.popoverRect,o=e.position,a=e.arrowSize,s=e.arrowColor;return{arrowContainerStyle:i.useMemo((function(){return{padding:a}}),[a]),arrowStyle:i.useMemo((function(){return r({position:"absolute"},function(){var e=2*a,r=t.top-n.top+t.height/2-e/2,i=t.left-n.left+t.width/2-e/2,c=a,u=n.width-a,l=n.height-a;switch(i=(i=i<c?c:i)+e>u?u-e:i,r=(r=r<c?c:r)+e>l?l-e:r,r=Number.isNaN(r)?0:r,i=Number.isNaN(i)?0:i,o){case"right":return{borderTop:a+"px solid transparent",borderBottom:a+"px solid transparent",borderRight:a+"px solid "+s,left:0,top:r};case"left":return{borderTop:a+"px solid transparent",borderBottom:a+"px solid transparent",borderLeft:a+"px solid "+s,right:0,top:r};case"bottom":return{borderLeft:a+"px solid transparent",borderRight:a+"px solid transparent",borderBottom:a+"px solid "+s,top:0,left:i};case"top":return{borderLeft:a+"px solid transparent",borderRight:a+"px solid transparent",borderTop:a+"px solid "+s,bottom:0,left:i};default:return{display:"hidden"}}}())}),[s,a,t.height,t.left,t.top,t.width,n.height,n.left,n.top,n.width,o])}}},3423:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useElementRef=void 0;var r=n(5495),i=n(2319);t.useElementRef=function(e,t){var n=r.useMemo((function(){return i.createContainer(t,e)}),[e,t]);return r.useRef(n)}},6444:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMemoizedArray=void 0;var r=n(5495);t.useMemoizedArray=function(e){var t=r.useRef(e);return r.useMemo((function(){if(t.current===e)return t.current;if(t.current.length!==e.length)return t.current=e,e;for(var n=0;n<e.length;n+=1)if(e[n]!==t.current[n])return t.current=e,e;return t.current}),[e])}},1101:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.usePopover=void 0;var r=n(5495),i=n(2319),o=n(3423);t.usePopover=function(e){var t=e.isOpen,n=e.childRef,a=e.positions,s=e.containerClassName,c=e.parentElement,u=e.contentLocation,l=e.align,d=e.padding,f=e.reposition,p=e.boundaryInset,h=e.boundaryElement,v=e.onPositionPopover,m=o.useElementRef(s,{position:"fixed",overflow:"visible",top:"0px",left:"0px"}),g=o.useElementRef("react-tiny-popover-scout",{position:"fixed",top:"0px",left:"0px",width:"0px",height:"0px",visibility:"hidden"}),y=r.useCallback((function(e){var r,o,s=void 0===e?{}:e,_=s.positionIndex,b=void 0===_?0:_,E=s.parentRect,S=void 0===E?c.getBoundingClientRect():E,w=s.childRect,x=void 0===w?null===(r=null==n?void 0:n.current)||void 0===r?void 0:r.getBoundingClientRect():w,O=s.scoutRect,I=void 0===O?null===(o=null==g?void 0:g.current)||void 0===o?void 0:o.getBoundingClientRect():O,A=s.popoverRect,C=void 0===A?m.current.getBoundingClientRect():A,T=s.boundaryRect,k=void 0===T?h===c?S:h.getBoundingClientRect():T;if(x&&S&&t){if(u){var N="function"==typeof u?u({childRect:x,popoverRect:C,parentRect:S,boundaryRect:k,padding:d,nudgedTop:0,nudgedLeft:0,boundaryInset:p,violations:i.Constants.EMPTY_CLIENT_RECT,hasViolations:!1}):u,P=N.top,j=N.left,R=S.left+j,M=S.top+P;return m.current.style.transform="translate("+(R-I.left)+"px, "+(M-I.top)+"px)",void v({childRect:x,popoverRect:C,parentRect:S,boundaryRect:k,padding:d,nudgedTop:0,nudgedLeft:0,boundaryInset:p,violations:i.Constants.EMPTY_CLIENT_RECT,hasViolations:!1})}var D=b===a.length,U=D?a[0]:a[b],L=i.getNewPopoverRect({childRect:x,popoverRect:C,boundaryRect:k,position:U,align:l,padding:d,reposition:f},p),B=L.rect;if(L.boundaryViolation&&f&&!D)y({positionIndex:b+1,childRect:x,popoverRect:C,parentRect:S,boundaryRect:k});else{var F=B.top,G=B.left,H=B.width,q=B.height,z=f&&!D,V=i.getNudgedPopoverRect(B,k,p),X=V.left,W=V.top,K=F,J=G;z&&(K=W,J=X),m.current.style.transform="translate("+(J-I.left)+"px, "+(K-I.top)+"px)";var Y={top:k.top+p-K,left:k.left+p-J,right:J+H-k.right+p,bottom:K+q-k.bottom+p};v({childRect:x,popoverRect:{top:K,left:J,width:H,height:q,right:J+H,bottom:K+q},parentRect:S,boundaryRect:k,position:U,align:l,padding:d,nudgedTop:W-F,nudgedLeft:X-G,boundaryInset:p,violations:{top:Y.top<=0?0:Y.top,left:Y.left<=0?0:Y.left,right:Y.right<=0?0:Y.right,bottom:Y.bottom<=0?0:Y.bottom},hasViolations:Y.top>0||Y.left>0||Y.right>0||Y.bottom>0})}}}),[c,n,m,h,u,a,l,d,f,p,v,t]);return{positionPopover:y,popoverRef:m,scoutRef:g}}},2319:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNudgedPopoverRect=t.getNewPopoverRect=t.popoverRectForPosition=t.createContainer=t.rectsAreEqual=t.Constants=void 0,t.Constants={DEFAULT_ALIGN:"center",DEFAULT_POSITIONS:["top","left","right","bottom"],EMPTY_CLIENT_RECT:{top:0,left:0,bottom:0,height:0,right:0,width:0}},t.rectsAreEqual=function(e,t){return e===t||(null==e?void 0:e.bottom)===(null==t?void 0:t.bottom)&&(null==e?void 0:e.height)===(null==t?void 0:t.height)&&(null==e?void 0:e.left)===(null==t?void 0:t.left)&&(null==e?void 0:e.right)===(null==t?void 0:t.right)&&(null==e?void 0:e.top)===(null==t?void 0:t.top)&&(null==e?void 0:e.width)===(null==t?void 0:t.width)},t.createContainer=function(e,t){var n=window.document.createElement("div");return t&&(n.className=t),Object.assign(n.style,e),n},t.popoverRectForPosition=function(e,t,n,r,i){var o,a,s=t.left+t.width/2,c=t.top+t.height/2,u=n.width,l=n.height;switch(e){case"left":o=c-l/2,a=t.left-r-u,"start"===i&&(o=t.top),"end"===i&&(o=t.bottom-l);break;case"bottom":o=t.bottom+r,a=s-u/2,"start"===i&&(a=t.left),"end"===i&&(a=t.right-u);break;case"right":o=c-l/2,a=t.right+r,"start"===i&&(o=t.top),"end"===i&&(o=t.bottom-l);break;default:o=t.top-l-r,a=s-u/2,"start"===i&&(a=t.left),"end"===i&&(a=t.right-u)}return{top:o,left:a,width:u,height:l,right:a+u,bottom:o+l}},t.getNewPopoverRect=function(e,n){var r=e.position,i=e.align,o=e.childRect,a=e.popoverRect,s=e.boundaryRect,c=e.padding,u=e.reposition,l=t.popoverRectForPosition(r,o,a,c,i);return{rect:l,boundaryViolation:u&&("top"===r&&l.top<s.top+n||"left"===r&&l.left<s.left+n||"right"===r&&l.right>s.right-n||"bottom"===r&&l.bottom>s.bottom-n)}},t.getNudgedPopoverRect=function(e,t,n){var r=t.top+n,i=t.left+n,o=t.right-n,a=t.bottom-n,s=e.top<r?r:e.top;s=s+e.height>a?a-e.height:s;var c=e.left<i?i:e.left;return{top:s,left:c=c+e.width>o?o-e.width:c,width:e.width,height:e.height,right:c+e.width,bottom:s+e.height}}},5251:(e,t,n)=>{"use strict";var r=n(5495),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!c.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:l,props:o,_owner:s.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},5893:(e,t,n)=>{"use strict";e.exports=n(5251)},655:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__assign:()=>o,__asyncDelegator:()=>b,__asyncGenerator:()=>_,__asyncValues:()=>E,__await:()=>y,__awaiter:()=>l,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>I,__createBinding:()=>f,__decorate:()=>s,__exportStar:()=>p,__extends:()=>i,__generator:()=>d,__importDefault:()=>x,__importStar:()=>w,__makeTemplateObject:()=>S,__metadata:()=>u,__param:()=>c,__read:()=>v,__rest:()=>a,__spread:()=>m,__spreadArrays:()=>g,__values:()=>h});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}function p(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e){return this instanceof y?(this.v=e,this):new y(e)}function _(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof y?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:y(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){!function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}(r,i,(t=e[n](t)).done,t.value)}))}}}function S(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function I(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},15:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5495).useLayoutEffect;t.default=r},3250:(e,t,n)=>{"use strict";var r=n(5495),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,a=r.useEffect,s=r.useLayoutEffect,c=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return s((function(){i.value=n,i.getSnapshot=t,u(i)&&l({inst:i})}),[e,n,t]),a((function(){return u(i)&&l({inst:i}),e((function(){u(i)&&l({inst:i})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},139:(e,t,n)=>{"use strict";var r=n(5495),i=n(1688),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=i.useSyncExternalStore,s=r.useRef,c=r.useEffect,u=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=s(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=u((function(){function e(e){if(!c){if(c=!0,a=e,e=r(e),void 0!==i&&f.hasValue){var t=f.value;if(i(t,e))return s=t}return s=e}if(t=s,o(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(a=e,s=n)}var a,s,c=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,n,r,i]);var p=a(e,d[0],d[1]);return c((function(){f.hasValue=!0,f.value=p}),[p]),l(p),p}},1688:(e,t,n)=>{"use strict";e.exports=n(3250)},2798:(e,t,n)=>{"use strict";e.exports=n(139)},880:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(552),i=n(509),o=n(7962);function a(e){var t;return(t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:e}}})[i.symbolObservable]=function(){return this},t}function s(e,t,n){var r=a(t);if(r.deferred=!0,i.isMachine(e)){var s=r.state=o.provide(void 0,(function(){return(n?e.withContext(n):e).initialState}));r.getSnapshot=function(){return s}}return r}function c(e){try{return"function"==typeof e.send}catch(e){return!1}}t.createDeferredActor=s,t.createInvocableActor=function(e,t,n,r){var o,c=i.toInvokeSource(e.src),u=null===(o=null==t?void 0:t.options.services)||void 0===o?void 0:o[c.type],l=e.data?i.mapContext(e.data,n,r):void 0,d=u?s(u,e.id,l):a(e.id);return d.meta=e,d},t.createNullActor=a,t.isActor=c,t.isSpawnedActor=function(e){return c(e)&&"id"in e},t.toActorRef=function(e){var t;return r.__assign(((t={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}})[i.symbolObservable]=function(){return this},t),e)}},5294:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7944),i=n(9660),o=!1;t.Machine=function(e,t,n){return void 0===n&&(n=e.context),new r.StateNode(e,t,n)},t.createMachine=function(e,t){return i.IS_PRODUCTION||e.predictableActionArguments||o||(o=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new r.StateNode(e,t)}},7556:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(552),i=n(9448),o=n(509),a=n(2119),s=n(1428),c=n(9660);function u(e){return"object"==typeof e&&null!==e&&"value"in e&&"_event"in e}var l=u,d=function(){function e(e){var t,n=this;this.actions=[],this.activities=i.EMPTY_ACTIVITY_MAP,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||i.EMPTY_ACTIVITY_MAP,this.meta=a.getMeta(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=null!==(t=Array.isArray(e.tags)?new Set(e.tags):e.tags)&&void 0!==t?t:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return a.nextEvents(n.configuration)}})}return e.from=function(t,n){return t instanceof e?t.context!==n?new e({value:t.value,context:n,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t:new e({value:t,context:n,_event:s.initEvent,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,n){if(t instanceof e){if(!t.actions.length)return t;var r=s.initEvent;return new e({value:t.value,context:n,_event:r,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return e.from(t,n)},e.prototype.toStrings=function(e,t){var n=this;if(void 0===e&&(e=this.value),void 0===t&&(t="."),o.isString(e))return[e];var i=Object.keys(e);return i.concat.apply(i,r.__spreadArray([],r.__read(i.map((function(r){return n.toStrings(e[r],t).map((function(e){return r+t+e}))}))),!1))},e.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var t=e.tags;e.machine;var n=r.__rest(e,["configuration","transitions","tags","machine"]);return r.__assign(r.__assign({},n),{tags:Array.from(t)})},e.prototype.matches=function(e){return o.matchesState(e,this.value)},e.prototype.hasTag=function(e){return this.tags.has(e)},e.prototype.can=function(e){var t;c.IS_PRODUCTION&&o.warn(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var n=null===(t=this.machine)||void 0===t?void 0:t.getTransitionData(this,e);return!!(null==n?void 0:n.transitions.length)&&n.transitions.some((function(e){return void 0!==e.target||e.actions.length}))},e}();t.State=d,t.bindActionToState=function(e,t){var n=e.exec;return r.__assign(r.__assign({},e),{exec:void 0!==n?function(){return n(t.context,t.event,{action:e,state:t,_event:t._event})}:void 0})},t.isState=l,t.isStateConfig=u,t.stateValuesEqual=function e(t,n){if(t===n)return!0;if(void 0===t||void 0===n)return!1;if(o.isString(t)||o.isString(n))return t===n;var r=Object.keys(t),i=Object.keys(n);return r.length===i.length&&r.every((function(r){return e(t[r],n[r])}))}},7944:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(552),i=n(509),o=n(7108),a=n(7556),s=n(3487),c=n(1428),u=n(9660),l=n(9448),d=n(2119),f=n(880),p=n(290),h="",v="*",m={},g=function(e){return"#"===e[0]},y=function(){function e(t,n,o,a){var s,f=this;void 0===o&&(o="context"in t?t.context:void 0),this.config=t,this._context=o,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign({actions:{},guards:{},services:{},activities:{},delays:{}},n),this.parent=null==a?void 0:a.parent,this.key=this.config.key||(null==a?void 0:a.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:l.STATE_DELIMITER),this.id=this.config.id||r.__spreadArray([this.machine.key],r.__read(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(s=this.config.schema)&&void 0!==s?s:{},this.description=this.config.description,u.IS_PRODUCTION||i.warn(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?i.mapValues(this.config.states,(function(t,n){var i,o=new e(t,{},void 0,{parent:f,key:n});return Object.assign(f.idMap,r.__assign(((i={})[o.id]=o,i),o.idMap)),o})):m;var v=0;!function e(t){var n,i;t.order=v++;try{for(var o=r.__values(d.getAllChildren(t)),a=o.next();!a.done;a=o.next())e(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some((function(e){return e.event===h})):h in this.config.on),this.strict=!!this.config.strict,this.onEntry=i.toArray(this.config.entry||this.config.onEntry).map((function(e){return c.toActionObject(e)})),this.onExit=i.toArray(this.config.exit||this.config.onExit).map((function(e){return c.toActionObject(e)})),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=i.toArray(this.config.invoke).map((function(e,t){var n,o;if(i.isMachine(e)){var a=i.createInvokeId(f.id,t);return f.machine.options.services=r.__assign(((n={})[a]=e,n),f.machine.options.services),p.toInvokeDefinition({src:a,id:a})}if(i.isString(e.src))return a=e.id||i.createInvokeId(f.id,t),p.toInvokeDefinition(r.__assign(r.__assign({},e),{id:a,src:e.src}));if(i.isMachine(e.src)||i.isFunction(e.src))return a=e.id||i.createInvokeId(f.id,t),f.machine.options.services=r.__assign(((o={})[a]=e.src,o),f.machine.options.services),p.toInvokeDefinition(r.__assign(r.__assign({id:a},e),{src:a}));var s=e.src;return p.toInvokeDefinition(r.__assign(r.__assign({id:i.createInvokeId(f.id,t)},e),{src:s}))})),this.activities=i.toArray(this.config.activities).concat(this.invoke).map((function(e){return c.toActivityDefinition(e)})),this.transition=this.transition.bind(this),this.tags=i.toArray(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||d.getAllStateNodes(this).forEach((function(e){return e.on}))},e.prototype.withConfig=function(t,n){var i=this.options,o=i.actions,a=i.activities,s=i.guards,c=i.services,u=i.delays;return new e(this.config,{actions:r.__assign(r.__assign({},o),t.actions),activities:r.__assign(r.__assign({},a),t.activities),guards:r.__assign(r.__assign({},s),t.guards),services:r.__assign(r.__assign({},c),t.services),delays:r.__assign(r.__assign({},u),t.delays)},null!=n?n:this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},Object.defineProperty(e.prototype,"context",{get:function(){return i.isFunction(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:i.mapValues(this.states,(function(e){return e.definition})),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce((function(e,t){return e[t.eventType]=e[t.eventType]||[],e[t.eventType].push(t),e}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var t=e===h,n=this.transitions.filter((function(n){var r=n.eventType===e;return t?r:r||n.eventType===v}));return this.__cache.candidates[e]=n,n},e.prototype.getDelayedTransitions=function(){var e=this,t=this.config.after;if(!t)return[];var n=function(t,n){var r=i.isFunction(t)?"".concat(e.id,":delay[").concat(n,"]"):t,o=c.after(r,e.id);return e.onEntry.push(c.send(o,{delay:t})),e.onExit.push(c.cancel(o)),o};return(i.isArray(t)?t.map((function(e,t){var i=n(e.delay,t);return r.__assign(r.__assign({},e),{event:i})})):i.flatten(Object.keys(t).map((function(e,o){var a=t[e],s=i.isString(a)?{target:a}:a,c=isNaN(+e)?e:+e,u=n(c,o);return i.toArray(s).map((function(e){return r.__assign(r.__assign({},e),{event:u,delay:c})}))})))).map((function(t){var n=t.delay;return r.__assign(r.__assign({},e.formatTransition(t)),{delay:n})}))},e.prototype.getStateNodes=function(e){var t,n=this;if(!e)return[];var o=e instanceof a.State?e.value:i.toStateValue(e,this.delimiter);if(i.isString(o)){var s=this.getStateNode(o).initial;return void 0!==s?this.getStateNodes(((t={})[o]=s,t)):[this,this.states[o]]}var c=Object.keys(o),u=[this];return u.push.apply(u,r.__spreadArray([],r.__read(i.flatten(c.map((function(e){return n.getStateNode(e).getStateNodes(o[e])})))),!1)),u},e.prototype.handles=function(e){var t=i.getEventType(e);return this.events.includes(t)},e.prototype.resolveState=function(e){var t=e instanceof a.State?e:a.State.create(e),n=Array.from(d.getConfiguration([],this.getStateNodes(t.value)));return new a.State(r.__assign(r.__assign({},t),{value:this.resolve(t.value),configuration:n,done:d.isInFinalState(n,this),tags:d.getTagsFromConfiguration(n),machine:this.machine}))},e.prototype.transitionLeafNode=function(e,t,n){var r=this.getStateNode(e).next(t,n);return r&&r.transitions.length?r:this.next(t,n)},e.prototype.transitionCompoundNode=function(e,t,n){var r=Object.keys(e),i=this.getStateNode(r[0])._transition(e[r[0]],t,n);return i&&i.transitions.length?i:this.next(t,n)},e.prototype.transitionParallelNode=function(e,t,n){var o,a,s={};try{for(var c=r.__values(Object.keys(e)),u=c.next();!u.done;u=c.next()){var l=u.value,d=e[l];if(d){var f=this.getStateNode(l)._transition(d,t,n);f&&(s[l]=f)}}}catch(e){o={error:e}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}var p=Object.keys(s).map((function(e){return s[e]})),h=i.flatten(p.map((function(e){return e.transitions})));if(!p.some((function(e){return e.transitions.length>0})))return this.next(t,n);var v=i.flatten(p.map((function(e){return e.entrySet}))),m=i.flatten(Object.keys(s).map((function(e){return s[e].configuration})));return{transitions:h,entrySet:v,exitSet:i.flatten(p.map((function(e){return e.exitSet}))),configuration:m,source:t,actions:i.flatten(Object.keys(s).map((function(e){return s[e].actions})))}},e.prototype._transition=function(e,t,n){return i.isString(e)?this.transitionLeafNode(e,t,n):1===Object.keys(e).length?this.transitionCompoundNode(e,t,n):this.transitionParallelNode(e,t,n)},e.prototype.getTransitionData=function(e,t){return this._transition(e.value,e,i.toSCXMLEvent(t))},e.prototype.next=function(e,t){var n,o,a,s=this,c=t.name,u=[],l=[];try{for(var d=r.__values(this.getCandidates(c)),f=d.next();!f.done;f=d.next()){var p=f.value,h=p.cond,v=p.in,m=e.context,y=!v||(i.isString(v)&&g(v)?e.matches(i.toStateValue(this.getStateNodeById(v).path,this.delimiter)):i.matchesState(i.toStateValue(v,this.delimiter),i.path(this.path.slice(0,-2))(e.value))),_=!1;try{_=!h||i.evaluateGuard(this.machine,h,m,t,e)}catch(e){throw new Error("Unable to evaluate guard '".concat(h.name||h.type,"' in transition for event '").concat(c,"' in state node '").concat(this.id,"':\n").concat(e.message))}if(_&&y){void 0!==p.target&&(l=p.target),u.push.apply(u,r.__spreadArray([],r.__read(p.actions),!1)),a=p;break}}}catch(e){n={error:e}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}if(a){if(!l.length)return{transitions:[a],entrySet:[],exitSet:[],configuration:e.value?[this]:[],source:e,actions:u};var b=i.flatten(l.map((function(t){return s.getRelativeStateNodes(t,e.historyValue)}))),E=!!a.internal,S=[];return E||l.forEach((function(e){S.push.apply(S,r.__spreadArray([],r.__read(s.getExternalReentryNodes(e)),!1))})),{transitions:[a],entrySet:S,exitSet:E?[]:[this],configuration:b,source:e,actions:u}}},e.prototype.getExternalReentryNodes=function(e){for(var t=[],n=r.__read(e.order>this.order?[e,this]:[this,e],2),i=n[0],o=n[1];i&&i!==o;)t.push(i),i=i.parent;return i!==o?[]:(t.push(o),t)},e.prototype.getActions=function(e,t,n,a,u,l){var f,p,h,v,m=d.getConfiguration([],l?this.getStateNodes(l.value):[this]);try{for(var g=r.__values(e),y=g.next();!y.done;y=g.next()){var _=y.value;d.has(m,_)&&!d.has(n.entrySet,_.parent)||n.entrySet.push(_)}}catch(e){f={error:e}}finally{try{y&&!y.done&&(p=g.return)&&p.call(g)}finally{if(f)throw f.error}}try{for(var b=r.__values(m),E=b.next();!E.done;E=b.next())_=E.value,d.has(e,_)&&!d.has(n.exitSet,_.parent)||n.exitSet.push(_)}catch(e){h={error:e}}finally{try{E&&!E.done&&(v=b.return)&&v.call(b)}finally{if(h)throw h.error}}var S=i.flatten(n.entrySet.map((function(e){var t=[];if("final"!==e.type)return t;var r=e.parent;if(!r.parent)return t;t.push(c.done(e.id,e.doneData),c.done(r.id,e.doneData?i.mapContext(e.doneData,a,u):void 0));var o=r.parent;return"parallel"===o.type&&d.getChildren(o).every((function(e){return d.isInFinalState(n.configuration,e)}))&&t.push(c.done(o.id)),t})));n.exitSet.sort((function(e,t){return t.order-e.order})),n.entrySet.sort((function(e,t){return e.order-t.order}));var w=new Set(n.entrySet),x=new Set(n.exitSet),O=r.__read([i.flatten(Array.from(w).map((function(e){return r.__spreadArray(r.__spreadArray([],r.__read(e.activities.map((function(e){return c.start(e)}))),!1),r.__read(e.onEntry),!1)}))).concat(S.map(c.raise)),i.flatten(Array.from(x).map((function(e){return r.__spreadArray(r.__spreadArray([],r.__read(e.onExit),!1),r.__read(e.activities.map((function(e){return c.stop(e)}))),!1)})))],2),I=O[0],A=O[1],C=c.toActionObjects(A.concat(n.actions).concat(I),this.machine.options.actions);if(t){var T=c.toActionObjects(i.flatten(r.__spreadArray([],r.__read(e),!1).sort((function(e,t){return t.order-e.order})).map((function(e){return e.onExit}))),this.machine.options.actions).filter((function(e){return e.type!==s.raise&&(e.type!==s.send||!!e.to&&e.to!==o.SpecialTargets.Internal)}));return C.concat(T)}return C},e.prototype.transition=function(e,t,n,o){void 0===e&&(e=this.initialState);var s,c=i.toSCXMLEvent(t);if(e instanceof a.State)s=void 0===n?e:this.resolveState(a.State.from(e,n));else{var l=i.isString(e)?this.resolve(i.pathToStateValue(this.getResolvedPath(e))):this.resolve(e),f=null!=n?n:this.machine.context;s=this.resolveState(a.State.from(l,f))}if(!u.IS_PRODUCTION&&c.name===v)throw new Error("An event cannot have the wildcard type ('".concat(v,"')"));if(this.strict&&!this.events.includes(c.name)&&!i.isBuiltInEvent(c.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(c.name,"'"));var p=this._transition(s.value,s,c)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:s,actions:[]},h=d.getConfiguration([],this.getStateNodes(s.value)),m=p.configuration.length?d.getConfiguration(h,p.configuration):h;return p.configuration=r.__spreadArray([],r.__read(m),!1),this.resolveTransition(p,s,s.context,o,c)},e.prototype.resolveRaisedTransition=function(e,t,n,i){var o,a=e.actions;return(e=this.transition(e,t,void 0,i))._event=n,e.event=n.data,(o=e.actions).unshift.apply(o,r.__spreadArray([],r.__read(a),!1)),e},e.prototype.resolveTransition=function(e,t,n,u,l){var p,v,m=this;void 0===l&&(l=c.initEvent);var g=e.configuration,y=!t||e.transitions.length>0,_=y?e.configuration:t?t.configuration:[],b=d.isInFinalState(_,this),E=y?d.getValue(this.machine,g):void 0,S=t?t.historyValue?t.historyValue:e.source?this.machine.historyValue(t.value):void 0:void 0,w=this.getActions(new Set(_),b,e,n,l,t),x=t?r.__assign({},t.activities):{};try{for(var O=r.__values(w),I=O.next();!I.done;I=O.next()){var A=I.value;A.type===s.start?x[A.activity.id||A.activity.type]=A:A.type===s.stop&&(x[A.activity.id||A.activity.type]=!1)}}catch(e){p={error:e}}finally{try{I&&!I.done&&(v=O.return)&&v.call(O)}finally{if(p)throw p.error}}var C=r.__read(c.resolveActions(this,t,n,l,w,u,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),T=C[0],k=C[1],N=r.__read(i.partition(T,(function(e){return e.type===s.raise||e.type===s.send&&e.to===o.SpecialTargets.Internal})),2),P=N[0],j=N[1],R=T.filter((function(e){var t;return e.type===s.start&&(null===(t=e.activity)||void 0===t?void 0:t.type)===s.invoke})),M=R.reduce((function(e,t){return e[t.activity.id]=f.createInvocableActor(t.activity,m.machine,k,l),e}),t?r.__assign({},t.children):{}),D=new a.State({value:E||t.value,context:k,_event:l,_sessionid:t?t._sessionid:null,historyValue:E?S?i.updateHistoryValue(S,E):void 0:t?t.historyValue:void 0,history:!E||e.source?t:void 0,actions:E?j:[],activities:E?x:t?t.activities:{},events:[],configuration:_,transitions:e.transitions,children:M,done:b,tags:d.getTagsFromConfiguration(_),machine:this}),U=n!==k;D.changed=l.name===s.update||U;var L=D.history;L&&delete L.history;var B=!b&&(this._transient||g.some((function(e){return e._transient})));if(!(y||B&&l.name!==h))return D;var F=D;if(!b)for(B&&(F=this.resolveRaisedTransition(F,{type:s.nullEvent},l,u));P.length;){var G=P.shift();F=this.resolveRaisedTransition(F,G._event,l,u)}var H=F.changed||(L?!!F.actions.length||U||typeof L.value!=typeof F.value||!a.stateValuesEqual(F.value,L.value):void 0);return F.changed=H,F.history=L,F},e.prototype.getStateNode=function(e){if(g(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var t=this.states[e];if(!t)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return t},e.prototype.getStateNodeById=function(e){var t=g(e)?e.slice("#".length):e;if(t===this.id)return this;var n=this.machine.idMap[t];if(!n)throw new Error("Child state node '#".concat(t,"' does not exist on machine '").concat(this.id,"'"));return n},e.prototype.getStateNodeByPath=function(e){if("string"==typeof e&&g(e))try{return this.getStateNodeById(e.slice(1))}catch(e){}for(var t=i.toStatePath(e,this.delimiter).slice(),n=this;t.length;){var r=t.shift();if(!r.length)break;n=n.getStateNode(r)}return n},e.prototype.resolve=function(e){var t,n=this;if(!e)return this.initialStateValue||m;switch(this.type){case"parallel":return i.mapValues(this.initialStateValue,(function(t,r){return t?n.getStateNode(r).resolve(e[r]||t):m}));case"compound":if(i.isString(e)){var r=this.getStateNode(e);return"parallel"===r.type||"compound"===r.type?((t={})[e]=r.initialStateValue,t):e}return Object.keys(e).length?i.mapValues(e,(function(e,t){return e?n.getStateNode(t).resolve(e):m})):this.initialStateValue||{};default:return e||m}},e.prototype.getResolvedPath=function(e){if(g(e)){var t=this.machine.idMap[e.slice("#".length)];if(!t)throw new Error("Unable to find state node '".concat(e,"'"));return t.path}return i.toStatePath(e,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var e,t;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)t=i.mapFilterValues(this.states,(function(e){return e.initialStateValue||m}),(function(e){return!("history"===e.type)}));else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));t=d.isLeafNode(this.states[this.initial])?this.initial:((e={})[this.initial]=this.states[this.initial].initialStateValue,e)}else t={};return this.__cache.initialStateValue=t,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(e,t){this._init();var n=this.getStateNodes(e);return this.resolveTransition({configuration:n,entrySet:r.__spreadArray([],r.__read(n),!1),exitSet:[],transitions:[],source:void 0,actions:[]},void 0,null!=t?t:this.machine.context,void 0)},Object.defineProperty(e.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var e;if("history"===this.type){var t=this.config;e=i.isString(t.target)&&g(t.target)?i.pathToStateValue(this.machine.getStateNodeById(t.target).path.slice(this.path.length-1)):t.target}return e},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(e,t,n){return void 0===n&&(n=!0),n?"history"===e.type?e.resolveHistory(t):e.initialStateNodes:[e]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var e=this;if(d.isLeafNode(this))return[this];if("compound"===this.type&&!this.initial)return u.IS_PRODUCTION||i.warn(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var t=i.toStatePaths(this.initialStateValue);return i.flatten(t.map((function(t){return e.getFromRelativePath(t)})))},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var t=r.__read(e),n=t[0],i=t.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var o=this.getStateNode(n);if("history"===o.type)return o.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(i)},e.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:i.mapFilterValues(this.states,(function(t,n){if(!e)return t.historyValue();var r=i.isString(e)?void 0:e[n];return t.historyValue(r||t.initialStateValue)}),(function(e){return!e.history}))}},e.prototype.resolveHistory=function(e){var t=this;if("history"!==this.type)return[this];var n=this.parent;if(!e){var r=this.target;return r?i.flatten(i.toStatePaths(r).map((function(e){return n.getFromRelativePath(e)}))):n.initialStateNodes}var o=i.nestedPath(n.path,"states")(e).current;return i.isString(o)?[n.getStateNode(o)]:i.flatten(i.toStatePaths(o).map((function(e){return"deep"===t.history?n.getFromRelativePath(e):[n.states[e[0]]]})))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var e=this,t=i.flatten(Object.keys(this.states).map((function(t){return e.states[t].stateIds})));return[this.id].concat(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){var e,t,n,i;if(this.__cache.events)return this.__cache.events;var o=this.states,a=new Set(this.ownEvents);if(o)try{for(var s=r.__values(Object.keys(o)),c=s.next();!c.done;c=s.next()){var u=o[c.value];if(u.states)try{for(var l=(n=void 0,r.__values(u.events)),d=l.next();!d.done;d=l.next()){var f=d.value;a.add("".concat(f))}}catch(e){n={error:e}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(a)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter((function(e){return!(!e.target&&!e.actions.length&&e.internal)})).map((function(e){return e.eventType})));return Array.from(e)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(e){var t=this;if(void 0!==e)return e.map((function(e){if(!i.isString(e))return e;var n=e[0]===t.delimiter;if(n&&!t.parent)return t.getStateNodeByPath(e.slice(1));var r=n?t.key+e:e;if(!t.parent)return t.getStateNodeByPath(r);try{return t.parent.getStateNodeByPath(r)}catch(e){throw new Error("Invalid transition definition for state node '".concat(t.id,"':\n").concat(e.message))}}))},e.prototype.formatTransition=function(e){var t=this,n=i.normalizeTarget(e.target),o="internal"in e?e.internal:!n||n.some((function(e){return i.isString(e)&&e[0]===t.delimiter})),a=this.machine.options.guards,s=this.resolveTarget(n),u=r.__assign(r.__assign({},e),{actions:c.toActionObjects(i.toArray(e.actions)),cond:i.toGuard(e.cond,a),target:s,source:this,internal:o,eventType:e.event,toJSON:function(){return r.__assign(r.__assign({},u),{target:u.target?u.target.map((function(e){return"#".concat(e.id)})):void 0,source:"#".concat(t.id)})}});return u},e.prototype.formatTransitions=function(){var e,t,n,o=this;if(this.config.on)if(Array.isArray(this.config.on))n=this.config.on;else{var a=this.config.on,s=a["*"],l=void 0===s?[]:s,d=r.__rest(a,["*"]);n=i.flatten(Object.keys(d).map((function(e){u.IS_PRODUCTION||e!==h||i.warn(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(o.id,'".'));var t=i.toTransitionConfigArray(e,d[e]);return u.IS_PRODUCTION||function(e,t,n){var r=n.slice(0,-1).some((function(e){return!("cond"in e)&&!("in"in e)&&(i.isString(e.target)||i.isMachine(e.target))})),o=t===h?"the transient event":"event '".concat(t,"'");i.warn(!r,"One or more transitions for ".concat(o," on state '").concat(e.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")}(o,e,t),t})).concat(i.toTransitionConfigArray(v,l)))}else n=[];var f=this.config.always?i.toTransitionConfigArray("",this.config.always):[],p=this.config.onDone?i.toTransitionConfigArray(String(c.done(this.id)),this.config.onDone):[];u.IS_PRODUCTION||i.warn(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var m=i.flatten(this.invoke.map((function(e){var t=[];return e.onDone&&t.push.apply(t,r.__spreadArray([],r.__read(i.toTransitionConfigArray(String(c.doneInvoke(e.id)),e.onDone)),!1)),e.onError&&t.push.apply(t,r.__spreadArray([],r.__read(i.toTransitionConfigArray(String(c.error(e.id)),e.onError)),!1)),t}))),g=this.after,y=i.flatten(r.__spreadArray(r.__spreadArray(r.__spreadArray(r.__spreadArray([],r.__read(p),!1),r.__read(m),!1),r.__read(n),!1),r.__read(f),!1).map((function(e){return i.toArray(e).map((function(e){return o.formatTransition(e)}))})));try{for(var _=r.__values(g),b=_.next();!b.done;b=_.next()){var E=b.value;y.push(E)}}catch(t){e={error:t}}finally{try{b&&!b.done&&(t=_.return)&&t.call(_)}finally{if(e)throw e.error}}return y},e}();t.StateNode=y},552:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.__assign=function(){return t.__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.__assign.apply(this,arguments)},t.__read=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},t.__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},t.__spreadArray=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},t.__values=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}},3487:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7108),i=r.ActionTypes.Start,o=r.ActionTypes.Stop,a=r.ActionTypes.Raise,s=r.ActionTypes.Send,c=r.ActionTypes.Cancel,u=r.ActionTypes.NullEvent,l=r.ActionTypes.Assign,d=r.ActionTypes.After,f=r.ActionTypes.DoneState,p=r.ActionTypes.Log,h=r.ActionTypes.Init,v=r.ActionTypes.Invoke,m=r.ActionTypes.ErrorExecution,g=r.ActionTypes.ErrorPlatform,y=r.ActionTypes.ErrorCustom,_=r.ActionTypes.Update,b=r.ActionTypes.Choose,E=r.ActionTypes.Pure;t.after=d,t.assign=l,t.cancel=c,t.choose=b,t.doneState=f,t.error=y,t.errorExecution=m,t.errorPlatform=g,t.init=h,t.invoke=v,t.log=p,t.nullEvent=u,t.pure=E,t.raise=a,t.send=s,t.start=i,t.stop=o,t.update=_},1428:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(552),i=n(7108),o=n(3487),a=n(509),s=n(9660),c=a.toSCXMLEvent({type:o.init});function u(e,t){return t&&t[e]||void 0}function l(e,t){var n;if(a.isString(e)||"number"==typeof e){var i=u(e,t);n=a.isFunction(i)?{type:e,exec:i}:i||{type:e,exec:void 0}}else if(a.isFunction(e))n={type:e.name||e.toString(),exec:e};else if(i=u(e.type,t),a.isFunction(i))n=r.__assign(r.__assign({},e),{exec:i});else if(i){var o=i.type||e.type;n=r.__assign(r.__assign(r.__assign({},i),e),{type:o})}else n=e;return n}var d=function(e,t){return e?(a.isArray(e)?e:[e]).map((function(e){return l(e,t)})):[]};function f(e){var t=l(e);return r.__assign(r.__assign({id:a.isString(e)?e:t.id},t),{type:t.type})}function p(e){return{type:o.raise,_event:a.toSCXMLEvent(e.event)}}function h(e,t){return{to:t?t.to:void 0,type:o.send,event:a.isFunction(e)?e:a.toEventObject(e),delay:t?t.delay:void 0,id:t&&void 0!==t.id?t.id:a.isFunction(e)?e.name:a.getEventType(e)}}function v(e,t,n,i){var o,s={_event:n},c=a.toSCXMLEvent(a.isFunction(e.event)?e.event(t,n.data,s):e.event);if(a.isString(e.delay)){var u=i&&i[e.delay];o=a.isFunction(u)?u(t,n.data,s):u}else o=a.isFunction(e.delay)?e.delay(t,n.data,s):e.delay;var l=a.isFunction(e.to)?e.to(t,n.data,s):e.to;return r.__assign(r.__assign({},e),{to:l,_event:c,event:c.data,delay:o})}function m(e,t){return h(e,r.__assign(r.__assign({},t),{to:i.SpecialTargets.Parent}))}var g=function(e,t){return{context:e,event:t}},y=function(e,t,n){return r.__assign(r.__assign({},e),{value:a.isString(e.expr)?e.expr:e.expr(t,n.data,{_event:n})})};function _(e,t,n){var r=a.isFunction(e.activity)?e.activity(t,n.data):e.activity,o="string"==typeof r?{id:r}:r;return{type:i.ActionTypes.Stop,activity:o}}t.actionTypes=o,t.after=function(e,t){var n=t?"#".concat(t):"";return"".concat(i.ActionTypes.After,"(").concat(e,")").concat(n)},t.assign=function(e){return{type:o.assign,assignment:e}},t.cancel=function(e){return{type:o.cancel,sendId:e}},t.choose=function(e){return{type:i.ActionTypes.Choose,conds:e}},t.done=function(e,t){var n="".concat(i.ActionTypes.DoneState,".").concat(e);return{type:n,data:t,toString:function(){return n}}},t.doneInvoke=function(e,t){var n="".concat(i.ActionTypes.DoneInvoke,".").concat(e);return{type:n,data:t,toString:function(){return n}}},t.error=function(e,t){var n="".concat(i.ActionTypes.ErrorPlatform,".").concat(e);return{type:n,data:t,toString:function(){return n}}},t.escalate=function(e,t){return m((function(t,n,r){return{type:o.error,data:a.isFunction(e)?e(t,n,r):e}}),r.__assign(r.__assign({},t),{to:i.SpecialTargets.Parent}))},t.forwardTo=function(e,t){if(!(s.IS_PRODUCTION||e&&"function"!=typeof e)){var n=e;e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i="function"==typeof n?n.apply(void 0,r.__spreadArray([],r.__read(e),!1)):n;if(!i)throw new Error("Attempted to forward event to undefined actor. This risks an infinite loop in the sender.");return i}}return h((function(e,t){return t}),r.__assign(r.__assign({},t),{to:e}))},t.getActionFunction=u,t.initEvent=c,t.isActionObject=function(e){return"object"==typeof e&&"type"in e},t.log=function(e,t){return void 0===e&&(e=g),{type:o.log,label:t,expr:e}},t.pure=function(e){return{type:i.ActionTypes.Pure,get:e}},t.raise=function(e){return a.isString(e)?{type:o.raise,event:e}:h(e,{to:i.SpecialTargets.Internal})},t.resolveActions=function e(t,n,c,u,f,h,m){void 0===m&&(m=!1);var g=r.__read(m?[[],f]:a.partition(f,(function(e){return e.type===o.assign})),2),b=g[0],E=g[1],S=b.length?a.updateContext(c,u,b,n):c,w=m?[c]:void 0,x=a.flatten(E.map((function(c){var f;switch(c.type){case o.raise:return p(c);case o.send:var g=v(c,S,u,t.options.delays);return s.IS_PRODUCTION||a.warn(!a.isString(c.delay)||"number"==typeof g.delay,"No delay reference for delay expression '".concat(c.delay,"' was found on machine '").concat(t.id,"'")),g.to!==i.SpecialTargets.Internal&&(null==h||h(g,S,u)),g;case o.log:var b=y(c,S,u);return null==h||h(b,S,u),b;case o.choose:if(!(I=null===(f=c.conds.find((function(e){var r=a.toGuard(e.cond,t.options.guards);return!r||a.evaluateGuard(t,r,S,u,h?void 0:n)})))||void 0===f?void 0:f.actions))return[];var E=r.__read(e(t,n,S,u,d(a.toArray(I),t.options.actions),h,m),2),x=E[0],O=E[1];return S=O,null==w||w.push(S),x;case o.pure:var I;if(!(I=c.get(S,u.data)))return[];var A=r.__read(e(t,n,S,u,d(a.toArray(I),t.options.actions),h,m),2),C=A[0],T=A[1];return S=T,null==w||w.push(S),C;case o.stop:return b=_(c,S,u),null==h||h(b,S,u),b;case o.assign:S=a.updateContext(S,u,[c],h?void 0:n),null==w||w.push(S);break;default:var k=l(c,t.options.actions),N=k.exec;if(h)h(k,S,u);else if(N&&w){var P=w.length-1;k=r.__assign(r.__assign({},k),{exec:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];N.apply(void 0,r.__spreadArray([w[P]],r.__read(t),!1))}})}return k}})).filter((function(e){return!!e})));return[x,S]},t.resolveLog=y,t.resolveRaise=p,t.resolveSend=v,t.resolveStop=_,t.respond=function(e,t){return h(e,r.__assign(r.__assign({},t),{to:function(e,t,n){return n._event.origin}}))},t.send=h,t.sendParent=m,t.sendTo=function(e,t,n){return h(t,r.__assign(r.__assign({},n),{to:e}))},t.sendUpdate=function(){return m(o.update)},t.start=function(e){var t=f(e);return{type:i.ActionTypes.Start,activity:t,exec:void 0}},t.stop=function(e){var t=a.isFunction(e)?e:f(e);return{type:i.ActionTypes.Stop,activity:t,exec:void 0}},t.toActionObject=l,t.toActionObjects=d,t.toActivityDefinition=f},6590:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1428),i=n(880),o=n(509);t.fromPromise=function(e){var t={error:void 0,data:void 0,status:"pending"};return{transition:function(e,t,n){var i=n.parent,o=n.id,a=n.observers;switch(t.type){case"fulfill":return null==i||i.send(r.doneInvoke(o,t.data)),{error:void 0,data:t.data,status:"fulfilled"};case"reject":return null==i||i.send(r.error(o,t.error)),a.forEach((function(e){e.error(t.error)})),{error:t.error,data:void 0,status:"rejected"};default:return e}},initialState:t,start:function(n){var r=n.self;return e().then((function(e){r.send({type:"fulfill",data:e})}),(function(e){r.send({type:"reject",error:e})})),t}}},t.fromReducer=function(e,t){return{transition:e,initialState:t}},t.spawnBehavior=function(e,t){void 0===t&&(t={});var n=e.initialState,r=new Set,a=[],s=!1,c=i.toActorRef({id:t.id,send:function(t){a.push(t),function(){if(!s){for(s=!0;a.length>0;){var t=a.shift();n=e.transition(n,t,u),r.forEach((function(e){return e.next(n)}))}s=!1}}()},getSnapshot:function(){return n},subscribe:function(e,t,i){var a=o.toObserver(e,t,i);return r.add(a),a.next(n),{unsubscribe:function(){r.delete(a)}}}}),u={parent:t.parent,self:c,id:t.id||"anonymous",observers:r};return n=e.start?e.start(u):n,c}},9448:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_GUARD_TYPE="xstate.guard",t.EMPTY_ACTIVITY_MAP={},t.STATE_DELIMITER=".",t.TARGETLESS_KEY=""},298:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9660);function i(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:void(r.IS_PRODUCTION||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues"))}t.getGlobal=i,t.registerService=function(e){if(i()){var t=function(){var e=i();if(e&&"__xstate__"in e)return e.__xstate__}();t&&t.register(e)}}},9660:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IS_PRODUCTION=!0},4881:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1428),i=n(880),o=n(3974),a=n(5294),s=n(4404),c=n(5484),u=n(7422),l=n(7556),d=n(7944),f=n(6590),p=n(7108),h=n(509),v=r.assign,m=r.send,g=r.sendParent,y=r.sendUpdate,_=r.forwardTo,b=r.doneInvoke;t.actions=r,t.toActorRef=i.toActorRef,t.Interpreter=o.Interpreter,Object.defineProperty(t,"InterpreterStatus",{enumerable:!0,get:function(){return o.InterpreterStatus}}),t.interpret=o.interpret,t.spawn=o.spawn,t.Machine=a.Machine,t.createMachine=a.createMachine,t.mapState=s.mapState,t.matchState=c.matchState,t.createSchema=u.createSchema,t.t=u.t,t.State=l.State,t.StateNode=d.StateNode,t.spawnBehavior=f.spawnBehavior,Object.defineProperty(t,"ActionTypes",{enumerable:!0,get:function(){return p.ActionTypes}}),Object.defineProperty(t,"SpecialTargets",{enumerable:!0,get:function(){return p.SpecialTargets}}),t.matchesState=h.matchesState,t.toEventObject=h.toEventObject,t.toObserver=h.toObserver,t.toSCXMLEvent=h.toSCXMLEvent,t.assign=v,t.doneInvoke=b,t.forwardTo=_,t.send=m,t.sendParent=g,t.sendUpdate=y},3974:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(552),o=n(7108),a=n(7556),s=n(3487),c=n(1428),u=n(9660),l=n(509),d=n(1312),f=n(880),p=n(7088),h=n(298),v=n(7962),m=n(6590),g={sync:!1,autoForward:!1};t.InterpreterStatus=void 0,(r=t.InterpreterStatus||(t.InterpreterStatus={}))[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped";var y=function(){function e(n,r){var a=this;void 0===r&&(r=e.defaultOptions),this.machine=n,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=t.InterpreterStatus.NotStarted,this.children=new Map,this.forwardTo=new Set,this.init=this.start,this.send=function(e,n){if(l.isArray(e))return a.batch(e),a.state;var r=l.toSCXMLEvent(l.toEventObject(e,n));if(a.status===t.InterpreterStatus.Stopped)return u.IS_PRODUCTION||l.warn(!1,'Event "'.concat(r.name,'" was sent to stopped service "').concat(a.machine.id,'". This service has already reached its final state, and will not transition.\nEvent: ').concat(JSON.stringify(r.data))),a.state;if(a.status!==t.InterpreterStatus.Running&&!a.options.deferEvents)throw new Error('Event "'.concat(r.name,'" was sent to uninitialized service "').concat(a.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: ').concat(JSON.stringify(r.data)));return a.scheduler.schedule((function(){a.forward(r);var e=a._nextState(r);a.update(e,r)})),a._state},this.sendTo=function(e,n){var r=a.parent&&(n===o.SpecialTargets.Parent||a.parent.id===n),d=r?a.parent:l.isString(n)?a.children.get(n)||p.registry.get(n):l.isActor(n)?n:void 0;if(d)"machine"in d?(a.status!==t.InterpreterStatus.Stopped||a.parent!==d||a.state.done)&&d.send(i.__assign(i.__assign({},e),{name:e.name===s.error?"".concat(c.error(a.id)):e.name,origin:a.sessionId})):d.send(e.data);else{if(!r)throw new Error("Unable to send event to child '".concat(n,"' from service '").concat(a.id,"'."));u.IS_PRODUCTION||l.warn(!1,"Service '".concat(a.id,"' has no parent: unable to send event ").concat(e.type))}},this._exec=function(e,n,r,i){void 0===i&&(i=a.machine.options.actions);var d=e.exec||c.getActionFunction(e.type,i),f=l.isFunction(d)?d:d?d.exec:e.exec;if(f)try{return f(n,r.data,a.machine.config.predictableActionArguments?{action:e,_event:r}:{action:e,state:a.state,_event:r})}catch(e){throw a.parent&&a.parent.send({type:"xstate.error",data:e}),e}switch(e.type){case s.send:var p=e;if("number"==typeof p.delay)return void a.defer(p);p.to?a.sendTo(p._event,p.to):a.send(p._event);break;case s.cancel:a.cancel(e.sendId);break;case s.start:if(a.status!==t.InterpreterStatus.Running)return;var h=e.activity;if(!a.machine.config.predictableActionArguments&&!a.state.activities[h.id||h.type])break;if(h.type===o.ActionTypes.Invoke){var v=l.toInvokeSource(h.src),m=a.machine.options.services?a.machine.options.services[v.type]:void 0,g=h.id,y=h.data;u.IS_PRODUCTION||l.warn(!("forward"in h),"`forward` property is deprecated (found in invocation of '".concat(h.src,"' in in machine '").concat(a.machine.id,"'). ")+"Please use `autoForward` instead.");var _="autoForward"in h?h.autoForward:!!h.forward;if(!m)return void(u.IS_PRODUCTION||l.warn(!1,"No service found for invocation '".concat(h.src,"' in machine '").concat(a.machine.id,"'.")));var b=y?l.mapContext(y,n,r):void 0;if("string"==typeof m)return;var E=l.isFunction(m)?m(n,r.data,{data:b,src:v,meta:h.meta}):m;if(!E)return;var S=void 0;l.isMachine(E)&&(E=b?E.withContext(b):E,S={autoForward:_}),a.spawn(E,g,S)}else a.spawnActivity(h);break;case s.stop:a.stopChild(e.activity.id);break;case s.log:var w=e.label,x=e.value;w?a.logger(w,x):a.logger(x);break;default:u.IS_PRODUCTION||l.warn(!1,"No implementation found for action type '".concat(e.type,"'"))}};var f=i.__assign(i.__assign({},e.defaultOptions),r),h=f.clock,v=f.logger,m=f.parent,g=f.id,y=void 0!==g?g:n.id;this.id=y,this.logger=v,this.clock=h,this.parent=m,this.options=f,this.scheduler=new d.Scheduler({deferEvents:this.options.deferEvents}),this.sessionId=p.registry.bookId()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:v.provide(this,(function(){return e._initialState=e.machine.initialState,e._initialState}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return u.IS_PRODUCTION||l.warn(this.status!==t.InterpreterStatus.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first.")),this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(e,t){var n,r;try{for(var o=i.__values(e.actions),a=o.next();!a.done;a=o.next()){var s=a.value;this.exec(s,e,t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.update=function(e,t){var n,r,o,a,s,u,d,f,p=this;if(e._sessionid=this.sessionId,this._state=e,this.machine.config.predictableActionArguments&&t!==c.initEvent||!this.options.execute||this.execute(this.state),this.children.forEach((function(e){p.state.children[e.id]=e})),this.devTools&&this.devTools.send(t.data,e),e.event)try{for(var h=i.__values(this.eventListeners),v=h.next();!v.done;v=h.next())(0,v.value)(e.event)}catch(e){n={error:e}}finally{try{v&&!v.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}try{for(var m=i.__values(this.listeners),g=m.next();!g.done;g=m.next())(0,g.value)(e,e.event)}catch(e){o={error:e}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}try{for(var y=i.__values(this.contextListeners),_=y.next();!_.done;_=y.next())(0,_.value)(this.state.context,this.state.history?this.state.history.context:void 0)}catch(e){s={error:e}}finally{try{_&&!_.done&&(u=y.return)&&u.call(y)}finally{if(s)throw s.error}}if(this.state.done){var b=e.configuration.find((function(e){return"final"===e.type&&e.parent===p.machine})),E=b&&b.doneData?l.mapContext(b.doneData,e.context,t):void 0;try{for(var S=i.__values(this.doneListeners),w=S.next();!w.done;w=S.next())(0,w.value)(c.doneInvoke(this.id,E))}catch(e){d={error:e}}finally{try{w&&!w.done&&(f=S.return)&&f.call(S)}finally{if(d)throw d.error}}this._stop(),this._stopChildren()}},e.prototype.onTransition=function(e){return this.listeners.add(e),this.status===t.InterpreterStatus.Running&&e(this.state,this.state.event),this},e.prototype.subscribe=function(e,n,r){var i=this,o=l.toObserver(e,n,r);this.listeners.add(o.next),this.status!==t.InterpreterStatus.NotStarted&&o.next(this.state);var a=function(){i.doneListeners.delete(a),i.stopListeners.delete(a),o.complete()};return this.status===t.InterpreterStatus.Stopped?o.complete():(this.onDone(a),this.onStop(a)),{unsubscribe:function(){i.listeners.delete(o.next),i.doneListeners.delete(a),i.stopListeners.delete(a)}}},e.prototype.onEvent=function(e){return this.eventListeners.add(e),this},e.prototype.onSend=function(e){return this.sendListeners.add(e),this},e.prototype.onChange=function(e){return this.contextListeners.add(e),this},e.prototype.onStop=function(e){return this.stopListeners.add(e),this},e.prototype.onDone=function(e){return this.doneListeners.add(e),this},e.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},e.prototype.start=function(e){var n=this;if(this.status===t.InterpreterStatus.Running)return this;this.machine._init(),p.registry.register(this.sessionId,this),this.initialized=!0,this.status=t.InterpreterStatus.Running;var r=void 0===e?this.initialState:v.provide(this,(function(){return a.isStateConfig(e)?n.machine.resolveState(e):n.machine.resolveState(a.State.from(e,n.machine.context))}));return this.options.devTools&&this.attachDev(),this.scheduler.initialize((function(){n.update(r,c.initEvent)})),this},e.prototype._stopChildren=function(){this.children.forEach((function(e){l.isFunction(e.stop)&&e.stop()})),this.children.clear()},e.prototype._stop=function(){var e,n,r,o,a,s,c,u,l,f;try{for(var p=i.__values(this.listeners),h=p.next();!h.done;h=p.next()){var v=h.value;this.listeners.delete(v)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(n=p.return)&&n.call(p)}finally{if(e)throw e.error}}try{for(var m=i.__values(this.stopListeners),g=m.next();!g.done;g=m.next())(v=g.value)(),this.stopListeners.delete(v)}catch(e){r={error:e}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(r)throw r.error}}try{for(var y=i.__values(this.contextListeners),_=y.next();!_.done;_=y.next())v=_.value,this.contextListeners.delete(v)}catch(e){a={error:e}}finally{try{_&&!_.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}try{for(var b=i.__values(this.doneListeners),E=b.next();!E.done;E=b.next())v=E.value,this.doneListeners.delete(v)}catch(e){c={error:e}}finally{try{E&&!E.done&&(u=b.return)&&u.call(b)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=t.InterpreterStatus.Stopped,this._initialState=void 0;try{for(var S=i.__values(Object.keys(this.delayedEventsMap)),w=S.next();!w.done;w=S.next()){var x=w.value;this.clock.clearTimeout(this.delayedEventsMap[x])}}catch(e){l={error:e}}finally{try{w&&!w.done&&(f=S.return)&&f.call(S)}finally{if(l)throw l.error}}this.scheduler.clear(),this.scheduler=new d.Scheduler({deferEvents:this.options.deferEvents})},e.prototype.stop=function(){var e=this,t=this.scheduler;return this._stop(),t.schedule((function(){var t=l.toSCXMLEvent({type:"xstate.stop"}),n=v.provide(e,(function(){var n=l.flatten(i.__spreadArray([],i.__read(e.state.configuration),!1).sort((function(e,t){return t.order-e.order})).map((function(t){return c.toActionObjects(t.onExit,e.machine.options.actions)}))),r=i.__read(c.resolveActions(e.machine,e.state,e.state.context,t,n,e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),u=r[0],d=r[1],f=new a.State({value:e.state.value,context:d,_event:t,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:u.filter((function(e){return e.type!==s.raise&&(e.type!==s.send||!!e.to&&e.to!==o.SpecialTargets.Internal)})),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return f.changed=!0,f}));e.update(n,t),e._stopChildren(),p.registry.free(e.sessionId)})),this},e.prototype.batch=function(e){var n=this;if(this.status===t.InterpreterStatus.NotStarted&&this.options.deferEvents)u.IS_PRODUCTION||l.warn(!1,"".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'" and are deferred. Make sure .start() is called for this service.\nEvent: ').concat(JSON.stringify(event)));else if(this.status!==t.InterpreterStatus.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));this.scheduler.schedule((function(){var t,r,o=n.state,s=!1,c=[],u=function(e){var t=l.toSCXMLEvent(e);n.forward(t),o=v.provide(n,(function(){return n.machine.transition(o,t)})),c.push.apply(c,i.__spreadArray([],i.__read(o.actions.map((function(e){return a.bindActionToState(e,o)}))),!1)),s=s||!!o.changed};try{for(var d=i.__values(e),f=d.next();!f.done;f=d.next())u(f.value)}catch(e){t={error:e}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}o.changed=s,o.actions=c,n.update(o,l.toSCXMLEvent(e[e.length-1]))}))},e.prototype.sender=function(e){return this.send.bind(this,e)},e.prototype._nextState=function(e,t){var n=this;void 0===t&&(t=!!this.machine.config.predictableActionArguments&&this._exec);var r=l.toSCXMLEvent(e);if(0===r.name.indexOf(s.errorPlatform)&&!this.state.nextEvents.some((function(e){return 0===e.indexOf(s.errorPlatform)})))throw r.data.data;return v.provide(this,(function(){return n.machine.transition(n.state,r,void 0,t||void 0)}))},e.prototype.nextState=function(e){return this._nextState(e,!1)},e.prototype.forward=function(e){var t,n;try{for(var r=i.__values(this.forwardTo),o=r.next();!o.done;o=r.next()){var a=o.value,s=this.children.get(a);if(!s)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(a,"'."));s.send(e)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.defer=function(e){var t=this;this.delayedEventsMap[e.id]=this.clock.setTimeout((function(){e.to?t.sendTo(e._event,e.to):t.send(e._event)}),e.delay)},e.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},e.prototype.exec=function(e,t,n){void 0===n&&(n=this.machine.options.actions),this._exec(e,t.context,t._event,n)},e.prototype.removeChild=function(e){var t;this.children.delete(e),this.forwardTo.delete(e),null===(t=this.state)||void 0===t||delete t.children[e]},e.prototype.stopChild=function(e){var t=this.children.get(e);t&&(this.removeChild(e),l.isFunction(t.stop)&&t.stop())},e.prototype.spawn=function(e,n,r){if(this.status!==t.InterpreterStatus.Running)return f.createDeferredActor(e,n);if(l.isPromiseLike(e))return this.spawnPromise(Promise.resolve(e),n);if(l.isFunction(e))return this.spawnCallback(e,n);if(f.isSpawnedActor(e))return this.spawnActor(e,n);if(l.isObservable(e))return this.spawnObservable(e,n);if(l.isMachine(e))return this.spawnMachine(e,i.__assign(i.__assign({},r),{id:n}));if(l.isBehavior(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},e.prototype.spawnMachine=function(t,n){var r=this;void 0===n&&(n={});var o=new e(t,i.__assign(i.__assign({},this.options),{parent:this,id:n.id||t.id})),a=i.__assign(i.__assign({},g),n);a.sync&&o.onTransition((function(e){r.send(s.update,{state:e,id:o.id})}));var c=o;return this.children.set(o.id,c),a.autoForward&&this.forwardTo.add(o.id),o.onDone((function(e){r.removeChild(o.id),r.send(l.toSCXMLEvent(e,{origin:o.id}))})).start(),c},e.prototype.spawnBehavior=function(e,t){var n=m.spawnBehavior(e,{id:t,parent:this});return this.children.set(t,n),n},e.prototype.spawnPromise=function(e,t){var n,r,i=this,o=!1;e.then((function(e){o||(r=e,i.removeChild(t),i.send(l.toSCXMLEvent(c.doneInvoke(t,e),{origin:t})))}),(function(e){if(!o){i.removeChild(t);var n=c.error(t,e);try{i.send(l.toSCXMLEvent(n,{origin:t}))}catch(r){l.reportUnhandledExceptionOnInvocation(e,r,t),i.devTools&&i.devTools.send(n,i.state),i.machine.strict&&i.stop()}}}));var a=((n={id:t,send:function(){},subscribe:function(t,n,r){var i=l.toObserver(t,n,r),o=!1;return e.then((function(e){o||(i.next(e),o||i.complete())}),(function(e){o||i.error(e)})),{unsubscribe:function(){return o=!0}}},stop:function(){o=!0},toJSON:function(){return{id:t}},getSnapshot:function(){return r}})[l.symbolObservable]=function(){return this},n);return this.children.set(t,a),a},e.prototype.spawnCallback=function(e,t){var n,r,i,o=this,a=!1,s=new Set,u=new Set;try{i=e((function(e){r=e,u.forEach((function(t){return t(e)})),a||o.send(l.toSCXMLEvent(e,{origin:t}))}),(function(e){s.add(e)}))}catch(e){this.send(c.error(t,e))}if(l.isPromiseLike(i))return this.spawnPromise(i,t);var d=((n={id:t,send:function(e){return s.forEach((function(t){return t(e)}))},subscribe:function(e){var t=l.toObserver(e);return u.add(t.next),{unsubscribe:function(){u.delete(t.next)}}},stop:function(){a=!0,l.isFunction(i)&&i()},toJSON:function(){return{id:t}},getSnapshot:function(){return r}})[l.symbolObservable]=function(){return this},n);return this.children.set(t,d),d},e.prototype.spawnObservable=function(e,t){var n,r,i=this,o=e.subscribe((function(e){r=e,i.send(l.toSCXMLEvent(e,{origin:t}))}),(function(e){i.removeChild(t),i.send(l.toSCXMLEvent(c.error(t,e),{origin:t}))}),(function(){i.removeChild(t),i.send(l.toSCXMLEvent(c.doneInvoke(t),{origin:t}))})),a=((n={id:t,send:function(){},subscribe:function(t,n,r){return e.subscribe(t,n,r)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return r},toJSON:function(){return{id:t}}})[l.symbolObservable]=function(){return this},n);return this.children.set(t,a),a},e.prototype.spawnActor=function(e,t){return this.children.set(t,e),e},e.prototype.spawnActivity=function(e){var t=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(t){var n=t(this.state.context,e);this.spawnEffect(e.id,n)}else u.IS_PRODUCTION||l.warn(!1,"No implementation found for activity '".concat(e.type,"'"))},e.prototype.spawnEffect=function(e,t){var n;this.children.set(e,((n={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:t||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}})[l.symbolObservable]=function(){return this},n))},e.prototype.attachDev=function(){var e=h.getGlobal();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var t="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(i.__assign(i.__assign({name:this.id,autoPause:!0,stateSanitizer:function(e){return{value:e.value,context:e.context,actions:e.actions}}},t),{features:i.__assign({jump:!1,skip:!1},t?t.features:void 0)}),this.machine),this.devTools.init(this.state)}h.registerService(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[l.symbolObservable]=function(){return this},e.prototype.getSnapshot=function(){return this.status===t.InterpreterStatus.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,t){return setTimeout(e,t)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},e.interpret=_,e}();function _(e,t){return new y(e,t)}t.Interpreter=y,t.interpret=_,t.spawn=function(e,t){var n=function(e){return l.isString(e)?i.__assign(i.__assign({},g),{name:e}):i.__assign(i.__assign(i.__assign({},g),{name:l.uniqueId()}),e)}(t);return v.consume((function(t){if(!u.IS_PRODUCTION){var r=l.isMachine(e)||l.isFunction(e);l.warn(!!t||r,'Attempted to spawn an Actor (ID: "'.concat(l.isMachine(e)?e.id:"undefined",'") outside of a service. This will have no effect.'))}return t?t.spawn(e,n.name,n):f.createDeferredActor(e,n.name)}))}},290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(552);n(7108);var i=n(3487);function o(e){return"string"==typeof e?{type:e,toString:function(){return e}}:e}n(509),n(9660),t.toInvokeDefinition=function(e){return r.__assign(r.__assign({type:i.invoke},e),{toJSON:function(){e.onDone,e.onError;var t=r.__rest(e,["onDone","onError"]);return r.__assign(r.__assign({},t),{type:i.invoke,src:o(e.src)})}})},t.toInvokeSource=o},4404:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(552),i=n(509);t.mapState=function(e,t){var n,o,a;try{for(var s=r.__values(Object.keys(e)),c=s.next();!c.done;c=s.next()){var u=c.value;i.matchesState(u,t)&&(!a||t.length>a.length)&&(a=u)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return e[a]}},5484:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(552),i=n(7556);t.matchState=function(e,t,n){var o,a,s=i.State.from(e,e instanceof i.State?e.context:void 0);try{for(var c=r.__values(t),u=c.next();!u.done;u=c.next()){var l=r.__read(u.value,2),d=l[0],f=l[1];if(s.matches(d))return f(s)}}catch(e){o={error:e}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}return n(s)}},6310:(e,t,n)=>{"use strict";var r=n(552),i=n(1428),o=n(5294),a=n(509);t.N=function(e,t){var n=null==t?void 0:t.events,s=null==t?void 0:t.actions,c={initialContext:e,assign:i.assign,events:n?a.mapValues(n,(function(e,t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r.__assign(r.__assign({},e.apply(void 0,r.__spreadArray([],r.__read(n),!1))),{type:t})}})):void 0,actions:s?a.mapValues(s,(function(e,t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r.__assign(r.__assign({},e.apply(void 0,r.__spreadArray([],r.__read(n),!1))),{type:t})}})):void 0,reset:function(){return i.assign(e)},createMachine:function(t,n){return o.createMachine("context"in t?t:r.__assign(r.__assign({},t),{context:e}),n)}};return c}},7088:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new Map,r=0,i={bookId:function(){return"x:".concat(r++)},register:function(e,t){return n.set(e,t),e},get:function(e){return n.get(e)},free:function(e){n.delete(e)}};t.registry=i},1312:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(552),i={deferEvents:!1},o=function(){function e(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=r.__assign(r.__assign({},i),e)}return e.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents)return void this.schedule(e);this.process(e)}this.flushEvents()},e.prototype.schedule=function(e){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()}else this.queue.push(e)},e.prototype.clear=function(){this.queue=[]},e.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},e.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(e){throw this.clear(),e}finally{this.processingEvent=!1}},e}();t.Scheduler=o},7422:(e,t)=>{"use strict";function n(e){return e}Object.defineProperty(t,"__esModule",{value:!0});var r=n;t.createSchema=n,t.t=r},7962:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=[];t.consume=function(e){return e(n[n.length-1])},t.provide=function(e,t){n.push(e);var r=t(e);return n.pop(),r}},2119:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(552),i=n(509),o=function(e){return"atomic"===e.type||"final"===e.type};function a(e){return Object.keys(e.states).map((function(t){return e.states[t]}))}function s(e){return a(e).filter((function(e){return"history"!==e.type}))}function c(e,t){var n,i,o,a,c,u,d,f,p=l(new Set(e)),h=new Set(t);try{for(var v=r.__values(h),m=v.next();!m.done;m=v.next())for(var g=(I=m.value).parent;g&&!h.has(g);)h.add(g),g=g.parent}catch(e){n={error:e}}finally{try{m&&!m.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}var y=l(h);try{for(var _=r.__values(h),b=_.next();!b.done;b=_.next())if("compound"!==(I=b.value).type||y.get(I)&&y.get(I).length){if("parallel"===I.type)try{for(var E=(c=void 0,r.__values(s(I))),S=E.next();!S.done;S=E.next()){var w=S.value;h.has(w)||(h.add(w),p.get(w)?p.get(w).forEach((function(e){return h.add(e)})):w.initialStateNodes.forEach((function(e){return h.add(e)})))}}catch(e){c={error:e}}finally{try{S&&!S.done&&(u=E.return)&&u.call(E)}finally{if(c)throw c.error}}}else p.get(I)?p.get(I).forEach((function(e){return h.add(e)})):I.initialStateNodes.forEach((function(e){return h.add(e)}))}catch(e){o={error:e}}finally{try{b&&!b.done&&(a=_.return)&&a.call(_)}finally{if(o)throw o.error}}try{for(var x=r.__values(h),O=x.next();!O.done;O=x.next()){var I;for(g=(I=O.value).parent;g&&!h.has(g);)h.add(g),g=g.parent}}catch(e){d={error:e}}finally{try{O&&!O.done&&(f=x.return)&&f.call(x)}finally{if(d)throw d.error}}return h}function u(e,t){var n=t.get(e);if(!n)return{};if("compound"===e.type){var r=n[0];if(!r)return{};if(o(r))return r.key}var i={};return n.forEach((function(e){i[e.key]=u(e,t)})),i}function l(e){var t,n,i=new Map;try{for(var o=r.__values(e),a=o.next();!a.done;a=o.next()){var s=a.value;i.has(s)||i.set(s,[]),s.parent&&(i.has(s.parent)||i.set(s.parent,[]),i.get(s.parent).push(s))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}function d(e,t){return Array.isArray(e)?e.some((function(e){return e===t})):e instanceof Set&&e.has(t)}t.getAdjList=l,t.getAllChildren=a,t.getAllStateNodes=function e(t){var n=[t];return o(t)?n:n.concat(i.flatten(s(t).map(e)))},t.getChildren=s,t.getConfiguration=c,t.getMeta=function(e){return void 0===e&&(e=[]),e.reduce((function(e,t){return void 0!==t.meta&&(e[t.id]=t.meta),e}),{})},t.getTagsFromConfiguration=function(e){return new Set(i.flatten(e.map((function(e){return e.tags}))))},t.getValue=function(e,t){return u(e,l(c([e],t)))},t.has=d,t.isInFinalState=function e(t,n){return"compound"===n.type?s(n).some((function(e){return"final"===e.type&&d(t,e)})):"parallel"===n.type&&s(n).every((function(n){return e(t,n)}))},t.isLeafNode=o,t.nextEvents=function(e){return r.__spreadArray([],r.__read(new Set(i.flatten(r.__spreadArray([],r.__read(e.map((function(e){return e.ownEvents}))),!1)))),!1)}},7108:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0,(n=t.ActionTypes||(t.ActionTypes={})).Start="xstate.start",n.Stop="xstate.stop",n.Raise="xstate.raise",n.Send="xstate.send",n.Cancel="xstate.cancel",n.NullEvent="",n.Assign="xstate.assign",n.After="xstate.after",n.DoneState="done.state",n.DoneInvoke="done.invoke",n.Log="xstate.log",n.Init="xstate.init",n.Invoke="xstate.invoke",n.ErrorExecution="error.execution",n.ErrorCommunication="error.communication",n.ErrorPlatform="error.platform",n.ErrorCustom="xstate.error",n.Update="xstate.update",n.Pure="xstate.pure",n.Choose="xstate.choose",t.SpecialTargets=void 0,(r=t.SpecialTargets||(t.SpecialTargets={})).Parent="#_parent",r.Internal="#_internal"},509:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(552),o=n(9448),a=n(9660);function s(e,t){try{return m(e)?e:e.toString().split(t)}catch(t){throw new Error("'".concat(e,"' is not a valid state path."))}}function c(e){return"object"==typeof e&&"value"in e&&"context"in e&&"event"in e&&"_event"in e}function u(e,t){return c(e)?e.value:m(e)?l(e):"string"!=typeof e?e:l(s(e,t))}function l(e){if(1===e.length)return e[0];for(var t={},n=t,r=0;r<e.length-1;r++)r===e.length-2?n[e[r]]=e[r+1]:(n[e[r]]={},n=n[e[r]]);return t}function d(e,t){for(var n={},r=Object.keys(e),i=0;i<r.length;i++){var o=r[i];n[o]=t(e[o],o,e,i)}return n}function f(e){var t;return(t=[]).concat.apply(t,i.__spreadArray([],i.__read(e),!1))}function p(e){return m(e)?e:[e]}function h(e){return void 0===e?[]:p(e)}function v(e,t){return d(e.states,(function(e,n){if(e){var r=(y(t)?void 0:t[n])||(e?e.current:void 0);if(r)return{current:r,states:v(e,r)}}}))}function m(e){return Array.isArray(e)}function g(e){return"function"==typeof e}function y(e){return"string"==typeof e}t.warn=function(){},a.IS_PRODUCTION||(t.warn=function(e,t){var n=e instanceof Error?e:void 0;if((n||!e)&&void 0!==console){var r=["Warning: ".concat(t)];n&&r.push(n),console.warn.apply(console,r)}});var _=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}(),b=((r={})[_]=function(){return this},r[Symbol.observable]=function(){return this},r);function E(e){return!!e&&"__xstatenode"in e}var S=function(){var e=0;return function(){return(++e).toString(16)}}();function w(e,t){return y(e)||"number"==typeof e?i.__assign({type:e},t):e}t.createInvokeId=function(e,t){return"".concat(e,":invocation[").concat(t,"]")},t.evaluateGuard=function(e,t,n,r,i){var a=e.options.guards,s={state:i,cond:t,_event:r};if(t.type===o.DEFAULT_GUARD_TYPE)return((null==a?void 0:a[t.name])||t.predicate)(n,r.data,s);var c=null==a?void 0:a[t.type];if(!c)throw new Error("Guard '".concat(t.type,"' is not implemented on machine '").concat(e.id,"'."));return c(n,r.data,s)},t.flatten=f,t.getActionType=function(e){try{return y(e)||"number"==typeof e?"".concat(e):g(e)?e.name:e.type}catch(e){throw new Error("Actions must be strings or objects with a string action.type property.")}},t.getEventType=function(e){try{return y(e)||"number"==typeof e?"".concat(e):e.type}catch(e){throw new Error("Events must be strings or objects with a string event.type property.")}},t.interopSymbols=b,t.isActor=function(e){return!!e&&"function"==typeof e.send},t.isArray=m,t.isBehavior=function(e){return null!==e&&"object"==typeof e&&"transition"in e&&"function"==typeof e.transition},t.isBuiltInEvent=function(e){return/^(done|error)\./.test(e)},t.isFunction=g,t.isMachine=E,t.isObservable=function(e){try{return"subscribe"in e&&g(e.subscribe)}catch(e){return!1}},t.isPromiseLike=function(e){return e instanceof Promise||!(null===e||!g(e)&&"object"!=typeof e||!g(e.then))},t.isStateLike=c,t.isString=y,t.keys=function(e){return Object.keys(e)},t.mapContext=function(e,t,n){var r,o;if(g(e))return e(t,n.data);var a={};try{for(var s=i.__values(Object.keys(e)),c=s.next();!c.done;c=s.next()){var u=c.value,l=e[u];g(l)?a[u]=l(t,n.data):a[u]=l}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return a},t.mapFilterValues=function(e,t,n){var r,o,a={};try{for(var s=i.__values(Object.keys(e)),c=s.next();!c.done;c=s.next()){var u=c.value,l=e[u];n(l)&&(a[u]=t(l,u,e))}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return a},t.mapValues=d,t.matchesState=function e(t,n,r){void 0===r&&(r=o.STATE_DELIMITER);var i=u(t,r),a=u(n,r);return y(a)?!!y(i)&&a===i:y(i)?i in a:Object.keys(i).every((function(t){return t in a&&e(i[t],a[t])}))},t.nestedPath=function(e,t){return function(n){var r,o,a=n;try{for(var s=i.__values(e),c=s.next();!c.done;c=s.next()){var u=c.value;a=a[t][u]}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return a}},t.normalizeTarget=function(e){if(void 0!==e&&e!==o.TARGETLESS_KEY)return h(e)},t.partition=function(e,t){var n,r,o=i.__read([[],[]],2),a=o[0],s=o[1];try{for(var c=i.__values(e),u=c.next();!u.done;u=c.next()){var l=u.value;t(l)?a.push(l):s.push(l)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return[a,s]},t.path=function(e){return function(t){var n,r,o=t;try{for(var a=i.__values(e),s=a.next();!s.done;s=a.next())o=o[s.value]}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o}},t.pathToStateValue=l,t.pathsToStateValue=function(e){var t,n,r={};if(e&&1===e.length&&1===e[0].length)return e[0][0];try{for(var o=i.__values(e),a=o.next();!a.done;a=o.next())for(var s=a.value,c=r,u=0;u<s.length;u++){var l=s[u];if(u===s.length-2){c[l]=s[u+1];break}c[l]=c[l]||{},c=c[l]}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},t.reportUnhandledExceptionOnInvocation=function(e,t,n){if(!a.IS_PRODUCTION){var r=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";if(e===t)console.error("Missing onError handler for invocation '".concat(n,"', error was '").concat(e,"'.").concat(r));else{var i=t.stack?" Stacktrace was '".concat(t.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(n,"'. ")+"Original error: '".concat(e,"'. ").concat(r," Current error is '").concat(t,"'.").concat(i))}}},t.symbolObservable=_,t.toArray=h,t.toArrayStrict=p,t.toEventObject=w,t.toGuard=function(e,t){if(e)return y(e)?{type:o.DEFAULT_GUARD_TYPE,name:e,predicate:t?t[e]:void 0}:g(e)?{type:o.DEFAULT_GUARD_TYPE,name:e.name,predicate:e}:e},t.toInvokeSource=function(e){return"string"==typeof e?{type:e}:e},t.toObserver=function(e,t,n){var r=function(){},i="object"==typeof e,o=i?e:null;return{next:((i?e.next:e)||r).bind(o),error:((i?e.error:t)||r).bind(o),complete:((i?e.complete:n)||r).bind(o)}},t.toSCXMLEvent=function(e,t){if(!y(e)&&"$$type"in e&&"scxml"===e.$$type)return e;var n=w(e);return i.__assign({name:n.type,data:n,$$type:"scxml",type:"external"},t)},t.toStatePath=s,t.toStatePaths=function e(t){return t?y(t)?[[t]]:f(Object.keys(t).map((function(n){var r=t[n];return"string"==typeof r||r&&Object.keys(r).length?e(t[n]).map((function(e){return[n].concat(e)})):[[n]]}))):[[]]},t.toStateValue=u,t.toTransitionConfigArray=function(e,t){return p(t).map((function(t){return void 0===t||"string"==typeof t||E(t)?{target:t,event:e}:i.__assign(i.__assign({},t),{event:e})}))},t.uniqueId=S,t.updateContext=function(e,n,r,o){a.IS_PRODUCTION||t.warn(!!e,"Attempting to update undefined context");var s=e?r.reduce((function(e,t){var r,a,s=t.assignment,c={state:o,action:t,_event:n},u={};if(g(s))u=s(e,n.data,c);else try{for(var l=i.__values(Object.keys(s)),d=l.next();!d.done;d=l.next()){var f=d.value,p=s[f];u[f]=g(p)?p(e,n.data,c):p}}catch(e){r={error:e}}finally{try{d&&!d.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}return Object.assign({},e,u)}),e):e;return s},t.updateHistoryStates=v,t.updateHistoryValue=function(e,t){return{current:t,states:v(e,t)}}},5495:e=>{"use strict";e.exports=LIBS.react},6250:e=>{"use strict";e.exports=LIBS["react-dom"]}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="https://static2.tinkoffjournal.ru/eris/835c031f206a9df94d4cb9c2f4df51fa480e51e0/",(()=>{"use strict";var e=n(5495),t=n.n(e),r=n(745);const i="article-comments-microfrontend-app";var o=n(7845),a=n(6310);const s="comments",c="rating",u="date",l=["deleted_by_author","deleted_by_moderator"],d=["visible","editors_choice"],f=5242880,p=["image/png","image/jpg","image/jpeg","image/gif"],h="journal@tinkoff.ru",v={commentsCollection:{byId:{},sortKind:c,tree:{itemsById:[],branches:[]}},articleUUID:"",reloadCount:0},m=(0,a.N)(v,{events:{getComments:()=>({}),sortComments:e=>({sortKind:e}),addComment:e=>({comment:e}),updateComment:e=>({comment:e}),banComment:e=>({comment:e}),invokeSuccessAction:e=>({data:e}),invokeErrorAction:e=>({data:e})}});var g=n(4184),y=n.n(g),_=n(4881),b=n(332),E=n(7092);function S(e,t){E.withScope((n=>{n.setTransactionName(e),E.captureException(new Error(JSON.stringify(t)))}))}function w(e,t){if("string"==typeof e[t])return e[t];throw new Error("Invalid value")}const{SOCIAL_API_URL:x,URANIA_API_URL:O}=(0,b._)({SOCIAL_API_URL:w,URANIA_API_URL:w,SENTRY_DSN:w,NODE_ENV:w},function(){const e=document.querySelector(`script[data-id=${i}]`);return JSON.parse(e?.innerHTML||"{}").env}(),{handleError(e){console.error(e),S("Variables error",e)}}),I=x+"/api/v20/",A=O+"/api/v10/";function C(e){return e.json().then((t=>{if(!e.ok||"ok"!==t.status){const n=t?.error?.code||e.statusText;return S("HandleResponse Error",t||e),Promise.reject(n)}return t.data})).catch((e=>Promise.reject(String(e))))}function T(e,t){const n=function(e){if(!document.cookie)return null;const t=document.cookie.split(";").map((e=>e.trim())).filter((e=>e.startsWith("x_csrf=")));return 0===t.length?null:decodeURIComponent(t[0].split("=")[1])}(),r={method:e,credentials:"include",headers:{"Content-Type":"application/json"}};return n&&(r.headers={...r.headers,"X-CSRFToken":n}),t&&(r.body=JSON.stringify(t)),r}const k=function(e){return fetch(e,T("GET")).then((e=>C(e)))},N=function(e,t){return fetch(e,T("POST",t)).then((e=>C(e)))},P=function(e,t){return fetch(e,T("PUT",t)).then((e=>{if(204!==e.status)return C(e)}))},j=function(e){return fetch(e,T("DELETE")).then((e=>C(e)))},R=function(e){const t=new FormData;t.set("image",e);const n={...T("POST")};return n.body=t,n.headers&&delete n.headers["Content-Type"],fetch(I+"images/",n).then((e=>C(e)))};function M(e,t){const n=new Map;for(const r of e){if(n.size===t)break;n.set(r.id,r)}return n}async function D(e){if(0===e.length)return[];const t=function(e,t){const n=[...e],r=[];for(;n.length>0;){const e=n.splice(0,100);r.push(e)}return r}(e).map((e=>{const t=e.reduce(((e,t)=>[...e,`social_id=${t}`]),[]).join("&");return k(A+`students/progress/?${t}`)}));return(await Promise.all(t)).flat()}async function U(e){const t=(await D([e]))[0];if(!t)throw new Error("STUDENT_NOT_FOUND");return t}function L(e,t){const n=e.author?.id;if(!n)return e;const r=t[n];return r?{...e,author:{...e.author,studentStatus:r}}:e}function B(e,t){const n=t.id,r=t.parent_id,i={itemsById:{...e.itemsById},branches:[...e.branches]};if(r){const e=i.itemsById[r];if(e){const t={commentId:n,parentId:r,level:e.level+1};i.itemsById[n]=t,e.children=e.children?[t,...e.children]:[t],i.branches=F(i.branches,e)}}else{const e={commentId:n,parentId:void 0,level:0};i.itemsById[n]=e,i.branches=[e,...i.branches]}return i}function F(e,t){return e.map((e=>e.commentId===t.commentId?t:e.children?{...e,children:F(e.children,t)}:e))}function G(e,t,n){let r=[...e.branches];return r=H(r,t,n===u?z:q),{itemsById:e.itemsById,branches:r}}const H=(e,t,n)=>{const r=[...e];for(const e of r)e.children&&(e.children=H(e.children,t,n));return r.sort(((e,r)=>{const i=t[e.commentId],o=t[r.commentId];return i&&o?n(i,o):0}))};function q(e,t){const n=l.includes(e.status),r=l.includes(t.status);if(n!==r)return Number(n)-Number(r);const i="editors_choice"===e.status,o="editors_choice"===t.status;if(i!==o)return Number(o)-Number(i);const a=e.rating.likes-e.rating.dislikes;return t.rating.likes-t.rating.dislikes-a}function z(e,t){return new Date(e.date_added||0).getTime()-new Date(t.date_added||0).getTime()}function V(e,t){const{commentId:n,children:r}=e,i=t[n];return!!i&&(!!d.includes(i.status)||!!r&&r.some((e=>V(e,t))))}function X(e){const t=[];return function e(n){n?.forEach((n=>{t.push(n.commentId),e(n.children)}))}(e),t}function W(e,t){const{branches:n,byId:r,itemsById:i}=function(e){const t=[],n={},r={};for(let t=0;t<e.length;t++){const i=e[t];n[i.id]={commentId:i.id,parentId:i.parent_id||0,level:i.level||0},r[i.id]=i}for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const r=n[e],i=r.parentId;if(i&&n[i]){const e=n[i];e.children=[r,...e.children||[]]}else t.push(r)}return{itemsById:n,branches:t,byId:r}}(e),o=n.filter((e=>!!V(e,r)||([e.commentId,...X(e.children)].forEach((e=>{delete r[e],delete i[e]})),!1)));return{byId:r,sortKind:t,tree:G({itemsById:i,branches:o},r,t)}}const K=(0,a.N)({id:0,method:"up",rating:{user_vote:0,likes:0,dislikes:0,vote:0},error:void 0},{events:{voteComment:(e,t,n)=>({id:e,method:t,rating:n}),invokeErrorAction:e=>({data:e})}}),J=K.createMachine({id:"vote",initial:"idle",context:K.initialContext,states:{idle:{},loading:{invoke:{id:"fetch-vote",src:"voteInvoke",onDone:{target:"success",actions:(0,_.sendParent)(((e,t)=>{let{id:n}=e,{data:r}=t;return m.events.updateComment({id:n,rating:r})}))},onError:{target:"failure",actions:K.assign({error:(e,t)=>{let{data:n}=t;return n}},"invokeErrorAction")}}},success:{after:{0:{target:"idle",actions:K.assign({id:0,method:"up",rating:void 0,error:void 0})}}},failure:{after:{0:{actions:(0,_.sendParent)((e=>{let{id:t,rating:n}=e;return m.events.updateComment({id:t,rating:{user_vote:n.user_vote,likes:n.likes,dislikes:n.dislikes}})}))}}}},on:{voteComment:{target:"loading",actions:[K.assign({id:(e,t)=>{let{id:n}=t;return n},method:(e,t)=>{let{method:n}=t;return n},rating:(e,t)=>{let{rating:n}=t;return n},error:void 0}),(0,_.sendParent)(((e,t)=>{let{id:n,rating:r}=t;return m.events.updateComment({id:n,rating:{user_vote:r.vote,likes:r.likes,dislikes:r.dislikes}})}))]}}},{services:{voteInvoke:e=>{let{id:t,method:n}=e;return P(I+`comments/${t}/vote/`,{method:n})}}}),Y=(0,a.N)({id:void 0,error:void 0},{events:{deleteComment:e=>({id:e}),invokeErrorAction:e=>({data:e})}}),Z=Y.createMachine({id:"delete",initial:"idle",context:Y.initialContext,states:{idle:{on:{deleteComment:{target:"loading",actions:Y.assign({id:(e,t)=>{let{id:n}=t;return n}})}}},loading:{invoke:{id:"fetch-delete",src:"deleteInvoke",onDone:{target:"success",actions:(0,_.sendParent)(((e,t)=>{let{data:n}=t;return m.events.updateComment({id:n.id,status:n.status,is_restore:!0})}))},onError:{target:"failure",actions:Y.assign({error:(e,t)=>{let{data:n}=t;return n}},"invokeErrorAction")}}},success:{after:{0:{target:"idle",actions:Y.assign({id:void 0,error:void 0})}}},failure:{}}},{services:{deleteInvoke:e=>{let{id:t}=e;return j(I+`comments/${t}/`)}}}),Q=(0,a.N)({id:0,is_editors_choice:!1,error:void 0},{events:{editorsChoiceComment:(e,t)=>({id:e,is_editors_choice:t}),invokeErrorAction:e=>({data:e})}}),$=Q.createMachine({id:"editors-choice",initial:"idle",context:Q.initialContext,states:{idle:{on:{editorsChoiceComment:{target:"loading",actions:Q.assign(((e,t)=>t))}}},loading:{invoke:{id:"fetch-editors-choice",src:"editorsChoiceInvoke",onDone:{target:"success",actions:(0,_.sendParent)((e=>{let{id:t,is_editors_choice:n}=e;return m.events.updateComment({id:t,status:n?"editors_choice":"visible"})}))},onError:{target:"failure",actions:Q.assign({error:(e,t)=>{let{data:n}=t;return n}},"invokeErrorAction")}}},success:{after:{0:{target:"idle",actions:Q.assign({id:void 0,is_editors_choice:!1,error:void 0})}}},failure:{}}},{services:{editorsChoiceInvoke:e=>{let{id:t,is_editors_choice:n}=e;return P(I+`comments/${t}/editors_choice/`,{is_editors_choice:n})}}}),ee=(0,a.N)({action:"ban",comment_id:0,author_id:0,reason:"",period:"",started_at:"",seconds_to_unban:0,error:void 0},{events:{banComment:(e,t,n,r,i,o)=>({author_id:e,comment_id:t,reason:n,period:r,started_at:i,seconds_to_unban:o}),unbanComment:(e,t)=>({author_id:e,comment_id:t}),invokeErrorAction:e=>({data:e})}}),te=ee.createMachine({id:"ban",initial:"idle",context:ee.initialContext,states:{idle:{on:{banComment:{target:"loading",actions:ee.assign(((e,t)=>({action:"ban",...t})))},unbanComment:{target:"loading",actions:ee.assign(((e,t)=>({action:"unban",...t})))}}},loading:{invoke:{id:"fetch-ban",src:"banInvoke",onDone:{target:"success",actions:(0,_.sendParent)((e=>m.events.banComment(e)))},onError:{target:"failure",actions:ee.assign({error:(e,t)=>{let{data:n}=t;return n}},"invokeErrorAction")}}},success:{after:{0:{target:"idle",actions:ee.assign({comment_id:0,author_id:0,reason:"",period:"",started_at:"",seconds_to_unban:0,error:void 0})}}},failure:{}}},{services:{banInvoke:e=>{let{comment_id:t,author_id:n,reason:r,period:i,action:o}=e;return N(I+`profiles/${n}/${o}/`,{comment_id:t,reason:r,period:i})}}}),ne=(0,a.N)({id:0,method:"up",error:void 0},{events:{restoreComment:e=>({id:e}),invokeErrorAction:e=>({data:e})}}),re=ne.createMachine({id:"restore",initial:"idle",context:ne.initialContext,states:{idle:{on:{restoreComment:{target:"loading",actions:ne.assign({id:(e,t)=>{let{id:n}=t;return n}})}}},loading:{invoke:{id:"fetch-restore",src:"restoreInvoke",onDone:{target:"success",actions:(0,_.sendParent)(((e,t)=>{let{data:n}=t;return m.events.updateComment({id:n.id,status:n.status,is_restore:void 0})}))},onError:{target:"failure",actions:ne.assign({error:(e,t)=>{let{data:n}=t;return n}},"invokeErrorAction")}}},success:{after:{0:{target:"idle",actions:ne.assign({id:void 0,error:void 0})}}},failure:{}}},{services:{restoreInvoke:e=>{let{id:t}=e;return P(I+`comments/${t}/restore/`)}}}),ie=m.createMachine({id:"comments",initial:"idle",context:m.initialContext,entry:m.assign({voteMachine:()=>(0,_.spawn)(J),deleteMachine:()=>(0,_.spawn)(Z),editorsChoiceMachine:()=>(0,_.spawn)($),banMachine:()=>(0,_.spawn)(te),restoreMachine:()=>(0,_.spawn)(re)}),states:{idle:{},loading:{invoke:{id:"get-comments",src:"commentsInvoke",onDone:{target:"success",actions:m.assign({commentsCollection:(e,t)=>{let{data:n}=t;return W(n,c)}},"invokeSuccessAction")},onError:[{target:"failure.wait",cond:e=>(e.reloadCount||0)<3},{target:"failure.finish",actions:m.assign({error:(e,t)=>{let{data:n}=t;return n}},"invokeErrorAction"),cond:e=>3===(e.reloadCount||0)}]}},success:{},failure:{states:{wait:{after:{3e3:{actions:[(0,_.send)(m.events.getComments()),m.assign({reloadCount:e=>Number(e.reloadCount||0)+1},"invokeErrorAction")]}}},finish:{}}}},on:{getComments:{target:"loading"},sortComments:{actions:m.assign({commentsCollection:(e,t)=>{let{sortKind:n}=t;return function(e,t){const n={...e.byId};return{byId:n,sortKind:t,tree:G(e.tree,n,t)}}(e.commentsCollection,n)}})},addComment:{actions:m.assign({commentsCollection:(e,t)=>{let{comment:n}=t;return function(e,t){const n=t.id;return e.byId[n]?e:{byId:{...e.byId,[n]:t},sortKind:e.sortKind,tree:B(e.tree,t)}}(e.commentsCollection,n)}})},updateComment:{actions:m.assign({commentsCollection:(e,t)=>{let{comment:n}=t;return function(e,t){const n=t.id,r=e.byId[n];return r?{byId:{...e.byId,[n]:{...r,...t}},sortKind:e.sortKind,tree:e.tree}:e}(e.commentsCollection,n)}})},banComment:{actions:m.assign({commentsCollection:(e,t)=>{let{comment:n}=t;return function(e,t){const n={...e.byId},r=t.comment_id;return n[r]?(Object.keys(n).forEach((e=>{const i=Number(e),o=n[i],a=o.author;i===r&&(o.ban={reason:t.reason,started_at:t.started_at}),a&&a?.id===t.author_id&&(n[i]={...o,author:{...a,ban:"ban"===t.action?{started_at:t.started_at,reason:t.reason,seconds_to_unban:t.seconds_to_unban}:null}})})),{byId:n,sortKind:e.sortKind,tree:e.tree}):e}(e.commentsCollection,n)}})}}},{services:{commentsInvoke:async function(e){let{articleUUID:t}=e;try{const e=await k(I+`comments/?uuid=${t}&unsafe=true`),n=await async function(e){try{const t=e.map((e=>e.author)).filter((e=>e)),n=Array.from(M(t).values()).map((e=>e.id)),r=await Promise.race([D(n),new Promise(((e,t)=>setTimeout(t,1e4)))]);return r.length>0?r.reduce(((e,t)=>t.status?{...e,[t.social_id]:t.status}:e),{}):{}}catch(e){return{}}}(e);return 0===Object.keys(n).length?e:e.map((e=>L(e,n)))}catch(e){return console.error(e),Promise.reject(e)}}}}),oe="error--WspK4";function ae(e){let{type:n}=e;switch(n){case"comments-all":return t().createElement("div",{className:oe},"    .");case"comments":return t().createElement("div",{className:oe},"   .  ");case"restore":return t().createElement("div",{className:oe},"   ");default:return t().createElement("div",{className:oe},"-   ,  ")}}const se=n.p+"loader-loaf-aa7da19c722c45715bbe.png",ce=n.p+"loader-loaf-eb7e864c3d721028a768.webp";function ue(){return t().createElement("div",{className:"loaderLoad--Ih2U9"},t().createElement("picture",{className:"picture--CmmAB"},t().createElement("source",{srcSet:ce,type:"image/webp"}),t().createElement("source",{srcSet:se,type:"image/jpeg"}),t().createElement("img",{src:se,className:"img--mAxzi",alt:""})))}function le(e){const t=e.getAttribute("id")||"";return parseInt(t)}const de="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAABcVBMVEUAAADq6uq0tLS2traxsbHr6+uvr6/r6+uzs7Pu7u7o6Ojs7Ozu7u6zs7O4uLizs7Ovr6/o6Oizs7O/v7+6urrFxcXu7u6ysrK1tbWzs7Pq6urv7+/g4ODp6ene3t64uLjV1dXt7e3u7u61tbW1tbXZ2dm/v7+3t7fh4eHV1dXc3NzBwcG4uLjr6+vQ0NDJycnu7u7l5eW8vLzDw8Pq6uq0tLTp6em1tbXn5+fl5eXMzMzX19fi4uLl5eXR0dHHx8ff39/MzMy7u7vLy8vAwMDq6urb29vj4+PCwsLPz8/Jycm/v7/l5eXR0dHExMSxsbHR0dHS0tKysrLs7Ozf39/u7u7r6+vt7e20tLTo6Ojm5ubk5OTg4ODi4uLd3d3q6uq3t7fa2tq5ubm8vLzR0dHU1NTX19fCwsK/v7+2trbMzMzJycnPz8/Gxsa7u7vFxcXBwcG+vr7f39/c3NzIyMjW1tbOzs7Z2dnLy8vExMTT09Mv6pseAAAAVXRSTlMAIO9fQGAgQL++EO/fb9/fEHBQQCAQ79/Pr49vQN+/v7Cvn5+PcHBwX0Dv7+/f39/Pv7+wgH9QMO/v79/ez7+/oKCggGAwIN/fz8+vn5CQkHBgYFBQlngG9AAABs9JREFUaN601c2P0mAQBvCmkA0XVsJqgJOHNe5BExONMfFi/DgYTTQxUddvl8WtUr5poeWvd56ZeXlbAVnYvuNl8fLjeWZavJ2nVn739rjSaPinmEaz0npYLdc8t1Outhqna+daq1r23EytWuGQm8dvlQ4cqKeXmkqhdrmVy/pnZXL2cbkotpIlf66fHN8sFcDWG1aF0JYZtAc8bR3Vl7dWKigtogIFd84zljmXkW8guNJXKfxAWIsy+JtnZIY/jcdGt/Tx3mdW9ZWFyiiDAU2apkMe+iPAwGcctNr+w/3jKjuQpDDTYZ8miqKQh/7AZ/oGwJEctqGvHewVF6yGBcomwCTp5iZJwhC+4EK3hfarO7K1W2CxWoRVlUwiZ7Ner5ObXm82Iz4MCRcb61b61m41N5HWslCBsrn4RRPHF5g4jvFpQTzphEfIrbFR+G51P7qmuwUbBKwChQlwPj/LzHyOb8B6T+0gAI1d7yTX/VM9KaQFS2qnwyiR0+l3ngmN/DWdEs8420t6ILRfv5xbkriG5bCkCgrvK+abDn/ANwBO9kJiE43Cte/S5Vxt2bAIG5MKVMQv+VEfuLENjb5V3u6auEHaj8AuKCzUpfl5ZZgHDvviAjQKTwMTertc50d3wHGjUFiEnZCq5qc1ozrZE8QGjV1raMj1Lffso2aJGya0W7AIS6qaP2g+5Ab/IzhyIzZo2nUSSmjU7T/6n3v9UGo2calkYhFWVZAbhnHYSsdEm9ADkg8PNrs1uKiZ43YWMXaLtKyaoB913tM/M8bm3KCx63jRQWiVfzZrG+Fb7KJmiTvHbsEaVb2VsXiW5r67qFvkjW/PE3WH6p5ZVqNaczOO2KDpzM7oyCAPAzmxkw0L9n+2z+FGXDMdFU4KrKjKbrE1NnZNobHpbhKRPKbM/vo1HyKvuIg71bgo2bDbx6TW0FMK3ZlB5rZvrnMfiouzkppxyxLXqDvQGprqxqKTqC+ZT9YUfVfcKJH1alzL7kpraJG7mvnu9RX4WPN21dW4u7MYEzojhyKvlF02+4XL65W4wu5LizyVtkUu/3tZ7eVd0dNr3b3hnGwv7N/IJXo/0/tK7mqy4l458xxyPx2RXM8HHox5wXCXea+gamg5Md3zLCR5fH6YC2wOqzDXyvbC6B2GNR9l4CYWTO5ixS1S1ocqs+UyFoyDjucFupisHC96CcrORH7GRfNBT3JugZknfGBc9jPjXkfRZsHqMlxk5q8TlM3vkbs3zGnxk6QLpvcVPQZgC4NFxpq17BOF72vRumDbc3Fty5pN2fe16fFoGHHREy3awoUemJZNkaXrFxI4drDg/IHhsiXybYZfj4b8ypKL1h+GwmW5bI0sXd8J9LJyRbsoWx5minwH7pEEnk/1ouG6kOnXWR5meqRGeIfcxoYzgeEWL2ceKWwZS36QRhrYlWvlb195y1H6ACu2J+2maFu2PeyXnncj5WfYcWDdsh520g9ueEc4LfMM5wM72nKM8zrybvfD3sI8wy5hkvX1hSfqhfccTeMt7TYwYD2vOc7rjfcge1ruXMjZrp96TxJt2uFp2S0vu37ivTJNu4c/Zrq+593rum969VEmmF+X1LRjGGPvujN77CV4e7i+adu1+XEMvcyK4TodXfJ3LPkvMWavgjAMReFvdncLpUuh7VBw9Q9FUBwEBdFBxHdwcPDpJXprontOvhf4SHtuc0+RvGIjGigTX1XikC7Glq2bSGyT/KDrs5Xca5P8Ttezo7NsqcS2DWyZe/FFIo5jPWdp4pNWXLLTTVMc6xUHmyaxeE+TR9wwzCMewiSHeAKUOcQlUOUQV0CTQ9wAtPo5bvEUenGJp9J/Mms8A9klce7Fa94UmmsxnLjgQ3WXiL33swjUJh60fp6Sb7ehxKwxFtplb0GPU8Q69EXHl0K50M8IuOtFUGGsmtdETHWlbUrMUSC2BlPzwyh5XbRsbfjFpf3pE560449RYrEd+NWrues4CANR9E5hjbDduElhRAF9JFZCKCm2TLfdasX//8kmylQJJPgxOT9wdC6ubH7wCJ1VL0HkTJ8JTwTVZFl6wgpfismydIc16KR9e3sirBLUkiU4YIOolCzBEVvYb82ngQ7bUKf3GNIRXnBxklzd6wgvmRXGXm4na8YbjIxdOdgAu8xLRa14M8z6vcKvu5or9roZO6GjmKv0Hi/AR83iHQkJ2CjfudgbLdIITsRFXheQDPnyf30aQg6TKzJLbg405EdLbi7sl1wtowzjM7R/nlGOGVPFUlsODwmDHwZGPcg0O2Nbi8qQ6Q9vWsWqALdbct+3DF0st1PfjP4e6X0zRMPppf8e6z+MwqVEOgAAAABJRU5ErkJggg==",fe=(e,t)=>{let n;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(n),n=setTimeout((()=>e(...i)),t)}};function pe(e){e&&e.scrollIntoView({behavior:"smooth"})}var he=n(1216);const ve={avatar:"avatar--fAQkd",isExtraSmall:"isExtraSmall--p7FCK",isSmall:"isSmall--gE4MU",isMedium:"isMedium--Ennwn",isLarge:"isLarge--EdU5d",image:"image--a1tOx",isInitial:"isInitial--wbUXa",rotate:"rotate--ZL6_K","rotate-loaf":"rotate-loaf--Szlvl",opacity:"opacity--ANMtI",pulse:"pulse--Br14e",pulseNegative:"pulseNegative--GIqrD",popup:"popup--dmROk",slideTop:"slideTop--vS5_6"},me={bg:"bg--cJelA",figure:"figure--gZnfP",face:"face--UZ4xe","face--01":"face--01--I5lIu","face--02":"face--02--Pbj5D","face--03":"face--03--L7XFA","face--04":"face--04--fkcPw","face--05":"face--05--tpP1i","face--06":"face--06--SIbjb","face--07":"face--07--oVN0P","face--08":"face--08--mJXJ7","face--09":"face--09--NQby4"},ge=["#153243","#2B00FF","#3B5249","#2E294E","#1E000E","#00FFCB","#979174","#1C1C1C"],ye={triangle:e=>function(e){return`<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32" fill="${e}"><path d="M16 0l16 32H0z"/></svg>`}(e),square:e=>function(e){return`<svg xmlns="http://www.w3.org/2000/svg" height="32" width="32" fill="${e}"><path d="M0 0h32v32H0z"/></svg>`}(e),circle:e=>function(e){return`<svg xmlns="http://www.w3.org/2000/svg" height="42" width="42" fill="${e}"><path d="M42 21a21 21 0 0 1-21 21A21 21 0 0 1 0 21 21 21 0 0 1 21 0a21 21 0 0 1 21 21z"/></svg>`}(e),rhombus:e=>function(e){return`<svg xmlns="http://www.w3.org/2000/svg" height="42" width="42" fill="${e}"><path d="M21 42L0 21 21 0l21 21z"/></svg>`}(e),rectangle:e=>function(e){return`<svg xmlns="http://www.w3.org/2000/svg" height="38" width="38" fill="${e}"><path d="m7 0h24v38h-24z"/></svg>`}(e),pentagon:e=>function(e){return`<svg xmlns="http://www.w3.org/2000/svg" height="40" width="40" fill="${e}"><path d="m39.972 15.516-7.6287 23.479h-24.687l-7.6282-23.479 19.972-14.511z"/></svg>`}(e),hexagon:e=>function(e){return`<svg xmlns="http://www.w3.org/2000/svg" height="42" width="36.373" fill="${e}"><path d="M18.187 0l18.187 10.5v21L18.187 42 0 31.5v-21z"/></svg>`}(e)},_e=["#FF00AA","#D4FF00","#D3F9B5","#FF3A20","#519872","#FFD400","#FF9505","#0DAB76","#FF4F79","#F9F5FF"],be=["01","02","03","04","05","06","07","08","09"],Ee=e=>{let{id:n=0}=e;const{backgroundColor:r,backgroundImage:i,face:o}=function(e){void 0===e&&(e=0);const t=Object.keys(ye),n=_e.length,r=ge.length,i=be.length,o=t.length,a=(e+100)%r,s=(e+300)%i,c=_e[(e+200)%n],u=t[(e+400)%o];return{backgroundColor:ge[a],face:be[s],backgroundImage:(l=ye[u](c),`url('data:image/svg+xml;charset=utf8,${encodeURIComponent(l)}')`)};var l}(n);return t().createElement("div",{className:me.bg,style:{backgroundColor:r}},t().createElement("div",{className:me.figure,style:{backgroundImage:i||"unset"}}),t().createElement("div",{className:y()(me.face,me[`face--${o}`])}))},Se=(0,e.memo)(Ee);function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}var xe=n(2106);function Oe(e){let{position:n,childRect:r,popoverRect:i,arrowSize:o=6,theme:a="dark",popoverContent:s,withSubstrate:c,onVisible:u}=e;return t().createElement("div",{className:"arrowWrap--q2uct",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1)},t().createElement(xe.ArrowContainer,{position:n,childRect:r,popoverRect:i,arrowSize:o,arrowColor:"rgba(0, 0, 0, 0.9)",className:y()("arrow--k9LzJ",{"light--ELHJr":"light"===a},{"top--S0WaD":"top"===n})},t().createElement("div",{className:y()("popoverWrap--C17VU",{"indent--I4Duv":"light"===a,"withSubstrate--zDPhA":c})},t().createElement("div",{className:"popoverContent--O1Y2z"},s))))}const Ie=(0,e.createContext)({articleUUID:"",isTouch:!1,isDesktop:!1,initialFormsData:void 0,commentsService:void 0}),Ae="center";function Ce(n){const{children:r,align:i=Ae}=n,[o,a]=(0,e.useState)(!1),{isDesktop:s}=(0,e.useContext)(Ie);if(!n.popoverContent)return r;const c=e=>a(e);return t().createElement(xe.Popover,{isOpen:o,content:e=>t().createElement(Oe,we({},e,n,{onVisible:c})),positions:["bottom","top","right","left"],align:i,onClickOutside:()=>a(!1),containerClassName:"popover--j36A8",boundaryInset:s?-155:10,reposition:!0},t().createElement("div",{onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1)},r))}function Te(t){let{isGold:n=!1,size:r}=t;return e.createElement("div",{className:y()("root--jrTWK",{"isGold--GosCk":n,"small--uNuYy":"small"===r})},e.createElement("span",{className:"shine--a2oe6"}),e.createElement("span",{className:"icon--cQd1u"}))}const ke=(0,a.N)({id:0,courses:[],error:void 0},{events:{getCoursesStudent:e=>({id:e}),invokeSuccessAction:e=>({data:e}),invokeErrorAction:e=>({data:e})}}),Ne=ke.createMachine({id:"courses",initial:"idle",context:ke.initialContext,states:{idle:{on:{getCoursesStudent:{target:"loading",actions:ke.assign({id:(e,t)=>{let{id:n}=t;return n}})}}},loading:{invoke:{id:"fetch-courses",src:"studentCoursesInvoke",onDone:{target:"success",actions:ke.assign({courses:(e,t)=>{let{data:n}=t;return n}},"invokeSuccessAction")},onError:{target:"failure",actions:ke.assign({error:(e,t)=>{let{data:n}=t;return n}},"invokeErrorAction")}}},success:{},failure:{}}},{services:{studentCoursesInvoke:async function(e){let{id:t}=e;return(await k(A+`students/${t}/progress/`)||[]).sort(((e,t)=>Number(t.is_finished)-Number(e.is_finished)))}}}),Pe="visibleCoursesWrapper--bkSTj";let je;!function(e){e.LOGGED_IN="LOGGED_IN",e.LOGGED_OUT="LOGGED_OUT",e.REJECTED_BY_USER="REJECTED_BY_USER",e.ERROR="ERROR"}(je||(je={}));const Re="There is no sharedCore",Me=()=>{const e=window.sharedCore?.v2;if(e)return e;console.error(Re)};async function De(){const e=Me();return e?e.getProfile():k(I+"account/profile")}async function Ue(e,t){await(Me()?.trackingFunctions?.[e]?.(t))}function Le(e){let{slug:n,popup_picture:r,theme:i,is_finished:o}=e;return t().createElement("a",{className:"courseCard--g5lJT",href:`/pro/${n}/?from=badge`,target:"_blank",rel:"noreferrer",onClick:()=>{Ue("trackUserClickedCourseLinkOnComments",n)}},r?t().createElement("img",{className:"courseAvatar--Z5sXz",src:r,width:40,height:40,alt:" "}):t().createElement("div",{className:"courseAvatarPlaceholder--Iwozs"}),t().createElement("div",{className:"courseText--zva5j"},t().createElement("div",{className:"courseTitle--vFLE1"},i),t().createElement("span",{className:y()("progressText--EVaAy",{"progressTextWithIcon--bdWtO":o})},o?"":"")))}const Be={loader:"loader--K4KlN",rotate:"rotate--jMWlX",blue:"blue--SXqwn",white:"white--xOqM6","rotate-loaf":"rotate-loaf--UAre7",opacity:"opacity--uNMWa",pulse:"pulse--i6wxl",pulseNegative:"pulseNegative--DYQcg",popup:"popup--IR0SD",slideTop:"slideTop--neaKx"},Fe=e=>{let{color:n}=e;return t().createElement("span",{className:y()(Be.loader,Be[n])})};function Ge(e){let{status:n,courses:r}=e;const i="loading"===n||0===r.length;return"failure"===n?t().createElement("div",{className:Pe},"   "):i?t().createElement("div",{className:"loaderWrapper--qOXZv"},t().createElement(Fe,{color:"white"})):t().createElement("div",{className:Pe},r.map((e=>t().createElement(Le,we({key:e.slug},e)))))}const He=JSON.parse('{"G_":{"U":{"R0":{"author_of_current_article":" ","author_of_another_article":"","hero_of_current_article":" ","hero_of_another_article":"","author":"","hero":"","custom":""},"aL":{"deleted_by_author":"  ","deleted_by_moderator":"  ","visible":"","editors_choice":""},"KC":{"reasonsForBan":["","  ,   ","  ","   ","  "," ","","  "," ","   "],"periodsForBan":[{"period":"3d","text":" 3 ","secondsToUnban":86400},{"period":"1w","text":"","secondsToUnban":604800},{"period":"1m","text":"","secondsToUnban":2592000},{"period":"1y","text":"","secondsToUnban":31536000},{"period":"10y","text":" 10 ","secondsToUnban":315360000}]}},"T":{"opinion":" $N ","reply":" $N ","courses":" $N "}},"yQ":[["","",""],["","",""],["","",""]],"gk":{"c":{"T":",   "},"J":{"T":",   "}}}');function qe(e){let{count:n,children:r}=e;const i=String(r).split(" "),o=i[i.length-1],a=He.yQ.find((e=>-1!==e.indexOf(o))),s={$N:String(n),[o]:ze(n,a)},c=i.map((e=>s[e]?s[e]:e));return t().createElement(t().Fragment,null,c.join(" "))}function ze(e,t){void 0===e&&(e=0);let[n="",r="",i="",o=""]=t;const a=e%10,s=e%100;return((e,t)=>1===e&&11!==t)(a,s)?n:((e,t)=>e>1&&e<5&&(t<12||t>14))(a,s)?r:((e,t)=>0===e||e>4&&e<10||t>10&&t<15)(a,s)?i:o}function Ve(n){let{id:r,savedCourses:i,onSavedCourses:a}=n;const[s,c]=(0,e.useState)(!1),[u,l,d]=(0,o.eO)(Ne);(0,e.useEffect)((()=>{if(0===i.length)return l(ke.events.getCoursesStudent(r)),d.subscribe((e=>{const{courses:t}=e.context;"success"===e.value&&a(t)})).unsubscribe}),[r,a,d,i,l]);const f=s||i.length<=6?i:i.slice(0,5),p=i.length-f.length;return t().createElement("div",{className:"contentWrapper--fPNXo"},t().createElement("div",{className:"popoverTitle--EklSE"},""),t().createElement(Ge,{status:u.value,courses:f}),p>0&&t().createElement("div",{className:"showAllCoursesButton--d0ufs",onClick:e=>{e.stopPropagation(),c(!0)}},t().createElement(qe,{count:p},He.G_.T.courses)))}function Xe(n){let{status:r,id:i,size:o}=n;const[a,s]=(0,e.useState)([]),c=t().createElement(Ve,{id:i,savedCourses:a,onSavedCourses:e=>s(e)});return t().createElement("div",{className:"studentBadge--N12R_"},t().createElement(Ce,{popoverContent:c,withSubstrate:!0},t().createElement(Te,{size:o,isGold:"has_finished"===r})))}function We(e){let{url:n,children:r,className:i}=e;return n?t().createElement("a",{href:n,className:i},r):r}const Ke="extra-small",Je="small",Ye="medium",Ze="large",Qe={[Ke]:ve.isExtraSmall,[Je]:ve.isSmall,[Ye]:ve.isMedium,[Ze]:ve.isLarge};function $e(n){let{id:r,image:i,size:o,studentStatus:a,url:s,authorName:c}=n;const[u,l]=(0,e.useState)((()=>"initial"));return t().createElement("div",{className:y()(ve.avatar,Qe[o],{[ve.withBadge]:a})},t().createElement(We,{url:s},i&&"error"!==u?t().createElement("img",{src:i,className:ve.image,onError:()=>{l("error")},onLoad:()=>{l("success")},loading:"lazy",alt:c}):t().createElement(Se,{id:r})),a&&r&&t().createElement(Xe,{size:o,status:a,id:r}))}function et(t){let{count:n,authors:r,label:i}=t;const o=M(r,3);return e.createElement("div",{className:"root--N4HNs"},e.createElement("div",{className:"avatars--x7KrT"},Array.from(o.values()).map((t=>e.createElement("div",{key:t.id,className:"avatarWrapper--l1RtM"},e.createElement($e,{id:t.id,image:t.image,size:Ke,authorName:t.name}))))),e.createElement("span",{className:"text--FD9D4"},e.createElement(qe,{count:n},He.G_.T[i])))}function tt(e,t){if(!t)return;const n=t[e];return n?Number(Object.keys(n)[0]):void 0}function nt(){if(!Boolean(window.location.hash))return;const e=window.location.hash.match(/#c(\d+)$/);return e?parseInt(e[1],10):void 0}function rt(n){let{commentsRef:r,commentCount:i,commentsCollection:o,handleOpenCut:a}=n;const{initialFormsData:c}=(0,e.useContext)(Ie),u=nt(),{byId:l}=o,f=(0,e.useCallback)((()=>((e,t)=>{if(!e)return[];const n=Array.from(e.children),r=e.getBoundingClientRect().height;if(e.scrollHeight-r<=100)return Object.keys(t);const i=[];let o=0;for(const e of n){if(!(o<r))break;const t=getComputedStyle(e),n=t.marginTop&&parseInt(t.marginTop)||0;o+=e.offsetHeight+n,i.push(le(e))}return i})(r,l)),[r,l]),[p,h]=(0,e.useState)((()=>f()));(0,e.useEffect)((()=>{const e=()=>{const e=f();e.length===i&&a(),h(e),(0,he.be)()},t=fe((()=>{e()}),100);return(()=>{const e=Object.keys(c?.answer||{}).length,t=tt("edit",c),n=tt("reply",c),i=u||t||n;if(i&&r)!f().includes(i)&&((0,he.Iq)(),a()),setTimeout((()=>{pe(document.querySelector(`[data-comment-id="c${i}"]`))}),1e3);else if(e){const e=document.getElementById(s);if(!e)return;pe(e)}})(),e(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)}),[f,u,r,a,c,i]);const[v,m]=((e,t)=>{const n=Object.keys(e.byId).length-t.length,r=e.tree.branches.reduce(((e,t)=>[...e,t.commentId,...X(t.children)]),[]),i=[];for(const n of r){if(3===i.length)break;const r=e.byId[n],o=r.author,a=d.includes(r.status),s=!t.includes(n),c=!i.some((e=>e.id===r.author?.id));!o&&a&&i.push({id:-1,image:de}),o&&a&&s&&c&&i.push(o)}return[n,i]})(o,p);return t().createElement("button",{className:"expandButton--mYgCB",onClick:()=>{a(),Ue("trackUserClickedViewMoreOnComments")}},t().createElement(et,{count:v,label:"opinion",authors:m}))}function it(e){let{id:n,isLazy:r,children:i}=e;if(r)return i;const o=t().createElement("div",{className:"placeholder--LkClC","data-comment-id":`c${n}`});return t().createElement(he.ZP,{placeholder:o,offset:1e3,once:!0},i)}const ot="name--_NuaY",at=e=>{let{text:n,participation:r,participationCount:i}=e;const o=[[!!n&&"author"===r.role,`${n},  `],[!n&&"author"===r.role," "],[!!n&&"author"!==r.role,`${n},  `],[!n&&"author"!==r.role," "]].find((e=>{let[t]=e;return t})),a=o?o[1]:" ";return t().createElement("div",null,a," ",t().createElement("a",{href:r.article_path,target:"_blank",rel:"noreferrer"},"",(e=>-1!==e.indexOf("")||-1!==e.indexOf("")?e.replace(new RegExp("","g"),"").replace(new RegExp("","g"),""):e)(r.article_title),""),i>1&&"   "+(i-1))},st=["author_of_current_article","hero_of_current_article"];function ct(e){let{badge:n,participation:r,participationCount:i}=e;const o=He.G_.U.R0[n.type]||n.text,a=o&&o.length>30,s=r||a?t().createElement(at,{text:a?o:void 0,participation:r,participationCount:i}):void 0;return t().createElement(Ce,{popoverContent:s,withSubstrate:!0},t().createElement("div",{className:y()("badge--ZLTBg",{"isImportant--W6s9t":st.includes(n.type)})},t().createElement("span",{className:"truncating--F7mSA"},o)))}function ut(e){let{id:n,name:r}=e;const i=(30,(o=r).length>30?o.slice(0,30)+"...":o);var o;const a=n?`/user${n}/`:void 0;return t().createElement(We,{url:a,className:y()({[ot]:n})},t().createElement("span",{className:y()({[ot]:!n,"opacity--2qRq5":!n}),itemProp:"author",itemScope:!0,itemType:"https://schema.org/Person"},i))}function lt(e){const t=new Date(e),n=t.getTime();if(isNaN(n))return"";const r=(new Date).getFullYear(),i={day:"2-digit",month:"2-digit",hour:"numeric",minute:"numeric"};return t.getFullYear()===r?t.toLocaleDateString("ru-RU",i):t.toLocaleDateString("ru-RU",{...i,year:"2-digit"})}function dt(e){if(!e)return"";const t=e.indexOf("+");return-1==t?e:e.slice(0,t)}function ft(e){let{datetime:n,id:r}=e;return n?t().createElement("a",{className:"datetime--UxTlP",href:`#c${r}`,onClick:()=>{const e=document.querySelector('[data-cut="true"]');e&&e.setAttribute("data-cut","false"),pe(document.querySelector(`[data-comment-id="c${r}"]`))}},t().createElement("time",{dateTime:dt(n)},lt(n))):null}const pt=["journal.tinkoff.ru","www.journal.tinkoff.ru"],ht=e=>e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),vt=(()=>{const e=`(?:${pt.map(ht).join("|")})`;return new RegExp(`(https?://${e}\\S*)`,"i")})();const mt=`^(?:${["[-]","\ud83c[-\udfff]","\ud83d[-\udfff]","\ud83e[-\udfff]"].join("|")})+$`;function gt(e){return new RegExp(mt).test(e)}function yt(e){let{text:n,isImage:r,banned:i}=e;return t().createElement("p",{className:y()("text--TntEu",{"isImage--firxL":r,"isEmojiOnly--o20IW":gt(n),"isCrossedOut--p18Tt":!!i}),itemProp:"text"},function(e){const n=[];return function(e){let n=0;return e.trim().split(/(\n)/).map((e=>e.replace(/^\x20+|\x20+$/gm,""))).filter((e=>e.length>0)).filter((e=>(n="\n"===e?n+1:0,n<=2))).map(((e,n)=>"\n"===e?t().createElement("br",{key:n}):e))}(e).forEach((e=>{if("string"==typeof e){const r=function(e){return e.split(vt).filter((e=>e)).map(((e,n)=>vt.test(e)?t().createElement("a",{href:e,target:"_blank",rel:"noreferrer",key:`${e}-${n}`},e):e))}(e);n.push(...r)}else n.push(e)})),n}(n))}const _t="in--em3zU";function bt(n){let{preview:r,fullscreen:i,authorName:o}=n;const a=(0,e.useRef)(null),s=(0,e.useRef)(null),c=(0,e.useRef)(null),u=(0,e.useRef)(0),[l,d]=(0,e.useState)(!1),[f,p]=(0,e.useState)(!1),[h,v]=(0,e.useState)(!0),[m,g]=(0,e.useState)(!0),[_,b]=(0,e.useState)(!1);(0,e.useLayoutEffect)((()=>{if(l){if(i){const e=new Image;e.onload=()=>{v(!1)},e.onerror=()=>{v(!1)},e.src=i}E(!0)}}),[l]);const E=e=>{const t=c.current,n=a.current,r=s.current;if(!(t&&r&&n))return;const i=t.getBoundingClientRect(),o=r.getBoundingClientRect(),l=100/o.width*i.width/100,f=`translate3d(${i.left-o.left}px,${i.top-o.top}px,0) scale(${l})`;if(e)document.addEventListener("scroll",S),u.current=window.scrollY,r.style.transform=f,setTimeout((()=>{n.classList.add(_t),r.style.transform="translate3d(0,0,0) scale(1)",p(!0)}),100);else{document.removeEventListener("scroll",S),r.style.transform=f,n.classList.contains(_t)&&(n.classList.remove(_t),n.classList.add("out--O1cDk"));const e=setInterval((()=>{r.style.top=u.current-window.scrollY+"px"}),10);setTimeout((()=>{clearInterval(e),d(!1)}),300)}},S=()=>{E(!1)};return t().createElement(t().Fragment,null,t().createElement("img",{ref:c,src:_?"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAgICAgJCAkKCgkNDgwODRMREBARExwUFhQWFBwrGx8bGx8bKyYuJSMlLiZENS8vNUROQj5CTl9VVV93cXecnNEBCAgICAkICQoKCQ0ODA4NExEQEBETHBQWFBYUHCsbHxsbHxsrJi4lIyUuJkQ1Ly81RE5CPkJOX1VVX3dxd5yc0f/CABEIAKAAoAMBIgACEQEDEQH/xAAbAAABBQEBAAAAAAAAAAAAAAAAAQIDBAUGB//aAAgBAQAAAAD1rGRURURooICGrF5TgTyuVqCgI1IOy7yXznnsscAAA067qd9/AWuU1HgAAMq+pZGs/h7C9Gsb5FdLC0bS18rRdxbrXQ2WyyxW4YHXqWbYo32cdLf27Vi9Uhma6Z+RE/Nvv41+zraF0yXXkcpkVbGboHHL0PTjVoy6ARpDWp592TkDpuqcIq04mUsWzrVKN+Lk3dX1aqnM5PKwthtVmelUL68gU+j1LvNUnQxwM0GZPoVC8vHrV2WrJI8ZExkUPWU7y8cZGzNPLLI8bHEV96peOSTH6C3OqRsiYiur9NTunHrS3WtRERQV0PTU7zuKdj7LnOVwoDa/VVNJnFdb1KgCA1BG1ee0UrbMrlRBURAa1rs+4wGqCIoCICt//8QAGwEAAQUBAQAAAAAAAAAAAAAABAABAgMGBQf/2gAIAQIQAAAA81JinSdw4aXqzsSWZzBOny/Y9Orth59kjdFxN71ZRjhMuZqNVY0INi80b2u7dzgrquEEZeNCL3IRG2gwebtTI4MRmSdjb+YySd3O/8QAGgEAAgMBAQAAAAAAAAAAAAAAAAEEBQYDAv/aAAgBAxAAAAC+G/LAO0CrXNhZWXWk9csjLgyb7Sdaoq40SRIn3fqspPSjc+elt/VLm+eagyDea95rCNtedrqnmsMAG01TqKQGy5t+CAY35//EAC0QAAEEAgAFAwMEAwEAAAAAAAEAAgMEBREGEhMUFRYhMSIjNCQlMjM1QUIQ/9oACAEBAAEIAL9+SB7yDxEvUS9QheowhxGvUbUOIwvUi9Sr1IhxIjxIF6jajxJpDiUI8Sf7HqRepVXyNiSSssmXdSZZvrU+nK0ZSZMvyO+e6cULTl3L13b13b13T13b13bgu7eu6ejceu7ejeeBteTlXCUDMhJJPOPpt1QMmD1JSs4wGTHg3OHKrC+VvjcevGUUMZQXjKK8ZRXjKK8ZSXjKK8ZRXjKK8ZRXjKS8ZSXjaCwvBdWYxWbPDUEcFq9FGAe7rayZ3JMsuNyY8oxaZKRjOHe+gdKG8HFN4NJTeDl6OXo5ej16PXo9ej16OXo5Hg9WOEiyJ7lRiBq09YSMi9f03fd1d5N33J9ZH6jTKGuWVcMM3jygQS4N6J5OUvEsY01j43tHLye65EyIudoS1gwbXIuRciLFcZ+nmVMjtaaw7tXLqjcTbrLJEmWwr532aa4Hn1wzsYwkRHn24gJzdqtjum58jpImsQZ7pjI2/Fn4aAPqAIawk6Da8bQrAY07V1mq06pu1WqhYYbt3Chy95U1lQ4zWNWwQ2luNuhIuGeoMX9EPMwuY8EKKN3O17i8BTOBaVXBdE0nRRbzHZbHv4EXKAUQ/Sty+zmq4N05iKbGdtVLsU7Vq2mb72osqfvWVcOxTTHcxeuFB+1KWrKQ6Y1IQIWOf7H2J0rh17iBwjeIFpcq5uQaXUCc/YUp3YYnkmrcVQntqgWK/KuKMNNuqVlRuWwrY02ko9gu3wmP2oJ8YewtPTLQA3nePchxcFM0yPDRDA90wkOlpcqMTTtdLQQqM24m7G1tOwG1m7rVQMX+TaUJ/W1N5Nw69kK0dtpqJwPMuER+0hALS0F02oMaPjSsXqVX+9uWxjhsOzGMG9zcSYyP+M3GEjXfbq8Y0JPpsTXKdqlYdXqPHb1ljH6s2iInc1yoVmGP69kqYnp09xe7iuER+0tQC0tJ5YxrnOt8T1I3dOrazl+y3pMmZC1+yJZWfxdfnA0m5F5OniOKdvNEasx+BWlYSVW/HrLFb7q3qFrhfprK7M9pWieWioXe7lgLt+vUeIWZrINP1QcRTj2e7iIdI8lqxbuP3a5ATyN5Ry9OPpBvsx1C7Kjh5v8AoYmMH64a1WH+E8UrvcSRvD3brHVeusZ7WLSh331JZc6sWVaJ5KKh/wClhH6puC5mI9JBzB8CVqErEJY11h/oklHqD4Lz8OIB2RuRqllDmO3W0K1feN/IsqE/r6ay3vYtBWRptFRH5Jw8xFZ4TZXFNcSmglBiaxCNBgXK1ERoiJFsK3GPieT7UmoHarwLHf32VCf19JZj8i0rX8aKj0QSsMzdd6jiTIkGtHzzsCNgBGyjZJRmKMhXOUHranP0PVb2rwE0D9+yof8AIUSsyT3FpWD9NNQuIB3hCwVXE9cD4Ngrqk/POStkr3Wj/wC6QCCmP23qB57eALHn79hQ/n0lmPyLSuHQpqHZCxEjhWeEHoOQcEHBcy5guZc65gucLqBGQKaQcj1FtsEQONO57Ch/PorNfk2VdOhTWExJAbYsdCFCCBdCBdCBdCBdCBdCBdCBdCBGCBdCFdCBdCBdGEHYtQPldztxvM2axuE/uNFZoHurOq/Dfd14nWG4eyBoNxdkLxtheOsLx1heOsrx1hePsLx9heOsLx1hePsLx1hHHWEcbYXi7CGMbEx8gh/yNBZJlpl+ZzRdyQQvZJG9kkL2TQvZFd7kl32SXfZJd7k132SXe5Jd7kULuSXeZJd5lF3uTXeZNd5klUiyFjJ03n//xAA0EAACAQEEBwYFBQEBAAAAAAAAAQIDBBFTsQUxQVFSkZIQEyEik9ESIDJDYSNCYnGhgTD/2gAIAQEACT8AvaTZJ9TJPqZJ9TJPqZJ9TJvqZJ9TJS5sb6mSfUyUupkpc2VJc2TlzZKfNk582TlzZOfNjkozqRTT2pi4iflqX+XdcNlS4r5e5aMvctGXuV8vcrP/AD3K2XuVsvcr5e5Xy9yuVX/y73K2XuViRO+FP6Y72au+hcPizOM+JQvvaWwqMm+ZOROROXMqSKj5k5FSRUZUZUlzJsnIUu6fjGG8iowi7kkY8D+WZsmS1Qm/8Jwj52rmitDpK0OkrQ6StDpK0OkrQ6StDpK0OkrQ6StDpK0OkrQ6SvHwTfhEl9mJxMf34Zi2yzOM4JZGLIfih/8ATUt2u4d+y7b8kr/l4JGDHI2uRjxNjlmcYv2yyIt/qTFd+O2XjNfSu1+O8eti7FeajDlkJXd1HI3sx4jeuQ7/ADnDIi2+8mLzJ9i8vyoRr7F5jClkL7UcjiZq7+JvlmcYrroyyMSRP4ZrVtv/AAxeeSvf4/Ha7r3czVd4dq7fyfT8E2jV3UcjezX38TY5HGcMsjFl2akL++zfe2K5L5XeXtvIjcu6nkYUcjexffiPbI4xbJ5GLL5EK7stMIPc2Wymy0xJSmWKDj+Zu8o1KL60WiFRd1PU/wAGFHI4mY8RfvkcbzN08jEl8klGK1tu5IpOvPfqiSVF/u7vxfNkpVZ7W2RjFf0NciKmh3PaiDZOMWk77peL5C+1E4mY8TikYjN0yrJR72e0ryIxn/hZ/wBTZfLylRyjsivCKFdvZ4La95Tc5CjFfl3FSPJk5XfhEfNvl4saYtjMOORvZjxOORiPMa1TyI/dmU0QfMUhMiymJokyQh9kPH4WP7aN7MeJxyMV5n8smYsu1dqF2tl/MgsxL6XsMOORvMeJxyMR5mvz5GLLtfyP5uFi/ZHI4jHiccjEeZulkzFl2v8A8uFj8O7WRxGPAxJHHLM/kYsvkuLhoY0Xcy7mNcxoabaZ4P4EcRjxMSRiSzIbb4wZZ6XSiz0uhFnp9KLPT6UWen0ooUulFnp9KLPT6UWen0ooU+lFnp9KLPT6UWen0ooU+lH1bVvFrkzHiL7siTg4ycoL+zSNU0jULfULfULfULfULfULdULdULfULdULdULdULdULdULdUKjlVfjJvaY8CwV6sfj+JShD4os0ba/SkaOtfpSNG2v0pGjbX6UjRlr9KRo21+lI0Za/TkaMtfpSNGWv0pGi7X6cjRlr9ORou1+nI0Za/SkaMtfpyNGWr05Gi7X6cjRlq9ORou1+mzR9enCNZSlKUPhSR//xAA5EQABAwICBQoDBwUAAAAAAAABAAIDBBEFEhQVIVSSBhMxNUFTcnORwSNRcRAiJFJhY5MlNEJDRP/aAAgBAgEBPwAyVNRX1UelSj4rsozlGirR/wBcvGVo1Vvk3E5aLVb5NxFaNVb3NxFaNVb3NxFaNVb3NxFaNVb3NxFCkqz0Vc3GUKmohxKngFTKSJG5ruNtpUZtilQf3XrB46jETKzSCCy21TYW+FsjpMQDQxuZ36D5pmETPNm1wJsHWHyK1HVb4VqOq3wrUdVvhWo6re1yiFXhbIWNqCTLfaoyXYtA4m5L40esKnzXrk5OKZtdI4PNmN2MaXOWJYxWT1D/AI5NmmLOBkL2g9q5N1mJT1L2te7KSznJbAkBvQLlCQFGU32LPsXPAlcuzc0P0eqfrSn8UadfTqnzn+6wGIytrmc69l2N2sNnIcnaqpriwfCY4F/39rmtv2gLC8Mgw2n5mMl1zmc49pTTYq4v0IuJ+zlsSTQ/R6p+s4PHGjfTqjzn+65NH4tV4WoMjEhkyjOQGl3bYK6zIzxDpe0fUo1UA/2tKbVQk7HLlkQ40RB/Oqe+soPHGnbayoH7z/dYRVNpXTvc0kHKNiZjdMTZwc39U/FaYD7jw4nsU+ITP2B1gVpLP8n+pTaqkA2u2/otY2NoxmCxuZ8wgLrdLuhU/WUHjjR/vZ/Od7poPNTEfNvui6QdqMrh2rn3/mQf8ymzsC0hh6GuCrXmRkfiKpusYPGxEfjJ/Of7oXEM31b7oh7lzRPSUImoMarBWCqh8Nn1KpusIPGxAfjJ/Of7qbE4oTJEGZ7kbb2tZa0Z3J9VrRndH1Ws2d0fVayj7o+q1jH3R9VrGPuj6p9YybI3JlsSelU4/qMHjYq2mxMVE/MQSC8rjmDUcPxg9MD/AONatxbd3cC1bi27v/jWrcW3d/AtW4tu7+Bauxbd38C1bi27u4Fq/Ft3fwLD6DERWQulgktnbtLV/8QANBEAAQMCAwQIBAcBAAAAAAAAAQACAwQRBRJTFiFyoQYTMTIzVHGRECI0QSMkQ1FhY4FE/9oACAEDAQE/AIYYRC1zo77gvymmg2l01al01ek0+SvSaavSafJXpNPkgaTT5KSOAsdljHdJ7FT+A30CxKrioWMeYg4OJCZjsbywNpCcxsE7H4mj5qW28hbR0/lwto4PLBbR0/lgto6fywVDiEVayRzYw3LYJ/6nAqcfgs4QsfhMzKVgt4h7xVPRwQMaBHa5Dsp3gH+FX01I+AXYA8XyN7ASU+lfGRmHao6FmQ5xdx5LqDmtb+EcOeGXuL/ssAjtFP6hPsOs4FTeCzhCxg2FMcoNnHc5PqYuqDwbkWabfupZXSuuRZTMzs9N6AeN2Y2UULdzu0/DCWZGzi/3UvZJwKn8FvCFi4uyH1KGYCwO7tsroncjLA1xa6VgI+xIRraRn/TH/hBTMUo5DlEwHqCFhRa6OVzTcEjeFL3ZOAqA2hZwhY9UtpoYXObcF57EzFqYmxa9qq8Yp4WDqmukcf8AAPVTYrXz3BkDAfsxBkjj3TdNiIG9q6kgroj9NU8YUvcfwFQ+AzhC6VfTQcfwssgWVZSsi6LC0NRxBSdx/CVF4DPRq6VfSwcaFlmWYq6v8Oi3g1HEFJ4b+EqAXhZwBYrRsr42RF7m5STcLZuDXctm4dY+y2bh1z7LZuHzD/ZbNQ659ls3Drn2WGULMPa9ofmD7G5Uw+R/AUyRvUxhsrQbC9ys39rOSv8A2s5K41WclmGqzksw1WLMNVizDVZ7hZxqs5J0jBHJeVp+Ur//2Q==":r,className:y()("image--H6O3A",{"error--CztNq":_,"loaded--cEnEn":m}),onClick:()=>{d(!0)},onError:()=>b(!0),onLoad:()=>g(!1),alt:`  ${o||""}`}),l&&!_&&t().createElement("div",{ref:a,className:"modalImage--QUhA8",onClick:S},t().createElement("div",{className:"wrap--j5ZgJ",ref:s},t().createElement("img",{src:h&&!f?r:i||r,className:y()("imageModal--Wq8V5",{"isFull--xW7Yq":!h}),alt:`  ${o||""}`}),h&&t().createElement("span",{className:"isLoad--yIr4m"}))))}function Et(e){let{image:n,isBanned:r,authorName:i}=e;return r?t().createElement("div",{className:"imageBan--QDFdm"},t().createElement("p",null,"  ")):t().createElement(bt,{preview:n.preview,fullscreen:n.fullscreen,authorName:i})}const St={minute:60,hour:3600,day:86400,month:2592e3,year:31536e3},wt={seconds:" ",minutes:"__",hours:"__",days:"__",months:"__",years:"__"},xt=[2,0,1,1,1,2,2,2,2,2];function Ot(e,n){let r="",i="",o="";return e&&(!n&&e.started_at&&(r=function(e){if(!function(e){return"string"==typeof e&&/^\d{4}-\d{2}-\d{2}/.test(e)}(e))return"";const t=new Date(e).toLocaleDateString("ru-RU",{month:"long",day:"numeric"});return"Invalid Date"!==t?t:""}(e.started_at)),e.seconds_to_unban&&(i=`  ${function(e){if("number"!=typeof e)return"";if(e<=0)return"";const t=Object.entries(St).reduce(((t,n)=>e>=n[1]?n[0]:t),"seconds");if("seconds"===t)return wt[t];const n=Math.round(e/St[t]),r=11<=n&&n<=19?2:xt[n%10];return[...1!==n?[n.toString()]:[],wt[`${t}s`].split("_")[r]].join(" ")}(e.seconds_to_unban)}`),e.reason&&(o=`: ${e.reason}.`)),n&&n.reason&&(o=`: ${n.reason}.`),t().createElement("div",null," ",r,"   ",t().createElement("a",{href:"/wiki/terms/"}," ",""),".",o&&` ${o}`,i&&` ${i}`)}function It(e){let{text:n,image:r,banned:i,authorName:o}=e;const a=t().createElement(t().Fragment,null,n.length>0&&t().createElement(yt,{isImage:!!r,text:n,banned:i}),r&&t().createElement(Et,{image:r,isBanned:!!i,authorName:o}));return i?t().createElement("div",{className:"ban--d8dpt"},t().createElement(Ce,{popoverContent:Ot(void 0,i),withSubstrate:!0},a)):a}const At="comment--aHNhH",Ct="avatar--RyAPh",Tt="deleteAuthorImage--l_J0d",kt="header--IQ9jY",Nt="labels--Ux_gD",Pt="content--hRzUF",jt="label--OahNC";function Rt(e){let{kind:n,popoverContent:r}=e;const i=function(e){switch(e){case"editors_choice":return t().createElement("div",{className:y()(jt,"isEditorsChoice--EPHjb")}," ");case"ban":return t().createElement("div",{className:y()(jt,"isBaned--iuvlQ")});case"ban-comment":return t().createElement("div",{className:y()(jt,"isBanedForComment--oQ1gd")},"");case"edited":return t().createElement("div",{className:y()(jt,"isEdited--tTNcu")},"");case"edited-now":return t().createElement("div",{className:y()(jt,"isEditedNow--sYiEl")},"");default:return null}}(n);return r&&i?t().createElement(Ce,{popoverContent:r,theme:"dark",withSubstrate:!0},i):i}const Mt=["edited-now","edited","editors_choice","ban","ban-comment"];function Dt(e){let{status:n,isEdited:r,isEditedNow:i,authorBanned:o,banned:a}=e;const s={isEditedNow:!!i,isEdited:r&&!i,isEditorsChoice:"editors_choice"===n,isBan:!(!o||o?.started_at===a?.started_at),isBanForComment:!(!a?.started_at||a?.started_at!==o?.started_at)};return t().createElement(t().Fragment,null,Object.keys(s).map(((e,n)=>s[e]&&t().createElement(Rt,{key:Mt[n],kind:Mt[n],popoverContent:"ban-comment"===Mt[n]||"ban"===Mt[n]?Ot(o||a):void 0}))))}function Ut(e){return t().createElement("div",{className:At,"data-comment-id":`c${e.id}`,"data-level":e.level},t().createElement("div",{className:Ct},t().createElement("img",{src:de,className:Tt,alt:" "})),t().createElement("div",{className:kt},t().createElement(ut,{name:" "}),t().createElement("div",{className:Nt},t().createElement(ft,{id:e.id,datetime:e.date_added}),t().createElement(Dt,{status:e.status,isEdited:e.is_edited}))),t().createElement("div",{className:Pt},t().createElement(It,{text:e.text,image:e.image,banned:e.ban})),e.children)}function Lt(e){let{id:n,level:r,status:i,date_added:o}=e;const a=He.G_.U.aL;return t().createElement("div",{className:y()(At,"isDeleted--dJ2Mh"),"data-comment-id":`c${n}`,"data-level":r},t().createElement("div",{className:kt},t().createElement(ft,{id:n,datetime:o})),t().createElement("div",{className:Pt},t().createElement(It,{text:a[i]})))}function Bt(e){let{id:n,name:r,badge:i,participation:o,role_participation_count:a}=e;return t().createElement("div",{className:y()("author--ZMI7a",{"withBadge--avqBD":i})},t().createElement(ut,{id:n,name:r}),i&&t().createElement(ct,{badge:i,participation:o,participationCount:a}))}function Ft(e){const n=e.author;return t().createElement("div",{"data-comment-id":`c${e.id}`,className:At,"data-level":e.level,itemProp:"comment",itemScope:!0,itemType:"https://schema.org/Comment"},e.parent_id&&t().createElement("meta",{itemProp:"parentItem",content:String(e.parent_id)}),t().createElement("div",{className:Ct},t().createElement($e,{id:n.id,image:n.image,size:"medium",studentStatus:n.studentStatus,url:`/user${n.id}/`,authorName:n.name})),t().createElement("div",{className:kt},t().createElement(Bt,n),t().createElement("div",{className:Nt},t().createElement(ft,{id:e.id,datetime:e.date_added}),t().createElement(Dt,{status:e.status,isEdited:e.is_edited,isEditedNow:e.is_edited_now,banned:e.ban,authorBanned:e.author?.ban}))),t().createElement("div",{className:Pt},t().createElement(It,{text:e.text,image:e.image,banned:e.ban,authorName:n.name})),e.children)}const Gt=(0,a.N)({image:void 0},{events:{imageConverting:e=>({image:e})}}),Ht=(0,a.N)({isEmpty:!0,articleUUID:"",form:"answer",text:""},{events:{initForm:()=>({}),waitForm:()=>({}),sendForm:()=>({}),clearImage:()=>({}),clearForm:()=>({}),updateText:(e,t)=>({text:e,isEmpty:t}),updateImage:(e,t)=>({image:e,isEmpty:t}),convertImage:e=>({image:e}),errorImage:e=>({error:e}),setErrorForm:e=>({error:e}),invokeSuccessAction:e=>({data:e}),invokeErrorAction:e=>({data:e})}}),qt=Gt.createMachine({id:"form-image",initial:"idle",context:Gt.initialContext,states:{idle:{on:{imageConverting:{target:"loading",actions:Gt.assign({image:(e,t)=>{let{image:n}=t;return n}})}}},loading:{invoke:{id:"converting-image",src:e=>{let{image:t}=e;return function(e,t,n){const r=new FileReader;return new Promise(((i,o)=>{e?(r.onload=()=>{Array.isArray(t)&&!t.includes(e.type)&&o("bad_image_format"),e.size>n&&o("bad_size"),i(r.result)},r.onerror=()=>{r.abort(),o("bad_image")},r.readAsDataURL(e)):o("blank_image")}))}(t,p,f)},onDone:{target:"success",actions:(0,_.sendParent)(((e,t)=>{let{data:n}=t;return Ht.events.updateImage(n)}))},onError:{target:"failed",actions:(0,_.sendParent)(((e,t)=>{let{data:n}=t;return Ht.events.errorImage(n)}))}}},success:{after:{0:{target:"idle",actions:Gt.assign({image:void 0})}}},failed:{after:{0:{target:"idle",actions:Gt.assign({image:void 0})}}}}});async function zt(e){let t,{articleUUID:n,form:r,text:i,image:o,replyId:a,editId:s}=e,c=null===o?o:void 0;if(o&&-1!==o.indexOf("base64")){const e=await function(e){const t=e.split(";"),n=t[0].split(":")[1],r=t[1].split(",")[1],i=atob(r);let o=i.length;const a=new Uint8Array(o);for(;o--;)a[o]=i.charCodeAt(o);const s=`${Math.random().toString(36).substring(7)}.${n.split("/")[1]}`;return new File([a],s,{type:n})}(o);c=(await R(e)).links.original}switch(r){case"answer":t=await N(I+"comments/new/?unsafe=true",{text:i||void 0,image:c,article_uuid:n});break;case"reply":t=await N(I+"comments/new/?unsafe=true",{text:i||void 0,image:c,article_uuid:n,reply_to:a});break;case"edit":t=await P(I+`comments/${s}/`,{text:i||void 0,image:c})}try{const e=await U(t.author.id);return L(t,{[e.social_id]:e.status})}catch(e){return t}}const Vt=(e,t,n)=>n||0===e.trim().length&&!t;function Xt(e){let{error:n}=e;switch(n){case"bad_request":return t().createElement(t().Fragment,null,"-    ,   ");case"bad_image_format":return t().createElement(t().Fragment,null," .     ",p.map((e=>e.split("/")[1])).join(", "),"`");case"bad_size":return t().createElement(t().Fragment,null,"    ",function(e){const t=1024,n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+""+["","",""][n]}(f));case"bad_image":return t().createElement(t().Fragment,null,"   ");case"user_ban":case"permission_denied":return t().createElement(t().Fragment,null," .   ,     ,  "," ",t().createElement("a",{href:`mailto:${h}`},h),".");case"too_often":return t().createElement(t().Fragment,null,"    ");default:return t().createElement(t().Fragment,null," .   ",n)}}const Wt=(0,e.createContext)({data:void 0,requestLogin:()=>Promise.resolve(!1)});const Kt="comments_save_form_data.db",Jt="articles";function Yt(e,t,n,r){const i=e.target?.result;if(!i.objectStoreNames.contains(Jt))return void i.close();const o=i.transaction(Jt,r),a=o.objectStore(Jt),s=a.get(n);s.onsuccess=()=>{t(s,a)},o.oncomplete=()=>{i.close()}}function Zt(e,t){if(!e)return;const n=(n,i)=>{if(void 0!==n.result)if(Object.keys(n.result.forms).length>1){const e={...n.result};delete e.forms[t],i.put(e)}else{i.delete(e);const t=i.getAll();t.onsuccess=()=>{0===t.result.length&&indexedDB.deleteDatabase(Kt)}}else r.result.close()},r=indexedDB.open(Kt,1);r.onsuccess=t=>Yt(t,n,e,"readwrite")}function Qt(e){const t=e.target;t.result?.objectStoreNames.contains(Jt)||t.result.createObjectStore(Jt,{keyPath:"articleUUID"})}function $t(){return t().createElement("div",{className:"rules--JuKih"},"  "," ",t().createElement("a",{className:"link--ihh17",href:"/comments-rules/",target:"_blank",rel:"noreferrer"},"  "))}var en=n(9060);const tn=()=>Boolean("undefined"!=typeof window&&window?.tjlib?.core),nn="withAvatar--GNyJT",rn=(0,e.memo)((function(n){let{form:r,replyId:i,placeholder:a,buttonText:s="",currentValue:c,editId:u,onClose:l,isButtonAlwaysShown:d,onAddComment:f,isTouch:h,articleUUID:v,initialFormsData:g,commentsService:b,userState:E,studentStatus:S}=n;const[w,x]=(0,o.eO)((()=>((e,t,n,r)=>Ht.createMachine({id:"form",initial:"idle",context:Ht.initialContext,entry:Ht.assign({articleUUID:e,form:t,editId:r,replyId:n,imageRef:()=>(0,_.spawn)(qt)}),states:{idle:{},wait_loading:{},loading:{invoke:{id:"send-comment",src:"formInvoke",onDone:{target:"success",actions:Ht.assign({comment:(e,t)=>{let{data:n}=t;return n}},"invokeSuccessAction")},onError:{target:"failure",actions:Ht.assign({error:(e,t)=>{let{data:n}=t;return n}},"invokeErrorAction")}}},success:{after:{0:{target:"idle",actions:Ht.assign({text:"",image:void 0,editId:void 0,replyId:void 0,isEmpty:!0})}}},failure:{}},on:{initForm:{target:"idle"},waitForm:{target:"wait_loading"},sendForm:{target:"loading",actions:Ht.assign({error:void 0})},updateText:{actions:Ht.assign({text:(e,t)=>{let{text:n}=t;return n},isEmpty:(e,t)=>{let{image:n}=e,{text:r,isEmpty:i}=t;return Vt(r,n,i)},error:void 0})},updateImage:{actions:Ht.assign({image:(e,t)=>{let{image:n}=t;return n},isEmpty:(e,t)=>{let{text:n}=e,{image:r,isEmpty:i}=t;return Vt(n,r,i)},error:void 0})},convertImage:{actions:(0,_.send)(((e,t)=>{let{image:n}=t;return Gt.events.imageConverting(n)}),{to:e=>e.imageRef})},clearImage:{actions:Ht.assign({image:e=>{let{image:t}=e;return-1!==t?.indexOf("base64")?void 0:null},error:void 0,isEmpty:e=>{let{text:t}=e;return Vt(t)}})},errorImage:{target:"failure",actions:Ht.assign({error:(e,t)=>{let{error:n}=t;return n}})},setErrorForm:{target:"failure",actions:Ht.assign({error:(e,t)=>{let{error:n}=t;return n}})}}},{services:{formInvoke:zt}}))(v,r,i,u))),{isEmpty:O,text:I,image:A,error:C,comment:T}=w.context,k=!!E.data?.id,[N,P]=function(t,n){const r=(0,e.useRef)(null),i=(0,e.useRef)(null);return(0,e.useEffect)((()=>{setTimeout((()=>(()=>{if(!r.current)return;r.current.style.height="";const e=r.current.offsetHeight>r.current.scrollHeight?r.current.offsetHeight:r.current.scrollHeight,t=i.current?.clientHeight,n=e+(t?t-40:0);r.current.style.height=n+"px"})()))}),[t,n]),[r,i]}(I,A);!function(t,n,r){(0,e.useEffect)((()=>{const e=n.current;"answer"!==t&&e&&(setTimeout((()=>{e.focus();const t=e.value.length||0;e.setSelectionRange(t,t)})),r&&setTimeout((()=>{pe(e)})))}),[t,r,n])}(r,N,h),(0,e.useEffect)((()=>{w.matches("success")&&(T&&b&&b.send("edit"===r?m.events.updateComment({...T,is_edited_now:!0}):m.events.addComment(T)),f?.(),"edit"!==r&&Ue("trackUserAddedComment"),Object.keys(g?.[r]||{}).length>0&&Zt(v,r))}),[v,g,w,r,f,T,b]),(0,e.useEffect)((()=>{c&&(c.text&&x(Ht.events.updateText(c.text,c.isEmpty)),c.image&&x(Ht.events.updateImage(c.image,c.isEmpty)))}),[c]),(0,e.useEffect)((()=>{const e=/iPad|iPhone|iPod/.test(window.navigator.userAgent)&&!window.MSStream?"pagehide":"beforeunload",t=()=>{!g?.[r]&&O||(g?.[r]&&O?Zt(v,r):function(e){let{articleUUID:t,form:n,saveData:r,commentID:i}=e;if(!t||!n||!r.text&&!r.image)return;const o=(e,o)=>{const a={[n]:"answer"===n?r:{[i]:r}};void 0===e.result?o.put({articleUUID:t,forms:a}):o.put({...e.result,forms:{...e.result.forms,...a}})},a=indexedDB.open(Kt,1);a.onupgradeneeded=Qt,a.onsuccess=e=>Yt(e,o,t,"readwrite")}({articleUUID:v,form:r,saveData:{text:I,image:A},commentID:u||i}))};return window.addEventListener(e,t),()=>window.removeEventListener(e,t)}),[r,I,A]);const j=e=>{if(e.preventDefault(),!k)return x(Ht.events.waitForm()),void E.requestLogin({pointOfContact:`comments-${r}-button`,popupTitle:He.gk.c.T}).then((()=>{x(Ht.events.sendForm())})).catch((e=>{e?.message===Re&&x(Ht.events.setErrorForm(Re)),x(Ht.events.initForm())}));x(Ht.events.sendForm())},R="loading"===w.value||"wait_loading"===w.value;return t().createElement(t().Fragment,null,t().createElement("form",{className:"form--qNglU",onSubmit:j,onKeyDown:e=>{"Enter"===e.key&&e.metaKey&&j(e)},"data-form":r},k&&t().createElement("div",{className:"avatar--wOEZ7"},t().createElement($e,{id:E.data?.id,image:E.data?.image,size:h?Je:Ye,studentStatus:S,authorName:E.data?.name})),t().createElement("textarea",{ref:N,className:y()("textarea--L7lra",{[nn]:k},{"withError--N6Bsy":"failure"===w.value},{"withHigh--jFH0Y":d}),value:I,placeholder:a,onChange:e=>{const t=e.currentTarget.value;E.data?.is_banned?x(Ht.events.setErrorForm("user_ban")):x(Ht.events.updateText(t))},disabled:R,maxLength:5e3}),C&&t().createElement("p",{className:"errorMessage--v3bSg"},t().createElement(Xt,{error:C})),!C&&"edit"!==r&&t().createElement($t,null),A&&t().createElement("div",{ref:P,className:y()("image--w4Ydo",{[nn]:k})},t().createElement("button",{className:"delete--Vx85c",disabled:R,onClick:()=>{x(Ht.events.clearImage())}}),t().createElement(bt,{preview:A,fullscreen:A,authorName:E.data?.name})),t().createElement("div",{className:y()("buttons--MgGq3",{"withImage--BoI3K":!!A})},!A&&t().createElement("label",{className:"upload--fJT3W"},t().createElement("input",{type:"file",accept:p.join(","),disabled:R,onChange:e=>{const t=e.target?.files?.[0];t&&(E.data?.is_banned?x(Ht.events.setErrorForm("user_ban")):x(Ht.events.convertImage(t)))}})),(!O||d)&&t().createElement("button",{type:"submit",className:"button--jyvGQ",disabled:d&&O||R},R?t().createElement(Fe,{color:"white"}):s))),"edit"===r&&t().createElement("div",{className:"cancelWrap--BLxJR"},t().createElement("button",{className:"buttonCancel--B9JrR",onClick:l,disabled:R}," ")))}));function on(n){const{isTouch:r,articleUUID:i,initialFormsData:o,commentsService:a}=(0,e.useContext)(Ie),s=(0,e.useContext)(Wt),{data:c}=s,[u,l]=(0,e.useState)();return(0,e.useEffect)((()=>{if(tn())return void(c?.id&&U(c?.id).then((e=>{l(e.status)})));const e=c;e?.studentStatus&&l(e?.studentStatus?.status)}),[c]),t().createElement(rn,we({},n,{isTouch:r,articleUUID:i,initialFormsData:o,commentsService:a,userState:s,studentStatus:u}))}function an(e){let{isUserBan:n,children:r}=e;if(!n)return r;const i=t().createElement("div",null,"       ");return t().createElement(Ce,{popoverContent:i},r)}function sn(e){let{isBanForComment:n,isUserBan:r,onClick:i}=e;const o=n||r;return t().createElement(an,{isUserBan:r},t().createElement("button",{className:y()("reply--uBgvM",{"isBan--JFRAf":o}),disabled:o,onClick:o?void 0:i},""))}const cn="isNegative--dU7iw",un="isPositive--qu7QG",ln="votes--VlpDy";function dn(e){let{likes:n,dislikes:r}=e;const i=n-r,o=t().createElement("div",{className:"votesContent--wm_8w"},t().createElement("div",{className:y()(ln,un)},"+",n),t().createElement("div",{className:y()(ln,cn)},"",r));return t().createElement(Ce,{popoverContent:o,arrowSize:5},t().createElement("div",{className:y()("counter--zfIrC",fn(i))},function(e){return e.toString().replace("-","")}(i)))}function fn(e){return e<0?cn:e>0?un:""}const pn=n=>{let{active:r=!1,type:i,noAnimate:o}=n;const[a,s]=(0,e.useState)(!1);(0,e.useEffect)((()=>{if(!o){const e=setTimeout((()=>s(r)),300);return()=>clearTimeout(e)}s(r)}),[r,o]);const c=r!==a;return t().createElement("span",{className:y()("svgVote--RVabF",{"activeVote--FdevK":a,"negativeVote--teKLz":"negative"===i,"animationPositive--U4azq":c&&"positive"===i,"animationNegative--xYoNk":c&&"negative"===i})})},hn=(0,e.memo)(pn),vn=e=>e.context.voteMachine,mn=e=>e.matches("loading");function gn(n){const{id:r,user_vote:i,likes:a,dislikes:s,isBanForComment:c,isPersonalControls:u,user:l,authUser:d}=n,[f,p]=(0,e.useState)(!1),{commentsService:h}=(0,e.useContext)(Ie),v=h,m=(0,o.v9)(v,vn),g=(0,o.v9)(m,mn),_=(0,e.useCallback)((e=>{p(!0);let t=i;"up"===e&&(t=Math.min(t+1,1),Ue("trackUserUpvotedComment")),"down"===e&&(t=Math.max(t-1,-1),Ue("trackUserDownvotedComment")),l?.id?(m?.send(K.events.voteComment(r,e,{user_vote:i,vote:t,likes:a,dislikes:s})),setTimeout((()=>{p(!1)}),1e3)):d({pointOfContact:"comments-vote-button",popupTitle:He.gk.J.T}).then((()=>{m?.send(K.events.voteComment(r,e,{user_vote:i,vote:t,likes:a,dislikes:s})),setTimeout((()=>{p(!1)}),1e3)}))}),[d,s,r,a,l?.id,i,m]),b=!!l?.is_banned,E=c||b,S=E||g||u,w=y()("voteButton--obnQt",{"isPersonal--D8dui":u});return t().createElement("div",{className:y()("rating--rsGKd",{"isBan--f6U0v":E})},t().createElement(an,{isUserBan:b},t().createElement("button",{className:w,disabled:S,onClick:()=>_(1===i?"down":"up")},t().createElement(hn,{active:1===i,type:"positive",noAnimate:!f}))),t().createElement(dn,{likes:a,dislikes:s}),t().createElement(an,{isUserBan:b},t().createElement("button",{className:w,disabled:S,onClick:()=>_(-1===i?"up":"down")},t().createElement(hn,{active:-1===i,type:"negative",noAnimate:!f}))),t().createElement("meta",{itemProp:"upvoteCount",content:String(a)}),t().createElement("meta",{itemProp:"downvoteCount",content:String(s)}))}const yn=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(",");function _n(n){let{children:r,onClose:i}=n;const o=(0,e.useRef)(null),a=(0,e.useRef)(null);return(0,e.useEffect)((()=>{function e(e){"Escape"===e.key&&i(),"Tab"===e.key&&(e=>{if(!o.current)return;const t=o.current.querySelectorAll(yn),n=t?t[0]:null,r=t?t[t.length-1]:null,i=Array.from(t).some((e=>e===document.activeElement));e.shiftKey&&document.activeElement===r||(!n||i&&document.activeElement!==r||(n.focus(),e.preventDefault()),r&&e.shiftKey&&document.activeElement===n&&(r.focus(),e.preventDefault()))})(e)}return document.addEventListener("keydown",e),a.current=document.activeElement,()=>{document.removeEventListener("keydown",e),a.current&&a.current.focus()}}),[i]),t().createElement("div",{className:"popup--CIwLx",ref:o},t().createElement("div",{className:"overlay--mlbSm",onClick:i}),t().createElement("div",{className:"wrap--HvoMP"},t().createElement("div",{role:"button",tabIndex:-1,className:"close--ZNayu",onClick:i}),r))}const bn={popupBan:"popupBan--c5Sfp",header:"header--Cl3J4",name:"name--UxX2b",image:"image--JBpG4",times:"times--oUp5n",time:"time--AZKKX",active:"active--UN6Co",reasons:"reasons--YE6Jg",reason:"reason--dqdst",buttons:"buttons--DMVvs",button:"button--A29vA",popupUnban:"popupUnban--wum90",unban:"unban--n0TyY",rotate:"rotate--yo3Js","rotate-loaf":"rotate-loaf--yJrbQ",opacity:"opacity--BB9yu",pulse:"pulse--XHk8y",pulseNegative:"pulseNegative--vjXeR",popup:"popup--huCHC",slideTop:"slideTop--sLy9w"};function En(n){let{author:r,onClose:i,onBan:o}=n;const{periodsForBan:a,reasonsForBan:s}=He.G_.U.KC,[c,u]=(0,e.useState)(0),[l,d]=(0,e.useState)(a[0].period);return t().createElement(_n,{onClose:i},t().createElement("div",{className:bn.popupBan},t().createElement("div",{className:bn.content},t().createElement("div",{className:bn.header},r?.image&&t().createElement("div",{className:bn.image},t().createElement($e,{id:r.id,size:"medium",image:r.image,authorName:r.name})),r?.name&&t().createElement("p",{className:bn.name},r.name,", ")),t().createElement("div",{className:bn.times},a.map((e=>t().createElement("button",{key:e.period,className:y()(bn.time,{[bn.active]:e.period===l}),onClick:()=>d(e.period)},e.text)))),t().createElement("div",{className:bn.reasons},s.map(((e,n)=>t().createElement("div",{key:n,className:bn.reason,role:"radio","aria-checked":c===n,tabIndex:0,onClick:()=>u(n),onKeyPress:e=>((e,t)=>{"Enter"===e.key&&u(t)})(e,n)},t().createElement("input",{type:"radio",id:`radio-${n}`,readOnly:!0,checked:c===n,value:n}),t().createElement("label",{htmlFor:`radio-${n}`},e))))),t().createElement("div",{className:bn.buttons},t().createElement("button",{className:bn.button,onClick:()=>{const e=a.find((e=>e.period===l));o({reason:s[c],period:l,started_at:(new Date).toISOString(),seconds_to_unban:e?e.secondsToUnban:void 0})}},"")))))}function Sn(e){let{author:n,onClose:r,onUnBan:i}=e;return t().createElement(_n,{onClose:r},t().createElement("div",{className:bn.popupUnban},t().createElement("div",{className:bn.content},t().createElement("div",{className:bn.header},n?.image&&t().createElement("div",{className:bn.image},t().createElement($e,{id:n.id,size:"medium",image:n.image,authorName:n.name})),n?.name&&t().createElement("p",{className:bn.name},n.name,", ?")),t().createElement("div",{className:bn.unban},Ot(n?.ban)),t().createElement("div",{className:bn.buttons},t().createElement("button",{className:bn.button,onClick:i}," ")))))}const wn="personalControls--qRd8F",xn="button--KitbX";function On(e){return!!e&&Date.now()-new Date(e).getTime()<3e5}const In=e=>e.context.deleteMachine,An=e=>e.context.editorsChoiceMachine,Cn=e=>e.matches("loading"),Tn=e=>e.matches("loading");function kn(n){const{data:r,isAdmin:i,setShowBanModal:a,onEditing:s}=n,{id:c,author:u,date_added:l,status:d}=r,{commentsService:f}=(0,e.useContext)(Ie),p=f,h=(0,o.v9)(p,In),v=(0,o.v9)(p,An),m=(0,o.v9)(p,Cn),g=(0,o.v9)(p,Tn),_=On(l);return t().createElement("div",{className:"personalControlsPopover--hZWWS"},i&&t().createElement(t().Fragment,null,t().createElement("button",{className:xn,onClick:()=>{v?.send(Q.events.editorsChoiceComment(c,"visible"===d))},disabled:g},"editors_choice"===d?" ":""),u?.id&&t().createElement("button",{className:xn,onClick:()=>a(u?.ban?"unban":"ban")},u?.ban?"":"")),(_||i)&&t().createElement("button",{className:xn,onClick:()=>s()},""),t().createElement("button",{className:y()(xn,"red--SNDrW"),onClick:()=>{h?.send(Y.events.deleteComment(c))},disabled:m},""))}const Nn="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMDAwIj48Y2lyY2xlIGN4PSIzLjUiIGN5PSI5LjUiIHI9IjEuNSIvPjxjaXJjbGUgY3g9IjkuNSIgY3k9IjkuNSIgcj0iMS41Ii8+PGNpcmNsZSBjeD0iMTUuNSIgY3k9IjkuNSIgcj0iMS41Ii8+PC9nPjwvc3ZnPgo=",Pn=e=>e.context.banMachine;function jn(n){const{data:r,isAdmin:i,onEditing:a}=n,{id:s,author:c}=r,[u,l]=(0,e.useState)(!1),{isTouch:d,commentsService:f}=(0,e.useContext)(Ie),p=f,h=(0,o.v9)(p,Pn),[v,m]=(0,e.useState)(),g=t().createElement(kn,{data:r,isAdmin:i,setShowBanModal:m,onEditing:a});return t().createElement(t().Fragment,null,d?t().createElement(t().Fragment,null,t().createElement("div",{className:wn,onClick:()=>l(!0)},t().createElement("img",{src:Nn,alt:""})),u&&t().createElement("div",{className:"popup--iE7G8",onClick:()=>l(!1)},g)):t().createElement(Ce,{arrowSize:10,popoverContent:g,align:"start",theme:"light",withSubstrate:!0},t().createElement("div",{className:wn},t().createElement("img",{src:Nn,alt:""}))),"ban"===v&&t().createElement(En,{author:c,onClose:()=>m(void 0),onBan:e=>{let{reason:t,period:n,started_at:r,seconds_to_unban:i}=e;m(void 0),c?.id&&h?.send(ee.events.banComment(c.id,s,t,n,r,i))}}),"unban"===v&&t().createElement(Sn,{author:c,onClose:()=>m(void 0),onUnBan:()=>{m(void 0),c?.id&&h?.send(ee.events.unbanComment(c.id,s))}}))}const Rn=(0,e.memo)((function(n){const{user:r,data:i,isPersonalControls:o,isAdmin:a,authUser:s,onEditing:c,onReply:u}=n,{id:l,ban:d,rating:f}=i,p=(0,e.useCallback)((()=>{u(l)}),[l,u]),h=(0,e.useCallback)((()=>{c(l)}),[l,c]);return t().createElement("div",{className:"controls--AeY65"},t().createElement(sn,{isBanForComment:!!d,isUserBan:!!r?.is_banned,onClick:p}),t().createElement(gn,we({},f,{id:l,isBanForComment:!!d,user:r,authUser:s,isPersonalControls:o})),(o||a)&&t().createElement(jn,{data:i,isAdmin:a,onEditing:h}))}));function Mn(n){const{data:r,onEditing:i,onReply:o}=n,{author:a}=r,s=(0,e.useContext)(Wt),c=void 0!==a?.id&&a.id===s.data?.id,u=!!s.data?.is_admin;return t().createElement(Rn,{data:r,user:s.data,authUser:s.requestLogin,isPersonalControls:c,isAdmin:u,onEditing:i,onReply:o})}const Dn=e=>e.context.restoreMachine,Un=e=>e.matches("loading"),Ln=e=>e.matches("failure");function Bn(n){const{id:r,level:i,status:a,author:s}=n,c=He.G_.U.aL,{commentsService:u}=(0,e.useContext)(Ie),l=u,d=(0,o.v9)(l,Dn),f=(0,o.v9)(d,Un),p=(0,o.v9)(d,Ln);return t().createElement("div",{className:y()(At,"isRestore--wsYlL"),"data-comment-id":`c${r}`,"data-level":i},t().createElement("div",{className:y()(Ct,"isRestoreAvatar--IZqOy")},s?t().createElement($e,{id:s.id,image:s.image,size:"medium",studentStatus:s.studentStatus,authorName:s.name}):t().createElement("img",{src:de,className:Tt,alt:" "})),t().createElement("div",{className:y()(Pt,"isRestoreContent--pZZB1")},t().createElement(It,{text:c[a]}),p?t().createElement(ae,{type:"restore"}):t().createElement("button",{className:"button--lALNx",disabled:f,onClick:()=>{d.send(ne.events.restoreComment(r))}},"")))}function Fn(e){if(!e)return"";const[t]=e.split(" ");return`${t}, `}function Gn(e,t,n){if(!n)return;const r=n[e];return r?r[t]:void 0}const Hn=(0,e.memo)((function(n){const{data:r,isReply:i,isEditing:o,onReply:a,onEditing:s,initialFormsData:c,articleUUID:u}=n,{id:d,author:f,level:p,status:h,text:v,image:m,is_restore:g,date_added:_}=r;(0,e.useEffect)((()=>{Gn("reply",d,c)&&a(d),Gn("edit",d,c)&&(On(_)?s(d):Zt(u,"edit"))}),[u,c,_,d,a,s]);const b=(0,e.useCallback)((()=>{a(0),s(0)}),[s,a]),E=(0,e.useCallback)((()=>{Gn("edit",d,c)&&Zt(u,"edit"),s(0)}),[s,u,d,c]),S=(0,e.useMemo)((()=>Gn("edit",d,c)||{text:v,image:m?.preview,isEmpty:!0}),[d,m,c,v]);return g?t().createElement(Bn,r):o?t().createElement("div",{"data-comment-id":`c${d}`,"data-level":p,className:y()(At,"editableComment--iVlee")},t().createElement(on,{form:"edit",editId:d,currentValue:S,onAddComment:b,onClose:E})):l.includes(h)?t().createElement(Lt,r):f?t().createElement(it,{id:d,isLazy:!1},t().createElement(Ft,r,t().createElement(Mn,{data:r,onReply:a,onEditing:s}),i&&t().createElement(on,{form:"reply",replyId:d,currentValue:Gn("reply",d,c)||{text:Fn(f.name),isEmpty:!0},onAddComment:b}))):t().createElement(it,{id:d,isLazy:!1},t().createElement(Ut,r,t().createElement(Mn,{data:r,onReply:a,onEditing:s}),i&&t().createElement(on,{form:"reply",currentValue:Gn("reply",d,c),replyId:d,onAddComment:b})))}));function qn(n){const{initialFormsData:r,articleUUID:i}=(0,e.useContext)(Ie);return t().createElement(Hn,we({},n,{initialFormsData:r,articleUUID:i}))}function zn(n){let{comments:r,byId:i,replyId:o,editingId:a,onReply:s,onEditing:c}=n;const{initialFormsData:u}=(0,e.useContext)(Ie),l=(0,e.useRef)(void 0),f=(0,e.useMemo)((()=>X(r)),[r]),[p,h]=(0,e.useState)(!1);(0,e.useEffect)((()=>{const e=nt(),t=tt("edit",u),n=tt("reply",u),r=e||t||n;l.current=f.length;const i=f.length<=4,o=r&&f.slice(4).includes(r);h(!(i||o))}),[]),(0,e.useEffect)((()=>{l?.current!==f.length&&h(!1)}),[f]);const v=p?f.slice(0,4):f,m=i[v[v.length-1]].level,g=f.slice(4),y=(0,e.useMemo)((()=>g.reduce(((e,t)=>{const n=i[t],r=n.author;return r?(e.push(r),e):(d.includes(n.status)&&e.push({id:-1,image:de}),e)}),[])),[i,g]);return t().createElement(t().Fragment,null,v.map((e=>t().createElement(qn,{key:e,data:i[e],isReply:o===e,isEditing:a===e,onReply:s,onEditing:c}))),p&&t().createElement("button",{className:"branchCut--PYEEe",onClick:()=>h(!1),"data-level":m},t().createElement(et,{authors:y,count:g.length,label:"reply"})))}function Vn(n){let{branches:r,byId:i}=n;const[o,a]=(0,e.useState)(0),[s,c]=(0,e.useState)(0),u=(0,e.useCallback)((e=>a(e)),[]),l=(0,e.useCallback)((e=>c(e)),[]);return t().createElement(t().Fragment,null,r.map((e=>t().createElement(t().Fragment,{key:e.commentId},t().createElement(qn,{data:i[e.commentId],isReply:o===e.commentId,isEditing:s===e.commentId,onReply:u,onEditing:l}),e.children&&t().createElement(zn,{byId:i,comments:e.children,replyId:o,editingId:s,onReply:u,onEditing:l})))))}function Xn(n){let{commentsCollection:r,commentCount:i,isSuccess:o,isFailure:a}=n;const s=(0,e.useRef)(null),[c,u]=(0,e.useState)(!1);var l,d;l=s.current,d=()=>u(!0),(0,e.useEffect)((()=>{if(!l)return;const e=new MutationObserver((function(t){"data-cut"===t[0].attributeName&&(d(),e.disconnect())}));e.observe(l,{attributes:!0})}),[l,d]);const{tree:f,byId:p}=r,[h,v]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{!o&&!a||h||v(!0)}),[o,a,h]),t().createElement(t().Fragment,null,t().createElement("div",{ref:s,className:"commentsWrap--q8UiR","data-cut":!c},!h&&t().createElement("div",{className:"commentsLoader--NHCWE"},t().createElement(ue,null)),a&&t().createElement(ae,{type:0!==i?"comments-all":"comments"}),t().createElement(Vn,{branches:f.branches,byId:p})),!c&&h&&t().createElement(rt,{commentsRef:s.current,commentCount:i,commentsCollection:r,handleOpenCut:()=>u(!0)}))}function Wn(e){let{socialId:n,name:r,image:i,date:o,text:a,isAuthor:s}=e;const c=n&&n>0&&s?`/user${n}/`:void 0;return t().createElement("div",{className:"topic--XeZ74"},t().createElement("div",{className:"avatar--dIHUg"},t().createElement($e,{id:n,size:Ze,image:Kn(i),url:c,authorName:r})),t().createElement("div",{className:"header--sGLhZ"},t().createElement("div",{className:"headerInner--VjfwB"},t().createElement(We,{url:c,className:"link--hM181"},t().createElement("div",{className:"name--oDMlu"},r)),t().createElement("div",{className:"date--tZbqA"},lt(o)))),t().createElement("div",{className:"text--Mocvu"},a))}function Kn(e){let t="/media/";return window.TJ&&(t=window.TJ.uploads),t+e}const Jn="sorting--fr6G8",Yn="sortingButton--VwwZW",Zn="isActive--T1zzG",Qn=e=>e.length>1||e.some((e=>!!e.children&&Qn(e.children)));function $n(t){let{count:n,withShadow:r}=t;return e.createElement("div",{className:y()("root--eQGPJ",{"isThin--phrui":r})},e.createElement("div",{className:y()("bubble--hm96H",{"withShadow--VOavT":r})},e.createElement("span",{className:"count--FH_cj"},n)))}const er=e=>{let{count:n,branches:r,sortKind:i,handleSort:o}=e;return t().createElement("div",{className:Jn},t().createElement($n,{count:n,withShadow:!0}),Qn(r)&&t().createElement("div",{className:Jn},t().createElement("button",{className:y()(Yn,{[Zn]:i===c}),onClick:()=>o(c)}," "),t().createElement("button",{className:y()(Yn,{[Zn]:i===u}),onClick:()=>o(u)}," ")))};function tr(){const e=window.innerWidth||window.screen.width;return{isTablet:e<820,isDesktop:e>1620}}const nr=(0,en.getCore)(),rr=tn()?function(){const[t,n]=(0,e.useState)(),r=(0,e.useCallback)((e=>{var t;return(t={pointOfContact:e.pointOfContact,uiText:{title:e.popupTitle,description:e.popupDescription}},(0,en.getCore)()?.actions.requestLogin(t))||Promise.resolve(!1)}),[]);return(0,e.useEffect)((()=>{const e=nr?.profile.get();return e&&n(e),nr?.profile.subscribe(n)}),[]),{data:t,requestLogin:r}}:function(){const[t,n]=(0,e.useState)(),r=(0,e.useCallback)((e=>async function(e){const t=await(Me()?.tryLogin(e));if(t?.status!==je.LOGGED_IN)throw new Error(`The user does not have success auth status: ${t?.status}`)}(e)),[]),i=(0,e.useCallback)((e=>{e.status!==je.LOGGED_IN||t||Promise.all([De().then((e=>n(e)))])}),[t]);return(0,e.useEffect)((()=>{De().then((e=>{if(!e)return t=i,void Me()?.subscribeForLoginStatusChange(t);var t;n(e)})).catch((e=>{console.error(e)}))}),[]),{data:t,requestLogin:r}};function ir(n){const[r,i,a]=(0,o.eO)(ie.withContext({commentsCollection:W(n?.comments||[],c),articleUUID:n.article.articleUUID}),{devTools:!1}),u=(0,e.useCallback)((()=>new Promise(((e,t)=>{try{i(m.events.getComments());const n=a.subscribe((r=>{"loading"!==r.value&&("failure"===r.value?t():e(),n.unsubscribe())}))}catch(e){console.error(e),t()}}))),[i,a]),l=rr(),{data:d}=l,f=function(t,n){const[r,i]=(0,e.useState)(),{isDesktop:o,isTablet:a}=function(){const[t,n]=(0,e.useState)((()=>tr()));return(0,e.useEffect)((()=>{const e=fe((()=>{const e=tr();n(e)}),100);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),t}(),s=(0,e.useMemo)((()=>({isTouch:a,isDesktop:o,articleUUID:t,initialFormsData:r,commentsService:n})),[n,r,o,a,t]);return(0,e.useEffect)((()=>{var e;(e=t,new Promise((t=>{const n=e=>{void 0!==e.result?t(e.result?.forms):r.result.close()},r=indexedDB.open(Kt,1);r.onsuccess=t=>Yt(t,n,e,"readonly")}))).then((e=>{e&&i(e)}))}),[t]),s}(n.article.articleUUID,a);(0,e.useEffect)((()=>{const e=new IntersectionObserver((function(t){t[0].isIntersecting&&(Ue("trackUserViewedComments"),e.unobserve(t[0].target))}),{root:null,threshold:.5});e.observe(document.getElementById(s))}),[]);const{commentsCollection:p}=r.context,h=Object.keys(p.byId).length,v=n?.article?.topicStarter;return(0,e.useEffect)((()=>{d?u():i(m.events.getComments())}),[i,d,u]),t().createElement("div",{className:"commentsContainer--mlQhm"},t().createElement("div",{id:s,className:y()("comments--OEb7f",{"dev--xZvKX":!1})},!!v&&t().createElement(Wn,v),t().createElement(Wt.Provider,{value:l},t().createElement(Ie.Provider,{value:f},t().createElement("div",{className:"answerForm--n6Q_h"},t().createElement(on,{form:"answer",currentValue:f.initialFormsData?.answer,placeholder:v?" ":" ",isButtonAlwaysShown:0===h&&r.matches("success")})),h>0&&r.matches("success")&&t().createElement(er,{count:h,branches:p.tree.branches,sortKind:p.sortKind,handleSort:e=>{i(m.events.sortComments(e))}}),t().createElement(Xn,{commentsCollection:p,commentCount:h,isSuccess:r.matches("success"),isFailure:r.matches("failure.finish")})))))}function or(){const e=document.querySelector(`[data-id=${i}]`);if(!e)return null;const n=document.querySelector(`script[data-id=${i}]`),o=JSON.parse(n?.innerHTML||"{}"),a=t().createElement(ir,{article:o.article,comments:o.comments});var s,c;s=o?.env?.SENTRY_DSN,c=o?.env?.NODE_ENV,s&&E.init({dsn:s,environment:c,denyUrls:[/forms/],allowUrls:[/eris/],ignoreErrors:["AbortError","UnknownError","InvalidStateError",/REJECTED_BY_USER/]}),(0,r.a)(e,a)}"complete"!==document.readyState?document.addEventListener("DOMContentLoaded",or):or()})()})();